<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-07-24 Sun 14:20 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>kdhouser/kdh.stax</title>
<meta name="author" content="Keith D Houser" />
<meta name="description" content="Project Notes for kdhouser24/kdh.stax" />
<meta name="keywords" content="syntax, org, document" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="svg/stax.css"/>
<link rel="stylesheet" type="text/css" href="stax-readtheorg/mystyle.css"/>
<link rel="preconnect" href="https://fonts.googleapis.com"/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
<link href="https://fonts.googleapis.com/css2?family=Oxygen&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style> pre.src{background:black;color:white;} </style>
<style> div#text-table-of-contents code {color:black;background:lightgray;} </style>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">kdhouser/kdh.stax</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org6c515db">Introduction</a>
<ul>
<li><a href="#orgd276806">About This Document</a></li>
<li><a href="#org2b53460">About <code>[kdh/stax "0.1.0"]</code></a>
<ul>
<li><a href="#orge63cd96">Src File Tree</a></li>
<li><a href="#org72e27fc">Dev File Tree</a></li>
<li><a href="#orgfcd4c8a">Doc File Tree</a></li>
<li><a href="#org0a44f7c">Test File Tree</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org7195982">Assignment</a>
<ul>
<li><a href="#org95c476d">Reformatted Assignment</a>
<ul>
<li><a href="#org63d0f84">Page 1</a>
<ul>
<li><a href="#org4268a0c">Explanation of functionality:</a></li>
<li><a href="#orgea48c81">Notes about your implementation:</a></li>
</ul>
</li>
<li><a href="#org4f7f00e">Page 2</a>
<ul>
<li><a href="#org16b826b">Code Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#orga2cc5cb">Requirements</a>
<ul>
<li><a href="#org45b6c41">Explicit Requirements</a>
<ul>
<li><a href="#org3f29666"><span class="done DONE">DONE</span> <b>req-e-01</b>: Variables are symbols prefixed with "!", e.g. !v</a></li>
<li><a href="#org2d9dbcf"><span class="done DONE">DONE</span> <b>req-e-02</b>: A stack function is defined with "defstackfn"</a></li>
<li><a href="#org2303642"><span class="done DONE">DONE</span> <b>req-e-03</b>: The first argument is the input declaration which also provides variable names to the arguments</a></li>
<li><a href="#orgdae380a"><span class="done DONE">DONE</span> <b>req-e-04</b>: The stack always starts empty</a></li>
<li><a href="#org20da157"><span class="done DONE">DONE</span> <b>req-e-05</b>: The implementation of a stackfn is a sequence of stack operations</a></li>
<li><a href="#orga416330"><span class="done DONE">DONE</span> <b>req-e-06</b>: Using a constant as a stack operation pushes that value onto the stack</a></li>
<li><a href="#orgb7e30df"><span class="done DONE">DONE</span> <b>req-e-07</b>: A variable is assigned the top value of the stack by appending "​+" to the variable name,  e.g. !v​+</a></li>
<li><a href="#org262323d"><span class="done DONE">DONE</span> <b>req-e-08</b>: A function is invoked with "invoke&gt;".</a></li>
<li><a href="#orgde0365f"><span class="done DONE">DONE</span> <b>req-e-09</b>: "invoke&gt;" takes as input the operation</a></li>
<li><a href="#orgd624641"><span class="done DONE">DONE</span> <b>req-e-10</b>: "invoke&gt;" takes as input the arity to use</a></li>
<li><a href="#orge6001ac"><span class="done DONE">DONE</span> <b>req-e-11</b>: &lt;pop&gt; is a special operation which removes the top value of the stack</a></li>
<li><a href="#orga12d444"><span class="done DONE">DONE</span> <b>req-e-12</b>: if&gt; tests if the top value of the stack is truthy to determine which branch to follow.</a></li>
<li><a href="#org0bad5c5"><span class="done DONE">DONE</span> <b>req-e-13</b>: The branches of if are separated with "else&gt;"</a></li>
<li><a href="#org490eb85"><span class="done DONE">DONE</span> <b>req-e-14</b>: defstackfn should be a macro&#x2026;.</a></li>
<li><a href="#orgc9800b9"><span class="done DONE">DONE</span> <b>req-e-15</b>: defstackfn should produce a function invokable like any other function.</a></li>
<li><a href="#org0ccf1c7"><span class="done DONE">DONE</span> <b>req-e-16</b>: defstackfn should provide an informative error if there's an invalid stack operation</a></li>
<li><a href="#org3ab91cf"><span class="done DONE">DONE</span> <b>req-e-17</b>: defstackfn should provide an informative error if there's a variable is referenced that doesn't exist.</a></li>
<li><a href="#org28469bb"><span class="done DONE">DONE</span> <b>req-e-18</b>: It should be possible to shadow vars (naming a new local the name of an existing variable).</a></li>
<li><a href="#org94ebff8"><span class="done DONE">DONE</span> <b>req-e-19</b>: The example below contains all functionality you need to implement.</a></li>
</ul>
</li>
<li><a href="#org7a47523">Implicit requirements (<b>req-i-#</b>)</a>
<ul>
<li><a href="#org366b327"><span class="done DONE">DONE</span> <b>req-i-01</b>: <code>defstackfn</code> can take an empty declarations argument</a></li>
<li><a href="#orgb906598"><span class="done DONE">DONE</span> <b>req-i-02</b>: <code>if&gt;</code> consumes the top of the stack</a></li>
<li><a href="#org88a08fb"><span class="done DONE">DONE</span> <b>req-i-03</b>: <code>!v​+</code> (define variable and assign it top of stack) does not consume the top of the stack</a></li>
<li><a href="#org3a715c8"><span class="done DONE">DONE</span> <b>req-i-04</b>: <code>(invoke&gt; fun n)</code> applies n items off the top of the stack in stack order (i.e. reverse of underlying vector's order)</a></li>
<li><a href="#orgc1fe83b"><span class="done DONE">DONE</span> <b>req-i-05</b>: <code>(invoke&gt; fun n)</code> for the sake of consistency, the return value of invoke should be <i>constant</i> (i.e. self-evaluating)</a></li>
<li><a href="#orgc5eed18"><span class="done DONE">DONE</span> <b>req-i-06</b>: For the sake of consistency, values passed to the defstackfn defined function should be <i>constant</i> (i.e. self-evaluating)</a></li>
<li><a href="#org52c7d35"><span class="done DONE">DONE</span> <b>req-i-07</b>: <code>kdh.stax.core/defstackfn</code> creates a named function that returns the remaining stack as a vector</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2017a31">Using <code>defstackfn</code></a>
<ul>
<li><a href="#org6ed1c6f"><code>&lt;name&gt;</code>: the named function defined by <code>defstackfn</code></a></li>
<li><a href="#orgb0c3205"><code>&lt;name&gt;-dbg</code>: the debug function defined by <code>defstackfn</code></a></li>
</ul>
</li>
<li><a href="#org91ca666">Nodes</a></li>
<li><a href="#org5d516c2">Node Data</a></li>
<li><a href="#org214c058">Building Node Data</a>
<ul>
<li><a href="#orgc98c6eb"><code>build-node-data</code></a>
<ul>
<li><a href="#org35c96c0">ops ➤ node-tree (<code>kdh.stax.nodify/nodify-ops</code>)</a></li>
<li><a href="#orgc6275ba">node-tree ➤ paths (<code>kdh.stax.nodify/node-tree-to-node-paths</code>)</a>
<ul>
<li><a href="#org9dd6415">Whiteboarding</a></li>
</ul>
</li>
<li><a href="#org850ff45">Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org2855dc3">Errors</a>
<ul>
<li><a href="#org7d3004e">Error Zones</a>
<ul>
<li><a href="#orga888b0d">Parse Errors</a></li>
<li><a href="#orgf788cc5">Static Path Analysis Errors</a></li>
<li><a href="#org503303c">Runtime Errors</a></li>
</ul>
</li>
<li><a href="#org1904230">Error Types</a>
<ul>
<li><a href="#org16f5b76"><code>:err-type</code> vs <code>err-zone</code></a></li>
<li><a href="#org4e5aad6">Debugging Errors</a></li>
</ul>
</li>
<li><a href="#org9454547">NodeFailure</a></li>
</ul>
</li>
<li><a href="#orgc115ed3">Dynamic Variables</a></li>
<li><a href="#orge49b9d3">Visualization</a>
<ul>
<li><a href="#org69c4c13">Using Tangle to Generate dot</a></li>
<li><a href="#org2c80d2d">Turning Stax Node Data into dot and SVG</a></li>
<li><a href="#orge055040">Visualition using <code>kdh.stax.svg</code></a>
<ul>
<li><a href="#orgae5e7e8">Visualizing the RPL Example</a>
<ul>
<li><a href="#org2d31705">Visualizing the RPL Example as a Parse Tree</a></li>
<li><a href="#orga8bed54">Visualizing the RPL Example as Paths</a></li>
<li><a href="#org6c5b158">RPL Example: Runtime</a></li>
</ul>
</li>
<li><a href="#orgf8c5357">FLAGS: A Good Example of Bad Nodes</a>
<ul>
<li><a href="#org7616426">FLAGS: Parse Errors</a></li>
<li><a href="#org9bc113c">FLAGS: Run #1 &#x2013; Happy Path</a></li>
<li><a href="#org93f3c3a">FLAGS: Run #2 &#x2013; Failed Invoke &#x2013; Runtime Error</a></li>
<li><a href="#orga649874">FLAGS: Run #3 &#x2013; Insufficient Stack &#x2013; Runtime Error vs Path Error</a></li>
<li><a href="#orgf899750">FLAGS: Run #4 &#x2013; Undefined !Var &#x2013; Runtime Error vs Path Error</a></li>
<li><a href="#org7eeee45">FLAGS: Run #5 &#x2013; Malformed Invoke &#x2013; Runtime Error vs Parse Error</a></li>
<li><a href="#org878f091">FLAGS: Run #6 &#x2013; Illegal Operation &#x2013; Runtime Error vs Parse Error</a></li>
</ul>
</li>
<li><a href="#orgf963eaa">A Complete Visualization of Parse, Path, and Runtime Errors</a></li>
</ul>
</li>
<li><a href="#orgd7d4761">Is assigning errors colors wise?</a></li>
<li><a href="#org45134de">Debugging Stax Execution in SVG</a>
<ul>
<li><a href="#org0c88f15">A Walkthrough of Good Data Visualization</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge6cb14b">Optimization Case Studies</a>
<ul>
<li><a href="#orgcb66691">Sorting Paths</a></li>
<li><a href="#org5ccd0e3">VOVOSON vs VOVON</a></li>
<li><a href="#orge32e10c"><code>nodify-ops</code> vs <code>nodify-ops*</code></a></li>
<li><a href="#org8656248">KeyFnMap for Decorating SVG Nodes with Op Node Errors</a>
<ul>
<li><a href="#orgd36fe42">First Version</a></li>
<li><a href="#org33db237">Second Version</a></li>
<li><a href="#org3f52c8d">Third and Final Version</a></li>
<li><a href="#org27df47a">Comparison</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgc5518f6">Project Structure ¿TODO?</a>
<ul>
<li><a href="#org835fc33">Files</a></li>
<li><a href="#orgb3033f2">Project kdh.stax "0.1.0"</a>
<ul>
<li><a href="#org3b59ff1">(nodify-ops operations) =&gt; node-tree</a></li>
<li><a href="#org00fe3f4">(flatten-node-tree node-tree) =&gt; nodes</a></li>
<li><a href="#org5142bb1">(node-tree-to-node-paths declarations node-tree) =&gt; paths a vovon where each path is a von</a>
<ul>
<li><a href="#org1e7057b">(check-refs-path path)</a></li>
<li><a href="#org1cb2cba">(count-card-path path)</a></li>
</ul>
</li>
<li><a href="#orgc5950d3"><span class="todo TODO">TODO</span> Notes to Self (fix for 0.1.0 release)</a>
<ul>
<li><a href="#orge243874"><span class="todo TODO">TODO</span> print runtime errors</a></li>
<li><a href="#org2f81482"><span class="todo TODO">TODO</span> Maybe rename and/or split <b>throw-on-error</b></a></li>
<li><a href="#orgdb118b8"><span class="todo DOING">DOING</span> enforce sef args to &lt;stackfn&gt;</a></li>
<li><a href="#orgcf69ba8"><span class="todo TODO">TODO</span> handle &lt;stackfn&gt;-debug case with 0 args and 0 dcls (i.e. exec once for results of one)</a></li>
<li><a href="#org228c077"><span class="done DONE">DONE</span> test if&gt; in first position for cardi fail</a></li>
<li><a href="#org7ac0784"><span class="done DONE">DONE</span> Fix "Cannot throw exception" - throw of nil</a></li>
<li><a href="#orgd136d76"><span class="done DONE">DONE</span> enforce sef on result of invoke</a></li>
<li><a href="#orgeabbb14"><span class="done CANCELED">CANCELED</span> handle graph vs digraph ("&#x2013;" vs "-&gt;")</a></li>
<li><a href="#org630ee3a"><span class="todo TODO">TODO</span> discuss constant as</a></li>
<li><a href="#org91d2d75"><span class="todo TODO">TODO</span> note that invoke cannot take a literal or anonymous function</a></li>
</ul>
</li>
<li><a href="#orgfa08f9c">Notes to Future Self (fix for future releases)</a>
<ul>
<li><a href="#orgdc481ab"><span class="todo TODO">TODO</span> add tests</a></li>
<li><a href="#org089df0c"><span class="todo TODO">TODO</span> defrecord OpNode and one or more defprotocol</a></li>
<li><a href="#org1a36240"><span class="todo TODO">TODO</span> defrecord OpError and one or more defprotocol</a></li>
<li><a href="#orga7a0c6f"><span class="todo TODO">TODO</span> client-side stack op builder</a></li>
<li><a href="#orgefe3c18"><span class="todo TODO">TODO</span> harmonize :results :trace to :path</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#org044cc26">Appendix</a>
<ul>
<li><a href="#org89bf203">Workflow</a>
<ul>
<li>
<ul>
<li><a href="#org804ffcd">Starting an nrepl</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6ca03f4">Environment</a>
<ul>
<li><a href="#org47f2738">Java Properties</a></li>
<li><a href="#org8804d02">Java Class Path</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org6c515db" class="outline-2">
<h2 id="org6c515db">Introduction</h2>
<div class="outline-text-2" id="text-org6c515db">
</div>
<div id="outline-container-orgd276806" class="outline-3">
<h3 id="orgd276806">About This Document</h3>
<div class="outline-text-3" id="text-orgd276806">
<p>
This document covers <code>kdh/stax</code> version "0.1.0", which is an implementation of the requirements in
</p>
<p target="_blank">
<a href="doc/rpl-take-home-project1-clj.pdf" target="_blank">rpl-take-home-project1-clj.pdf</a>
</p>

<p>
I wrote this as an org-mode document in emacs and exported it to HTML using <a href="https://github.com/fniessen/org-html-themes">org-html-themes</a> (theme ReadTheOrg).  If you use org-mode, I highly recommend ReadTheOrg and another package <a href="https://github.com/fniessen/emacs-leuven-theme">emacs-leuven-theme</a> by the same author.
</p>



<p>
org-mode allows in-document evaluation using source blocks like
</p>

<pre class="example" id="orgacaf0ca">
#+begin_src clojure :ns user :results value pp :exports both
(clojure-version)
#+end_src
</pre>
<p>
which, when executed and exported, look like this:
</p>
<div class="org-src-container">
<pre class="src src-clojure">(clojure-version)
</pre>
</div>

<pre class="example">
"1.11.1"
</pre>


<p>
For brevity, especially when a progression of steps is to be conveyed, I show clojure source like so:
</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f</span>
  [!a !b !c] <span style="color: #767283; font-style: italic;">; example uses input: 1 2 4. Stack starts empty.</span>
  !a !b (invoke&gt; + 2)!v1+ !c !c &lt;pop&gt; 2 (invoke&gt; * 2)!v2+ (invoke&gt; = 2)
  (if&gt;
      !v1 !v2 (invoke&gt; - 2)
      else&gt; <span style="color: #ff7fff;">"false!!"</span> (invoke&gt; println 1)&lt;pop&gt; !v1 !v2 (invoke&gt; * 2)))

(=&gt; <span style="color: #9fcb66;">#'user</span>/f )

(f 1 2 4) <span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; false!!</span>
(=&gt; [24] )
</pre>
</div>

<p>
Here, the output is shown as comments following <code>;;+&gt;</code> and return values are within <code>(=&gt; )</code> forms (<code>=&gt;</code> is an alias of the <code>comment</code> macro I use to contain and highlight the structured values returned by an evaluation).  You can see more of this in my dev tree which is where I play with code as I develop. But you will not find the <code>=&gt;</code> in my src tree (more on my src / dev separation in the following section).  If an Error occurs, or an Exception is thrown, I indicate that in code as a <code>;;!&gt;</code> comment - though you won't see that often &#x2013; I usually prefer to catch exceptions and return their message and data.
</p>

<p>
Often, when I use the abbreviated format I do so within a <code>clj</code> source block that is not meant to be evaluated within org-mode. I have configured <code>clj</code> for org-mode just enough to display clojure code formatting, show docstrings in the minibuffer, and give me access to cider and clj-kondo, etc).  If you are an emacs org-mode user and want to use the org source of this doc, M-x replace-regexp <code>^#\+begin​_src \&lt;\(clj\|edn\)\&gt;</code> with <code>#\+begin​_src clojure</code>.
</p>
</div>
</div>

<div id="outline-container-org2b53460" class="outline-3">
<h3 id="org2b53460">About <code>[kdh/stax "0.1.0"]</code></h3>
<div class="outline-text-3" id="text-org2b53460">
</div>
<div id="outline-container-orge63cd96" class="outline-4">
<h4 id="orge63cd96">Src File Tree</h4>
<div class="outline-text-4" id="text-orge63cd96">
<pre class="example" id="org77763c7">
src
└── clj
    └── kdh
	└── stax
	    ├── core.clj
	    ├── errs.clj
	    ├── exam.clj
	    ├── node.clj
	    ├── nodify.clj
	    ├── svg.clj
	    └── util.clj
</pre>
</div>
</div>

<div id="outline-container-org72e27fc" class="outline-4">
<h4 id="org72e27fc">Dev File Tree</h4>
<div class="outline-text-4" id="text-org72e27fc">
<pre class="example" id="orge9e7d68">
dev
├── clj
│   ├── bubba.clj
│   ├── dev-old.clj
│   ├── dev.clj
│   ├── kdh
│   │   ├── dev_utils.clj
│   │   └── stax
│   │       ├── core-dev.clj
│   │       ├── errs-dev.clj
│   │       ├── exam-dev.clj
│   │       ├── examples-20220629112159Z.clj
│   │       ├── node-dev.clj
│   │       ├── nodify-dev.clj
│   │       ├── svg-dev.clj
│   │       └── util-dev.clj
│   ├── nodes.clj
│   ├── resources
│   ├── user.clj
│   └── vizit.clj
└── resources
</pre>

<p>
  Every stax specific <code>file.clj</code> is in <code>src/clj/kdh/stax/file.clj</code> and has a dev cousin in <code>dev/clj/kdh/stax/file-dev.clj</code>
(not file​​_​dev.clj, so I can catch accidental requires of dev files through name mangling failure &#x2013; Could not locate kdh/stax/file​_​dev_​_​init.class,clj)
</p>

<p>
All <code>-dev.clj</code> files are in ns dev, so they benefit from the standard requires in <code>dev.clj</code>. <code>-dev.clj</code> files mostly require src tree files (i.e. inside the project).
</p>

<p>
Any dev file can require any src tree file, but src tree files never require dev tree files!  When I develop something good in the dev files, I copy it over into a src tree file and require it back into the -dev.clj file cousin (ns-unmap'ing it if needed).
</p>

<p>
<a id="org3e7671a"></a>
Any <code>dev*.clj</code> is a graveyard for old/alternate versions of functions in the <code>src</code> tree at the same level.  It's name has a <code>*</code> to indicate its where to find <code>*</code> functions (and any functions only they use), and to prevent accidental inclusion in build (require won't work on it due to name mangling, instead you must use <code>load-file</code>).
</p>
</div>
</div>

<div id="outline-container-orgfcd4c8a" class="outline-4">
<h4 id="orgfcd4c8a">Doc File Tree</h4>
<div class="outline-text-4" id="text-orgfcd4c8a">
<pre class="example" id="org1cb600d">
doc
├── #stax.org#
├── intro.md
├── rpl-take-home-project1-clj.pdf
├── simple-tree.svg
├── stax.html
├── stax.org
├── svg
│   ├── kdh-bad-example-dbg.html
│   ├── kdh-bad-example-runtime-dbg.html
│   ├── kdh-better-example-dbg.html
│   ├── kdh-half-bad-example-dbg.html
│   ├── kdh-runtime-error-example-dbg.html
│   ├── kdh-some-bad-paths-example-fix1st-no-static.html
│   ├── kdh-some-bad-paths-example-no-static.html
│   ├── kdh-some-bad-paths-example.html
│   ├── kdh-worse-example-dbg.html
│   ├── mystyle.css
│   └── rpl-example-dbg.html
├── tangle1.svg
├── tangle2.svg
├── tangle3.svg
└── unbalanced-tree.svg
</pre>
</div>
</div>

<div id="outline-container-org0a44f7c" class="outline-4">
<h4 id="org0a44f7c">Test File Tree</h4>
<div class="outline-text-4" id="text-org0a44f7c">
<pre class="example" id="org0c5d40a">
test
└── stack
    └── core_test.clj
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org7195982" class="outline-2">
<h2 id="org7195982">Assignment</h2>
<div class="outline-text-2" id="text-org7195982">
<p target="_blank">
(original: <a href="rpl-take-home-project1-clj.pdf" target="_blank">rpl-take-home-project1-clj.pdf</a>)
</p>
</div>
<div id="outline-container-org95c476d" class="outline-3">
<h3 id="org95c476d">Reformatted Assignment</h3>
<div class="outline-text-3" id="text-org95c476d">
<p>
The goal of this project is to implement a Clojure interpreter for a stack-based DSL. An example of the API is on the next page. We are looking for an example of the quality of work you would do at RPL.
</p>
</div>
<div id="outline-container-org63d0f84" class="outline-4">
<h4 id="org63d0f84">Page 1</h4>
<div class="outline-text-4" id="text-org63d0f84">
</div>
<div id="outline-container-org4268a0c" class="outline-5">
<h5 id="org4268a0c">Explanation of functionality:</h5>
<div class="outline-text-5" id="text-org4268a0c">
<ul class="org-ul">
<li>Variables are symbols prefixed with "!", e.g. !v</li>
<li>A stack function is defined with "defstackfn".
<ul class="org-ul">
<li>The first argument is the input declaration which also provides variable names to the arguments.</li>
<li>The stack always starts empty</li>
<li>The implementation of a stackfn is a sequence of stack operations.
<ul class="org-ul">
<li>Using a constant as a stack operation pushes that value onto the stack</li>
<li>Using a variable as a stack operation pushes the value for that variable onto the stack</li>
<li>A variable is assigned the top value of the stack by appending "​+" to the variable name,  e.g. !v​+</li>
<li>A function is invoked with "invoke&gt;". "invoke&gt;" takes as input the operation and the arity to use.</li>
<li>&lt;pop&gt; is a special operation which removes the top value of the stack</li>
<li>if&gt; tests if the top value of the stack is truthy to determine which branch to follow. The branches are separated with "else&gt;"</li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgea48c81" class="outline-5">
<h5 id="orgea48c81">Notes about your implementation:</h5>
<div class="outline-text-5" id="text-orgea48c81">
<ul class="org-ul">
<li>defstackfn should be a macro that produces a function invokable like any other  function.</li>
<li>Should provide an informative error if there's an invalid stack operation or a variable is referenced that doesn't exist.</li>
<li>The example below contains all functionality you need to implement.</li>
<li>It should be possible to shadow vars (naming a new local the name of an existing  variable).</li>
<li>Code example with stack values in comments:</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4f7f00e" class="outline-4">
<h4 id="org4f7f00e">Page 2</h4>
<div class="outline-text-4" id="text-org4f7f00e">
</div>
<div id="outline-container-org16b826b" class="outline-5">
<h5 id="org16b826b">Code Example</h5>
<div class="outline-text-5" id="text-org16b826b">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Code example with stack values in comments:</label><pre class="src src-clojure">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f</span>
  [!a !b !c] <span style="color: #767283; font-style: italic;">; example uses input: 1 2 4. Stack starts empty.</span>
  !a <span style="color: #767283; font-style: italic;">; 1</span>
  !b <span style="color: #767283; font-style: italic;">; 1 2</span>
  (invoke&gt; + 2) <span style="color: #767283; font-style: italic;">; 3</span>
  !v1+ <span style="color: #767283; font-style: italic;">; 3</span>
  !c <span style="color: #767283; font-style: italic;">; 3 4</span>
  !c <span style="color: #767283; font-style: italic;">; 3 4 4</span>
  &lt;pop&gt; <span style="color: #767283; font-style: italic;">; 3 4</span>
  2 <span style="color: #767283; font-style: italic;">; 3 4 2</span>
  (invoke&gt; * 2) <span style="color: #767283; font-style: italic;">; 3 8</span>
  !v2+ <span style="color: #767283; font-style: italic;">; 3 8</span>
  (invoke&gt; = 2) <span style="color: #767283; font-style: italic;">; false</span>
  (if&gt; <span style="color: #767283; font-style: italic;">; stack empty</span>
    !v1
    !v2
    (invoke&gt; - 2)
   else&gt;
    <span style="color: #ff7fff;">"false!!"</span> <span style="color: #767283; font-style: italic;">; "false!!"</span>
    (invoke&gt; println 1) <span style="color: #767283; font-style: italic;">; nil</span>
    &lt;pop&gt; <span style="color: #767283; font-style: italic;">; stack empty</span>
    !v1 <span style="color: #767283; font-style: italic;">; 3</span>
    !v2 <span style="color: #767283; font-style: italic;">; 3 8</span>
    (invoke&gt; * 2) <span style="color: #767283; font-style: italic;">; 24</span>
    )
  )

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(f 1 2 4) prints "false!!" and returns 24</span>
</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orga2cc5cb" class="outline-2">
<h2 id="orga2cc5cb">Requirements</h2>
<div class="outline-text-2" id="text-orga2cc5cb">
</div>
<div id="outline-container-org45b6c41" class="outline-3">
<h3 id="org45b6c41">Explicit Requirements</h3>
<div class="outline-text-3" id="text-org45b6c41">
<p>
Explicit requirements are taken directly from the assignment. They are split into individual testable requirements, and designated <b>req-e-#:</b> where <b>e</b> means explicit, and <b>#</b> is a number.
</p>
</div>

<div id="outline-container-org3f29666" class="outline-4">
<h4 id="org3f29666"><span class="done DONE">DONE</span> <a id="org6539e51"></a> <b>req-e-01</b>: Variables are symbols prefixed with "!", e.g. !v</h4>
<div class="outline-text-4" id="text-org3f29666">
<p>
<code>kdh.stax.nodify/nodify-op</code> will create a node of type <code>:kdh.stax.node/push-var</code> iff the op passes the predicate <code>kdh.stax.node/!symbol?</code>
</p>
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">!symbol?</span>
  <span style="color: #fd95fa; font-style: italic;">"True if op matches symbol of the form !v where v is anything but ! or +"</span>
  [op]
  (<span style="color: #ffff0b;">and</span> (symbol? op)
       (boolean (re-find #<span style="color: #ff7fff;">"^![^!</span><span style="color: #ffffff; font-weight: bold;">\+</span><span style="color: #ff7fff;">]+$"</span> (name op)))))
</pre>
</div>

<p>
declarations argument to defstackfn is also checked to pass <code>kdh.stax.node/!symbol?</code> in its :pre condition.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-01</span> [a b c] a b c)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">!&gt;  Assert failed: (test/is (every? !symbol? declarations))</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d9dbcf" class="outline-4">
<h4 id="org2d9dbcf"><span class="done DONE">DONE</span> <a id="orgfc338c4"></a> <b>req-e-02</b>: A stack function is defined with "defstackfn"</h4>
<div class="outline-text-4" id="text-org2d9dbcf">
<p>
Define a trivial stack function (with no declarations and only push numbers).
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-02</span> [] 1 2 3)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-02 )
</pre>
</div>

<p>
Yields a function, which when called returns the stack.
</p>

<div class="org-src-container">
<pre class="src src-clj">(f-req-e-02)
(=&gt; [1 2 3] )
</pre>
</div>
</div>
</div>

<div id="outline-container-org2303642" class="outline-4">
<h4 id="org2303642"><span class="done DONE">DONE</span> <a id="org9522499"></a> <b>req-e-03</b>: The first argument is the input declaration which also provides variable names to the arguments</h4>
<div class="outline-text-4" id="text-org2303642">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-03</span> [!a !b !c] !b !a !c)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-03 )

(f-req-e-03 <span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:c</span>)
(=&gt; [<span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:c</span>] )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgdae380a" class="outline-4">
<h4 id="orgdae380a"><span class="done DONE">DONE</span> <a id="org7d20520"></a> <b>req-e-04</b>: The stack always starts empty</h4>
<div class="outline-text-4" id="text-orgdae380a">
<p>
Let's pop an empty stack to see what happens&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-04</span> [] &lt;pop&gt;)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">1st Path Errors [&gt;-start-term-&gt;]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `&lt;pop&gt;' at op[0] node[0]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              stack size=0, operation &lt;pop&gt; needs &gt;=1</span>
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">defstackfn-produced-errors</span> )
</pre>
</div>

<p>
I don't like to throw errors during dev, it's disruptive.  Instead, I return meaningful keys (here <code>:kdh.stax.errs/defstackfn-produced-errors</code>).
</p>

<p>
However, I recognize that others like Exceptions, so I allow them with a dynamic binding&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-04</span> [] &lt;pop&gt;)
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))
(=&gt;
 [<span style="color: #ff7fff;">"defstackfn produced errors"</span>
  {<span style="color: #34c8d8; font-weight: bold;">:error-data</span> [[<span style="color: #ff7fff;">"1st Path Errors [&gt;-start-term-&gt;]: "</span>

                 [{<span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=pop</span>,
                   <span style="color: #34c8d8; font-weight: bold;">:needs</span> 1,
                   <span style="color: #34c8d8; font-weight: bold;">:delta</span> -1,
                   <span style="color: #34c8d8; font-weight: bold;">:op</span> &lt;pop&gt;,
                   <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [0],
                   <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [0],
                   <span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=path</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=static-insufficient-stack</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"stack size=0, operation &lt;pop&gt; needs &gt;=1"</span>}]}]]],
   <span style="color: #34c8d8; font-weight: bold;">:error-text</span> <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">1st Path Errors [&gt;-start-term-&gt;]: </span><span style="color: #ffffff; font-weight: bold;">\n\t</span><span style="color: #ff7fff;">`&lt;pop&gt;' at op[0] node[0]:</span><span style="color: #ffffff; font-weight: bold;">\n\t\t</span><span style="color: #ff7fff;"> stack size=0, operation &lt;pop&gt; needs &gt;=1</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>}]
 )
</pre>
</div>

<p>
Exceptions or not, I've proved the stack is initially empty!
</p>
</div>
</div>

<div id="outline-container-org20da157" class="outline-4">
<h4 id="org20da157"><span class="done DONE">DONE</span> <a id="org134e6b4"></a> <b>req-e-05</b>: The implementation of a stackfn is a sequence of stack operations</h4>
<div class="outline-text-4" id="text-org20da157">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-05</span> [!a] !a 2 &lt;pop&gt; 3 (invoke&gt; = 2) (if&gt; <span style="color: #ff7fff;">"!a == 3&gt;"</span> else&gt; <span style="color: #ff7fff;">"!a &lt;&gt; 3"</span>) (invoke&gt; println 1))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-05 )

(f-req-e-05 1)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+ !a &lt;&gt; 3</span>
(=&gt; [<span style="color: #34c8d8; font-weight: bold;">nil</span>] )

(f-req-e-05 3)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+ !a == 3</span>
(=&gt; [<span style="color: #34c8d8; font-weight: bold;">nil</span>] )
</pre>
</div>
</div>
</div>
<div id="outline-container-orga416330" class="outline-4">
<h4 id="orga416330"><span class="done DONE">DONE</span> <a id="orgde684d7"></a> <b>req-e-06</b>: Using a constant as a stack operation pushes that value onto the stack</h4>
<div class="outline-text-4" id="text-orga416330">
<p>
In my implementation, I interpret <i>constant</i> as a form that evaluates to itself.
</p>

<p>
<a href="https://clojure.org/reference/evaluation">The Clojure reference page on evaluation</a> says:
</p>

<blockquote>
<p>
Strings, numbers, characters, true, false, nil and keywords evaluate to themselves.
</p>
</blockquote>

<p>
That quote is part of the documentation string for my function <code>ksh.stax.node/self-evaluating?</code>:
</p>

<div class="org-src-container">
<pre class="src src-clj">(doc self-evaluating?)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">-------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">kdh.stax.node/self-evaluating?</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">([op])</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">True if op is a self evaluating form.</span>
<span style="color: #767283;">;;   </span><span style="color: #767283; font-style: italic;">https://clojure.org/reference/evaluation says 'Strings, numbers, characters, true, false, nil and keywords evaluate to themselves.'</span>
</pre>
</div>

<p>
Let's push one of each onto the stack
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-06</span> [] <span style="color: #ff7fff;">"string"</span> 42 <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span>)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-06 )

(f-req-e-06)
(=&gt; [<span style="color: #ff7fff;">"string"</span> 42 <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span>] )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb7e30df" class="outline-4">
<h4 id="orgb7e30df"><span class="done DONE">DONE</span> <a id="orgc7514b7"></a> <b>req-e-07</b>: A variable is assigned the top value of the stack by appending "​+" to the variable name,  e.g. !v​+</h4>
<div class="outline-text-4" id="text-orgb7e30df">
<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-07</span> [] <span style="color: #ff7fff;">"string"</span> 42 !v1+ <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span> !v1)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-07 )

(f-req-e-07)
(=&gt; [<span style="color: #ff7fff;">"string"</span> 42 <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span> 42] )
</pre>
</div>

<p>
!v1+ assigned the top of the stack (42) to the variable !v1 as evidenced by the top of the returned stack after the final !v1 push.
</p>
</div>
</div>

<div id="outline-container-org262323d" class="outline-4">
<h4 id="org262323d"><span class="done DONE">DONE</span> <a id="orge54f658"></a> <b>req-e-08</b>: A function is invoked with "invoke&gt;".</h4>
<div class="outline-text-4" id="text-org262323d">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-08</span> [] <span style="color: #ff7fff;">"string"</span> 42 !v1+ <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span> !v1 (invoke&gt; println 1))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-08 )

(f-req-e-08)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; 42</span>
(=&gt; [<span style="color: #ff7fff;">"string"</span> 42 <span style="color: #ff7fff;">\z</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">false</span> <span style="color: #34c8d8; font-weight: bold;">nil</span> <span style="color: #34c8d8; font-weight: bold;">:bubba</span> <span style="color: #34c8d8; font-weight: bold;">nil</span>] )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgde0365f" class="outline-4">
<h4 id="orgde0365f"><span class="done DONE">DONE</span> <a id="org50612fa"></a> <b>req-e-09</b>: "invoke&gt;" takes as input the operation</h4>
<div class="outline-text-4" id="text-orgde0365f">
<p>
The first argument to <code>invoke&gt;</code> must be a function (in this example <code>+</code>)
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-09</span> [!a !b] !a !b (invoke&gt; + 2))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-09 )

(f-req-e-09 2 3)
(=&gt; [5] )

(f-req-e-09 <span style="color: #34c8d8; font-weight: bold;">:foo</span> <span style="color: #ff7fff;">"bar"</span>)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">RUNTIME ERRORS:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `(invoke&gt; + 2)' at op[2] node[2]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              `(apply #'clojure.core/+ ("bar" :foo))' failed during execution (class java.lang.String cannot be cast to class java.lang.Number (java.lang.String and java.lang.Number are in module java.base of loader 'bootstrap'))</span>
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">stackfn-produced-runtime-error</span> )
</pre>
</div>

<p>
The error is not on the function, but on its arguments. I include it to show that '+ became #'clojure.core/+
</p>
</div>
</div>

<div id="outline-container-orgd624641" class="outline-4">
<h4 id="orgd624641"><span class="done DONE">DONE</span> <a id="org5311846"></a> <b>req-e-10</b>: "invoke&gt;" takes as input the arity to use</h4>
<div class="outline-text-4" id="text-orgd624641">
<p>
My implementation only accepts pos-int arity, as I understand invoke&gt; to invoke a function on stack values.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-10</span> [!a !b] !a !b (invoke&gt; + 2))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-10 )

(f-req-e-10 2 3)
(=&gt; [5] )

(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-10*</span> [!a !b] !a !b (invoke&gt; + 0))
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Global Operation Tree Errors: </span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `(invoke&gt; + 0)' at op[2] node[2]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              0 is not a valid arity (must be pos-int)!</span>
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">defstackfn-produced-errors</span> )
</pre>
</div>

<p>
Or, if you prefer Exceptions&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-10*</span> [!a !b] !a !b (invoke&gt; + 0))
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))
(=&gt; [<span style="color: #ff7fff;">"defstackfn produced errors"</span>
     {<span style="color: #34c8d8; font-weight: bold;">:error-data</span> [[<span style="color: #ff7fff;">"Global Operation Tree Errors: "</span>
                    [{<span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=invoke</span>,
                      <span style="color: #34c8d8; font-weight: bold;">:op</span> (invoke&gt; + 0),
                      <span style="color: #34c8d8; font-weight: bold;">:fun</span> +,
                      <span style="color: #34c8d8; font-weight: bold;">:arity</span> 0,
                      <span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=tree</span>,
                                <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=parse-invoke-arity-not-pos-int</span>,
                                <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"0 is not a valid arity (must be pos-int)!"</span>}],
                      <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [2],
                      <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [2]}]]],
      <span style="color: #34c8d8; font-weight: bold;">:error-text</span> <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">Global Operation Tree Errors: </span><span style="color: #ffffff; font-weight: bold;">\n\t</span><span style="color: #ff7fff;">`(invoke&gt; + 0)' at op[2] node[2]:</span><span style="color: #ffffff; font-weight: bold;">\n\t\t</span><span style="color: #ff7fff;"> 0 is not a valid arity (must be pos-int)!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>}] )
</pre>
</div>
</div>
</div>

<div id="outline-container-orge6001ac" class="outline-4">
<h4 id="orge6001ac"><span class="done DONE">DONE</span> <a id="org6128127"></a> <b>req-e-11</b>: &lt;pop&gt; is a special operation which removes the top value of the stack</h4>
<div class="outline-text-4" id="text-orge6001ac">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-11</span> [] 1 2 &lt;pop&gt; 3 )
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-11 )

(f-req-e-11)
(=&gt; [1 3] )
</pre>
</div>

<p>
2 got &lt;pop&gt;'d
</p>
</div>
</div>

<div id="outline-container-orga12d444" class="outline-4">
<h4 id="orga12d444"><span class="done DONE">DONE</span> <a id="org0af2be4"></a> <b>req-e-12</b>: if&gt; tests if the top value of the stack is truthy to determine which branch to follow.</h4>
<div class="outline-text-4" id="text-orga12d444">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-12</span> [!a] !a (invoke&gt; even? 1) (if&gt; <span style="color: #ff7fff;">"even"</span> else&gt; <span style="color: #ff7fff;">"odd"</span>))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-12 )

(f-req-e-12 3)
(=&gt; [<span style="color: #ff7fff;">"odd"</span>] )

(f-req-e-12 4)
(=&gt; [<span style="color: #ff7fff;">"even"</span>] )
</pre>
</div>
</div>
</div>

<div id="outline-container-org0bad5c5" class="outline-4">
<h4 id="org0bad5c5"><span class="done DONE">DONE</span> <a id="org6399856"></a> <b>req-e-13</b>: The branches of if are separated with "else&gt;"</h4>
<div class="outline-text-4" id="text-org0bad5c5">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-13</span> [!a] !a (invoke&gt; even? 1) (if&gt; <span style="color: #ff7fff;">"even"</span> else&gt; <span style="color: #ff7fff;">"odd"</span>))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-13 )

(f-req-e-13 3)
(=&gt; [<span style="color: #ff7fff;">"odd"</span>] )

(f-req-e-13 4)
(=&gt; [<span style="color: #ff7fff;">"even"</span>] )
</pre>
</div>

<p>
Note, my implementation works with a missing <code>else&gt;</code>.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-13*</span> [!a] !a (invoke&gt; even? 1) (if&gt; <span style="color: #ff7fff;">"even"</span>))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-13* )

(f-req-e-13* 3)
(=&gt; [] )

(f-req-e-13* 4)
(=&gt; [<span style="color: #ff7fff;">"even"</span>] )
</pre>
</div>

<p>
It works with an empty else&gt;.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-13**</span> [!a] !a (invoke&gt; even? 1) (if&gt; <span style="color: #ff7fff;">"even"</span> else&gt;))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-13** )

(f-req-e-13** 3)
(=&gt; [] )

(f-req-e-13** 4)
(=&gt; [<span style="color: #ff7fff;">"even"</span>] )
</pre>
</div>

<p>
It works with an empty then (the ops between the <code>if&gt;</code> and <code>else&gt;</code>).
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-13***</span> [!a] !a (invoke&gt; even? 1) (if&gt; else&gt; <span style="color: #ff7fff;">"odd"</span>))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-13*** )

(f-req-e-13*** 3)
(=&gt; [<span style="color: #ff7fff;">"odd"</span>] )

(f-req-e-13*** 4)
(=&gt; [] )
</pre>
</div>

<p>
It even works with an empty then and missing else&gt;.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-13****</span> [!a] !a (invoke&gt; even? 1) (if&gt;))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-13**** )

(f-req-e-13**** 3)
(=&gt; [] )

(f-req-e-13**** 4)
(=&gt; [] )
</pre>
</div>
</div>
</div>
<div id="outline-container-org490eb85" class="outline-4">
<h4 id="org490eb85"><span class="done DONE">DONE</span> <a id="orgf500fe8"></a> <b>req-e-14</b>: defstackfn should be a macro&#x2026;.</h4>
<div class="outline-text-4" id="text-org490eb85">
<div class="org-src-container">
<pre class="src src-clj">(meta #'defstackfn)
(=&gt;
 {<span style="color: #34c8d8; font-weight: bold;">:arglists</span> ([stackfn-sym declarations &amp; operations]),
  <span style="color: #34c8d8; font-weight: bold;">:doc</span> <span style="color: #ff7fff;">"Defines a stack function that takes declaration as its args,</span>
<span style="color: #ff7fff;">and performs to operations given"</span>,
  <span style="color: #34c8d8; font-weight: bold;">:line</span> 81,
  <span style="color: #34c8d8; font-weight: bold;">:column</span> 1,
  <span style="color: #34c8d8; font-weight: bold;">:file</span> <span style="color: #ff7fff;">"/home/keith/clj/rpl/stax/src/clj/kdh/stax/core.clj"</span>,
  <span style="color: #34c8d8; font-weight: bold;">:name</span> defstackfn,
  <span style="color: #34c8d8; font-weight: bold;">:ns</span> #namespace[kdh.stax.core],
  <span style="color: #34c8d8; font-weight: bold;">:macro</span> <span style="color: #34c8d8; font-weight: bold;">true</span>}
)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc9800b9" class="outline-4">
<h4 id="orgc9800b9"><span class="done DONE">DONE</span> <a id="org605b922"></a> <b>req-e-15</b>: defstackfn should produce a function invokable like any other function.</h4>
<div class="outline-text-4" id="text-orgc9800b9">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-15</span> [!a !b !c] !c !b !a)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-15 )

(f-req-e-15 1 2 3)

(=&gt; [3 2 1] )

(<span style="color: #ffff0b;">-&gt;&gt;</span> [1 2 3 <span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:c</span>]
     (partition 3)
     (map (partial apply f-req-e-15)))

(=&gt; ([3 2 1] [<span style="color: #34c8d8; font-weight: bold;">:c</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:a</span>]) )
</pre>
</div>
</div>
</div>

<div id="outline-container-org0ccf1c7" class="outline-4">
<h4 id="org0ccf1c7"><span class="done DONE">DONE</span> <a id="org245fe83"></a> <b>req-e-16</b>: defstackfn should provide an informative error if there's an invalid stack operation</h4>
<div class="outline-text-4" id="text-org0ccf1c7">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-16</span> [] <span style="color: #34c8d8; font-weight: bold;">true</span> (if&gt; <span style="color: #ff7fff;">"even"</span> else&gt; else&gt; <span style="color: #ff7fff;">"odd"</span>))
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">defstackfn-produced-errors</span> )
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Global Operation Tree Errors:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `else&gt;' at op[1 3] node[1 :else 0]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              else&gt; is not an allowed op</span>
</pre>
</div>

<p>
Or, if you prefer Exceptions&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-16</span> [] <span style="color: #34c8d8; font-weight: bold;">true</span> (if&gt; <span style="color: #ff7fff;">"even"</span> else&gt; else&gt; <span style="color: #ff7fff;">"odd"</span>))
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))
(=&gt;
 [<span style="color: #ff7fff;">"defstackfn produced errors"</span>
  {<span style="color: #34c8d8; font-weight: bold;">:error-data</span> [[<span style="color: #ff7fff;">"Global Operation Tree Errors: "</span>
                 [{<span style="color: #34c8d8; font-weight: bold;">:op</span> else&gt;,
                   <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.nodify</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=illegal</span>,
                   <span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=tree</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=parse-illegal-operation</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"else&gt; is not an allowed op"</span>}],
                   <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [1 <span style="color: #34c8d8; font-weight: bold;">:else</span> 0],
                   <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [1 3]}]]],
   <span style="color: #34c8d8; font-weight: bold;">:error-text</span> <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">Global Operation Tree Errors: </span><span style="color: #ffffff; font-weight: bold;">\n\t</span><span style="color: #ff7fff;">`else&gt;' at op[1 3] node[1 :else 0]:</span><span style="color: #ffffff; font-weight: bold;">\n\t\t</span><span style="color: #ff7fff;"> else&gt; is not an allowed op</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>}]
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-org3ab91cf" class="outline-4">
<h4 id="org3ab91cf"><span class="done DONE">DONE</span> <a id="orgfe652b9"></a> <b>req-e-17</b>: defstackfn should provide an informative error if there's a variable is referenced that doesn't exist.</h4>
<div class="outline-text-4" id="text-org3ab91cf">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-17</span> [] <span style="color: #34c8d8; font-weight: bold;">true</span> !a)
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">defstackfn-produced-errors</span> )
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">1st Path Errors [&gt;-start-term-&gt;]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `!a' at op[1] node[1]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              !a is a reference before definition</span>
</pre>
</div>

<p>
Or, if you prefer Exceptions&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-17</span> [] <span style="color: #34c8d8; font-weight: bold;">true</span> !a)
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))
(=&gt;
 [<span style="color: #ff7fff;">"defstackfn produced errors"</span>
  {<span style="color: #34c8d8; font-weight: bold;">:error-data</span> [[<span style="color: #ff7fff;">"1st Path Errors [&gt;-start-term-&gt;]: "</span>
                 [{<span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=path</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=static-var-not-defined</span>,
                             <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"!a is a reference before definition"</span>}],
                   <span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
                   <span style="color: #34c8d8; font-weight: bold;">:op</span> !a,
                   <span style="color: #34c8d8; font-weight: bold;">:cardi</span> 2,
                   <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [1],
                   <span style="color: #34c8d8; font-weight: bold;">:delta</span> 1,
                   <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [1],
                   <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=push-var</span>,
                   <span style="color: #34c8d8; font-weight: bold;">:var-ref</span> !a}]]],
   <span style="color: #34c8d8; font-weight: bold;">:error-text</span> <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">1st Path Errors [&gt;-start-term-&gt;]: </span><span style="color: #ffffff; font-weight: bold;">\n\t</span><span style="color: #ff7fff;">`!a' at op[1] node[1]:</span><span style="color: #ffffff; font-weight: bold;">\n\t\t</span><span style="color: #ff7fff;"> !a is a reference before definition</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>}]
 )
</pre>
</div>
</div>
</div>
<div id="outline-container-org28469bb" class="outline-4">
<h4 id="org28469bb"><span class="done DONE">DONE</span> <a id="org4391805"></a> <b>req-e-18</b>: It should be possible to shadow vars (naming a new local the name of an existing variable).</h4>
<div class="outline-text-4" id="text-org28469bb">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-e-18</span> [!a !b] !a <span style="color: #34c8d8; font-weight: bold;">true</span> !b !a+ 3 !b+ <span style="color: #ff7fff;">"help"</span> !a !b)
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-e-18 )

(f-req-e-18 <span style="color: #34c8d8; font-weight: bold;">:red</span> <span style="color: #34c8d8; font-weight: bold;">:blue</span>)
(=&gt; [<span style="color: #34c8d8; font-weight: bold;">:red</span> <span style="color: #34c8d8; font-weight: bold;">true</span> <span style="color: #34c8d8; font-weight: bold;">:blue</span> 3 <span style="color: #ff7fff;">"help"</span> <span style="color: #34c8d8; font-weight: bold;">:blue</span> 3] )
</pre>
</div>
</div>
</div>

<div id="outline-container-org94ebff8" class="outline-4">
<h4 id="org94ebff8"><span class="done DONE">DONE</span> <a id="org3eaf069"></a> <b>req-e-19</b>: The example below contains all functionality you need to implement.</h4>
<div class="outline-text-4" id="text-org94ebff8">
<p>
This is not a testable requirement, but I will rely on it for justification of implicit requirements
</p>
</div>
</div>
</div>
<div id="outline-container-org7a47523" class="outline-3">
<h3 id="org7a47523">Implicit requirements (<b>req-i-#</b>)</h3>
<div class="outline-text-3" id="text-org7a47523">
<p>
Implicit requirements are those not expressed in the explicit requirements, but implied by them or by simple logical extension.
</p>
</div>
<div id="outline-container-org366b327" class="outline-4">
<h4 id="org366b327"><span class="done DONE">DONE</span> <a id="orgc3c6892"></a> <b>req-i-01</b>: <code>defstackfn</code> can take an empty declarations argument</h4>
<div class="outline-text-4" id="text-org366b327">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-i-01</span> [] 1 2 (invoke&gt; + 2))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-i-01 )

(f-req-i-01)
(=&gt; [3] )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb906598" class="outline-4">
<h4 id="orgb906598"><span class="done DONE">DONE</span> <a id="org9d9e15b"></a> <b>req-i-02</b>: <code>if&gt;</code> consumes the top of the stack</h4>
<div class="outline-text-4" id="text-orgb906598">
<ul class="org-ul">
<li><p>
According to the explicit requirements,
</p>
<blockquote>
<p>
if&gt; tests if the top value of the stack is truthy to determine which branch to follow. The branches are separated with "else&gt;"
</p>
</blockquote></li>
<li>However, the example shows the stack as empty on line 14:</li>
</ul>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">13: </span>(invoke&gt; = 2) <span style="color: #767283; font-style: italic;">; false</span>
<span class="linenr">14: </span>(if&gt; <span style="color: #767283; font-style: italic;">; stack empty</span>
</pre>
</div>

<p>
if <code>if&gt;</code> simply tested the top of the stack without popping, the push of the constant value <code>"false!!"</code> (line 19) would result in a stack of <code>[false "false!!"]</code> not <code>["false!!"]</code> as indicated:
</p>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">18: </span>else&gt;
<span class="linenr">19: </span> <span style="color: #ff7fff;">"false!!"</span> <span style="color: #767283; font-style: italic;">; "false!!"</span>
</pre>
</div>

<p>
Therefore, I deduce an implicit requirement that <code>if&gt;</code> first tests the top value and then pops it from the stack
</p>
</div>
</div>
<div id="outline-container-org88a08fb" class="outline-4">
<h4 id="org88a08fb"><span class="done DONE">DONE</span> <a id="orge853db5"></a> <b>req-i-03</b>: <code>!v​+</code> (define variable and assign it top of stack) does not consume the top of the stack</h4>
<div class="outline-text-4" id="text-org88a08fb">
<p>
Otherwise the following section of the example would not be correct
</p>
<ul class="org-ul">
<li>push of value in stack variable <code>!c</code> would result in a stack of <code>[4]</code> if <code>!v1+</code> consumed to top, but the example shows:</li>
</ul>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">5: </span>(invoke&gt; + 2) <span style="color: #767283; font-style: italic;">; 3</span>
<span class="linenr">6: </span>!v1+ <span style="color: #767283; font-style: italic;">; 3</span>
<span class="linenr">7: </span>!c <span style="color: #767283; font-style: italic;">; 3 4</span>
</pre>
</div>
<p>
<code>!v2+</code> would leave the stack at <code>[3]</code> if assignment consumed the top.  This would cause <code>(invoke&gt; = 2)</code> to fail, as the stack would have would  only one value, but the example shows:
</p>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">11: </span>(invoke&gt; * 2) <span style="color: #767283; font-style: italic;">; 3 8</span>
<span class="linenr">12: </span>!v2+ <span style="color: #767283; font-style: italic;">; 3 8</span>
<span class="linenr">13: </span>(invoke&gt; = 2) <span style="color: #767283; font-style: italic;">; false</span>
</pre>
</div>
<hr />
</div>
</div>
<div id="outline-container-org3a715c8" class="outline-4">
<h4 id="org3a715c8"><span class="done DONE">DONE</span> <a id="org64084f1"></a> <b>req-i-04</b>: <code>(invoke&gt; fun n)</code> applies n items off the top of the stack in stack order (i.e. reverse of underlying vector's order)</h4>
<div class="outline-text-4" id="text-org3a715c8">
<p>
This is not explicitly stated in the assignment.  And it is not evident in the example, where all invoked functions are either associative functions (<code>+</code>, <code>*</code>, and <code>=</code>) with arity=2, or are only given n=1 (e.g. <code>println</code>).  But I find this an implicit requirement of stack logic.  If an invoked function of one argument takes its argument from the top of the stack, then a function of two should take its first from the top, pop the stack, then take its next from the new top.  Internally, this is accomplished with the <code>apply</code> of the reverse (through <code>rseq</code>) of the <code>subvec</code> of the last <code>n</code> items in the stack.
</p>
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-i-04</span> [] 1 2 3 4 (invoke&gt; println 4))
(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-i-04 )

(f-req-i-04)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; 4 3 2 1</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc1fe83b" class="outline-4">
<h4 id="orgc1fe83b"><span class="done DONE">DONE</span> <a id="orgc34ff1f"></a> <b>req-i-05</b>: <code>(invoke&gt; fun n)</code> for the sake of consistency, the return value of invoke should be <i>constant</i> (i.e. self-evaluating)</h4>
<div class="outline-text-4" id="text-orgc1fe83b">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-i-05</span> [!a !b !c] !a !b !c (invoke&gt; vector 3))

(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-i-05 )


(f-req-i-05 1 2 3)
<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">RUNTIME ERRORS:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     `(invoke&gt; vector 3)' at op[3] node[3]:</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">              `(apply #'clojure.core/vector (3 2 1))' =&gt; `[3 2 1]' with *stax-require-simple-stack-values* = true</span>
(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">stackfn-produced-runtime-error</span> )

(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (f-req-i-05 1 2 3)
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))
(=&gt;
 [<span style="color: #ff7fff;">"Runtime Errors"</span>
  {<span style="color: #34c8d8; font-weight: bold;">:error-text</span> <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">RUNTIME ERRORS:</span><span style="color: #ffffff; font-weight: bold;">\n\t</span><span style="color: #ff7fff;">`(invoke&gt; vector 3)' at op[3] node[3]:</span><span style="color: #ffffff; font-weight: bold;">\n\t\t</span><span style="color: #ff7fff;"> `(apply #'clojure.core/vector (3 2 1))' =&gt; `[3 2 1]' with *stax-require-simple-stack-values* = true</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>,
   <span style="color: #34c8d8; font-weight: bold;">:error-data</span> [[<span style="color: #ff7fff;">"RUNTIME ERRORS:"</span> [{<span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=exec</span>,
                                               <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=runtime-invoke-returned-complex-val</span>,
                                               <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"`(apply #'clojure.core/vector (3 2 1))' =&gt; `[3 2 1]' with *stax-require-simple-stack-values* = true"</span>}],
                                     <span style="color: #34c8d8; font-weight: bold;">:invoke-val</span> [3 2 1],
                                     <span style="color: #34c8d8; font-weight: bold;">:needs</span> 3,
                                     <span style="color: #34c8d8; font-weight: bold;">:fun</span> vector,
                                     <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span>],
                                     <span style="color: #34c8d8; font-weight: bold;">:invoke-args</span> (3 2 1),
                                     <span style="color: #34c8d8; font-weight: bold;">:trace</span> [{<span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
                                              <span style="color: #34c8d8; font-weight: bold;">:dot-opts</span> {<span style="color: #34c8d8; font-weight: bold;">:shape</span> <span style="color: #34c8d8; font-weight: bold;">:point</span>},
                                              <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [],
                                              <span style="color: #34c8d8; font-weight: bold;">:delta</span> 0,
                                              <span style="color: #34c8d8; font-weight: bold;">:stack</span> [],
                                              <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [],
                                              <span style="color: #34c8d8; font-weight: bold;">:branch</span> <span style="color: #34c8d8; font-weight: bold;">:start</span>,
                                              <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1,
                                                        !b 2,
                                                        !c 3},
                                              <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=start</span>}
                                             {<span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
                                              <span style="color: #34c8d8; font-weight: bold;">:op</span> !a,
                                              <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [0],
                                              <span style="color: #34c8d8; font-weight: bold;">:delta</span> 1,
                                              <span style="color: #34c8d8; font-weight: bold;">:stack</span> [1],
                                              <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [0],
                                              <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1,
                                                        !b 2,
                                                        !c 3},
                                              <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=push-var</span>,
                                              <span style="color: #34c8d8; font-weight: bold;">:var-ref</span> !a}
                                             {<span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
                                              <span style="color: #34c8d8; font-weight: bold;">:op</span> !b,
                                              <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [1],
                                              <span style="color: #34c8d8; font-weight: bold;">:delta</span> 1,
                                              <span style="color: #34c8d8; font-weight: bold;">:stack</span> [1 2],
                                              <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [1],
                                              <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1,
                                                        !b 2,
                                                        !c 3},
                                              <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=push-var</span>,
                                              <span style="color: #34c8d8; font-weight: bold;">:var-ref</span> !b}
                                             {<span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
                                              <span style="color: #34c8d8; font-weight: bold;">:op</span> !c,
                                              <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [2],
                                              <span style="color: #34c8d8; font-weight: bold;">:delta</span> 1,
                                              <span style="color: #34c8d8; font-weight: bold;">:stack</span> [1 2 3],
                                              <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [2],
                                              <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1,
                                                        !b 2,
                                                        !c 3},
                                              <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=push-var</span>,
                                              <span style="color: #34c8d8; font-weight: bold;">:var-ref</span> !c}
                                             {<span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=exec</span>,
                                                        <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=runtime-invoke-returned-complex-val</span>,
                                                        <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"`(apply #'clojure.core/vector (3 2 1))' =&gt; `[3 2 1]' with *stax-require-simple-stack-values* = true"</span>}],
                                              <span style="color: #34c8d8; font-weight: bold;">:invoke-val</span> [3 2 1],
                                              <span style="color: #34c8d8; font-weight: bold;">:needs</span> 3,
                                              <span style="color: #34c8d8; font-weight: bold;">:fun</span> vector,
                                              <span style="color: #34c8d8; font-weight: bold;">:invoke-args</span> (3 2 1),
                                              <span style="color: #34c8d8; font-weight: bold;">:invoke-apply</span> (apply <span style="color: #9fcb66;">#'clojure.core</span>/vector (3 2 1)),
                                              <span style="color: #34c8d8; font-weight: bold;">:op</span> (invoke&gt; vector 3),
                                              <span style="color: #34c8d8; font-weight: bold;">:invoke-fn</span> <span style="color: #9fcb66;">#'clojure.core</span>/vector,
                                              <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [3],
                                              <span style="color: #34c8d8; font-weight: bold;">:delta</span> -2,
                                              <span style="color: #34c8d8; font-weight: bold;">:arity</span> 3,
                                              <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [3],
                                              <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=invoke</span>}],
                                     <span style="color: #34c8d8; font-weight: bold;">:invoke-apply</span> (apply <span style="color: #9fcb66;">#'clojure.core</span>/vector (3 2 1)),
                                     <span style="color: #34c8d8; font-weight: bold;">:op</span> (invoke&gt; vector 3),
                                     <span style="color: #34c8d8; font-weight: bold;">:invoke-fn</span> <span style="color: #9fcb66;">#'clojure.core</span>/vector,
                                     <span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 1,
                                                    !b 2,
                                                    !c 3},
                                     <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [3],
                                     <span style="color: #34c8d8; font-weight: bold;">:delta</span> -2,
                                     <span style="color: #34c8d8; font-weight: bold;">:arity</span> 3,
                                     <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [3],
                                     <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=invoke</span>}]]]}]
 )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc5eed18" class="outline-4">
<h4 id="orgc5eed18"><span class="done DONE">DONE</span> <a id="org6b24fe7"></a> <b>req-i-06</b>: For the sake of consistency, values passed to the defstackfn defined function should be <i>constant</i> (i.e. self-evaluating)</h4>
<div class="outline-text-4" id="text-orgc5eed18">
<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f-req-i-05</span> [!a !b !c] !a !b !c (invoke&gt; println 3))

(=&gt; <span style="color: #9fcb66;">#'user</span>/f-req-i-05 )


(f-req-i-05 1 [<span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:c</span>] 3)

<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; Complex args are forbidden: arg#1:[:a :b :c]</span>

(=&gt; <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">stackfn-complex-args-forbidden</span> )

(<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-throw-on-error*</span> <span style="color: #34c8d8; font-weight: bold;">true</span>]
  (<span style="color: #ffff0b;">try</span> (f-req-i-05 1 [<span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:b</span>] 3)
       (<span style="color: #ffff0b;">catch</span> Exception e [(ex-message e)
                           (ex-data e)])))

(=&gt;
 [<span style="color: #ff7fff;">"Complex args are forbidden: arg#1:[:a :b :b]"</span>
  {<span style="color: #34c8d8; font-weight: bold;">:complex-args</span> ([1 [<span style="color: #34c8d8; font-weight: bold;">:a</span> <span style="color: #34c8d8; font-weight: bold;">:b</span> <span style="color: #34c8d8; font-weight: bold;">:b</span>]])}]
)
</pre>
</div>
</div>
</div>
<div id="outline-container-org52c7d35" class="outline-4">
<h4 id="org52c7d35"><span class="done DONE">DONE</span> <a id="org2fe6c02"></a> <b>req-i-07</b>: <code>kdh.stax.core/defstackfn</code> creates a named function that returns the remaining stack as a vector</h4>
<div class="outline-text-4" id="text-org52c7d35">
<p>
Internally, I represent the stack as a vector whose rightmost value is its top.  This choice is idiomatic because <code>clojure.core/pop</code> of a vector returns a vector like it's argument, but without the last item. I note that none of the stack state comments in the given example show any enclosing structure.  And they all treat the right-most as the top.  Of course, there is nothing preventing the choice of a list or queue, as pop works on those. It is just my reasoned and experience choice to use a vector.
</p>

<p>
Further, I return the stack and not its top because that would destroy important information (the rest of the stack).  As a general principle, I do not believe in descarding valid data &#x2013; the final state of the stack is useful in debugging.  And if the user wishes to only have the top, they can always peek it.  If I only return the top, however, the user cannot access (or even be aware of) the remaining discarded stack.
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-org2017a31" class="outline-2">
<h2 id="org2017a31">Using <code>defstackfn</code></h2>
<div class="outline-text-2" id="text-org2017a31">
</div>
<div id="outline-container-org6ed1c6f" class="outline-3">
<h3 id="org6ed1c6f"><code>&lt;name&gt;</code>: the named function defined by <code>defstackfn</code></h3>
<div class="outline-text-3" id="text-org6ed1c6f">
<p>
As required (see <a href="#orga2cc5cb">Requirements</a>), <code>(defstackfn &lt;name&gt; &lt;declarations&gt; &lt;operations&gt;...)</code>
defines a function of name <code>&lt;name&gt;</code> that takes a vector of !v like <code>&lt;declarations&gt;</code> and any number of <code>&lt;operations&gt;</code>.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">defstackfn</span> <span style="color: #ff996f;">f</span>
  [!a !b !c]
  !a
  !b
  (invoke&gt; + 2)
  !v1+
  !c
  !c
  &lt;pop&gt;
  2
  (invoke&gt; * 2)
  !v2+
  (invoke&gt; = 2)
  (if&gt;
    !v1
    !v2
    (invoke&gt; - 2)
   else&gt;
    <span style="color: #ff7fff;">"false!!"</span>
    (invoke&gt; println 1)
    &lt;pop&gt;
    !v1
    !v2
    (invoke&gt; * 2)
    )
  )

(=&gt; <span style="color: #9fcb66;">#'user</span>/f )
</pre>
</div>

<p>
Calling the newly created function with the 3 args in the example gives the expected output and return value.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>RPL Example as a function call to the <code>defstackfn</code> defined <code>f</code></label><pre class="src src-clojure">(f 1 2 4)

<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; false!!</span>

(=&gt; [24] )
</pre>
</div>

<p>
This is implemented in the <code>defstackfn</code> macro expansion as a call to <code>kdh.stax.core/stackfn</code> whose first argument is the node-data that &lt;name&gt; closes over, and whose remaining arguments are the values you give to the <code>defstackfn</code> defined function.
</p>

<p>
<code>stackfn</code> can be called using <code>kdh.stax.nodify/build-node-data</code> to achieve the same results as the named function:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>RPL Example as a function call to <code>kdh.stax.core/stackfn</code></label><pre class="src src-clojure">(stackfn (build-node-data '[!a !b !c]
                           <span style="color: #9fcb66;">ex</span>/ops-rpl-example)
          1 2 4)

<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt; false!!</span>

(=&gt; [24] )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb0c3205" class="outline-3">
<h3 id="orgb0c3205"><code>&lt;name&gt;-dbg</code>: the debug function defined by <code>defstackfn</code></h3>
<div class="outline-text-3" id="text-orgb0c3205">
<p>
In addition, <code>kdh.stax.core/defstackfn</code> also defines a function named <code>&lt;name&gt;-dbg</code> (in the example, <code>f-dbg</code>), which when called with no arguments, returns the node-data as a map. This is the same node data that <code>f</code> closes over, hence the name <code>f-dbg</code>.
</p>

<p>
Like the named function <code>&lt;name&gt;</code> (in the example, <code>f</code>), <code>&lt;name&gt;-dbg</code> can take arguments of the the same number as the <code>declarations</code> given to <code>defstackfn</code>.  Called with arguments, <code>&lt;name&gt;-dbg</code> returns the node-data with an extra key <code>:results</code>. <code>results</code> is a vector, because <code>&lt;name&gt;-dbg</code> can take arguments in any number that is a multiple of <code>declarations</code>, returning each result in the order of the runs arguments for results (allowing the user to simulate multiple calls to <code>name</code> function with different values).
</p>

<p>
Here is the structure of <code>:results</code>
</p>

<dl class="org-dl">
<dt><code>:results</code></dt><dd>a vector of result maps
<ul class="org-ul">
<li>a result map is the last op node executed in one of the runs, with the following additional keys:
<dl class="org-dl">
<dt><code>:errors</code></dt><dd>if present a vector of runtime errors for the last node in the result.</dd>
<dt><code>:output</code></dt><dd>a string of the output ("false!!" in the RPL example)</dd>
<dt><code>:trace</code></dt><dd>a vector of nodes passed through from start of the execution (a start-node) to this node</dd>
<dt><code>:stack</code></dt><dd>the final value of the stack (<code>[24]</code> in the RPL example)
<ul class="org-ul">
<li><code>:stack</code> is not present if <code>:errors</code> is present, as <code>stack</code> is the value after executing the result node
<ul class="org-ul">
<li>to find the last good state of <code>stack</code> if the result has <code>:errors</code>, peek the pop of <code>:trace</code></li>
</ul></li>
</ul></dd>
<dt><code>:turns</code></dt><dd>a vector of strings describing the branches passed (e.g. ["start" "then" "else"] through until the result node</dd>
<dt><code>:var-init-map</code></dt><dd>the map of the declarations given to the execution that ends in the result node</dd>
<dt><code>:var-map</code></dt><dd>the map of the current variable bindings after the execution of the result node
<ul class="org-ul">
<li><code>:var-map</code> is not present if <code>:errors</code> is present
<ul class="org-ul">
<li>peek the pop of <code>:trace</code> for the last good value of <code>:var-map</code></li>
</ul></li>
</ul></dd>
</dl></li>
</ul></dd>
</dl>



<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>RPL Example as a function call to the <code>defstackfn</code> defined <code>f-dbg</code></label><pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> (f-dbg 1 2 4)
     <span style="color: #34c8d8; font-weight: bold;">:results</span>
     (mapv #(select-keys <span style="color: #4ac964;">%</span> [<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> <span style="color: #34c8d8; font-weight: bold;">:var-map</span> <span style="color: #34c8d8; font-weight: bold;">:turns</span> <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #34c8d8; font-weight: bold;">:stack</span>])))

(=&gt; [{<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 1, !b 2, !c 4},
      <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1, !b 2, !c 4, !v1 3, !v2 8},
      <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span>],
      <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #ff7fff;">"false!!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>,
      <span style="color: #34c8d8; font-weight: bold;">:stack</span> [24]}] )


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">AND WITH MULTIPLE RUNS</span>

(<span style="color: #ffff0b;">-&gt;&gt;</span> (f-dbg 1 2 4
            3 3 3)
     <span style="color: #34c8d8; font-weight: bold;">:results</span>
     (mapv #(select-keys <span style="color: #4ac964;">%</span> [<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> <span style="color: #34c8d8; font-weight: bold;">:var-map</span> <span style="color: #34c8d8; font-weight: bold;">:turns</span> <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #34c8d8; font-weight: bold;">:stack</span>])))

(=&gt; [{<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 1, !b 2, !c 4},
      <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1, !b 2, !c 4, !v1 3, !v2 8},
      <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span>],
      <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #ff7fff;">"false!!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>, <span style="color: #34c8d8; font-weight: bold;">:stack</span> [24]}
     {<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 3, !b 3, !c 3},
      <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 3, !b 3, !c 3, !v1 6, !v2 6},
      <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span>],
      <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #ff7fff;">""</span>, <span style="color: #34c8d8; font-weight: bold;">:stack</span> [0]}] )
</pre>
</div>

<p>
Like with the relationship between the <code>defstackfn</code> defined function <code>f</code> and its call to <code>stackfn</code> with the node-data closure, <code>&lt;name&gt;-dbg</code> also calls its own helper function, <code>stackfn-dbg</code>.  And we can use that to debug without touching <code>defstackfn</code>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>RPL Example as a function call to <code>kdh.stax.core/stackfn-dbg</code></label><pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> (stackfn-dbg
      (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-rpl-example)
      1 2 4
      3 3 3)
     <span style="color: #34c8d8; font-weight: bold;">:results</span>
     (mapv #(select-keys <span style="color: #4ac964;">%</span> [<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> <span style="color: #34c8d8; font-weight: bold;">:var-map</span> <span style="color: #34c8d8; font-weight: bold;">:turns</span> <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #34c8d8; font-weight: bold;">:stack</span>])))

(=&gt; [{<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 1, !b 2, !c 4},
      <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 1, !b 2, !c 4, !v1 3, !v2 8},
      <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span>],
      <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #ff7fff;">"false!!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>,
      <span style="color: #34c8d8; font-weight: bold;">:stack</span> [24]}
     {<span style="color: #34c8d8; font-weight: bold;">:var-init-map</span> {!a 3, !b 3, !c 3},
      <span style="color: #34c8d8; font-weight: bold;">:var-map</span> {!a 3, !b 3, !c 3, !v1 6, !v2 6},
      <span style="color: #34c8d8; font-weight: bold;">:turns</span> [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span>],
      <span style="color: #34c8d8; font-weight: bold;">:output</span> <span style="color: #ff7fff;">""</span>, <span style="color: #34c8d8; font-weight: bold;">:stack</span> [0]}] )
</pre>
</div>

<hr />
<p>
Now that we've played with the results of <code>defstackfn</code> and its helper functions, lets explore the node-data
</p>
</div>
</div>
</div>

<div id="outline-container-org91ca666" class="outline-2">
<h2 id="org91ca666">Nodes</h2>
<div class="outline-text-2" id="text-org91ca666">
<p>
nodes are maps, describing an operation and its properties
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Operations, Nodes, and Their Descriptions</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operation</th>
<th scope="col" class="org-left">Node <code>:op-type</code></th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">!v</td>
<td class="org-left">::op=push-var</td>
<td class="org-left">op to push the value of a stack variable onto the stack</td>
</tr>

<tr>
<td class="org-left">const</td>
<td class="org-left">::op=push-sef</td>
<td class="org-left">op to push the value of a self evaluating form onto the stack (number, string, character, keyword, boolean, nil)</td>
</tr>

<tr>
<td class="org-left">&lt;pop&gt;</td>
<td class="org-left">::op=pop</td>
<td class="org-left">op to pop the top of the stack</td>
</tr>

<tr>
<td class="org-left">!v+</td>
<td class="org-left">::op=def-var</td>
<td class="org-left">op to define a (possibly new) stack variable and assign it the top of the stack without changing the stack</td>
</tr>

<tr>
<td class="org-left">(invoke&gt; f n)</td>
<td class="org-left">::op=invoke</td>
<td class="org-left">op to invoke a function (f) on a number (n) of stack values. Those n values are removed from the stack and the return value of f pushed onto the stack</td>
</tr>

<tr>
<td class="org-left">(if&gt;&#x2026; else&gt;&#x2026;)</td>
<td class="org-left">::op=if</td>
<td class="org-left">op to branch conditionally into :then or :else based on the thruthiness of the top of the stack.  The top of the stack is pop'd. :then and :else are vectors of nodes</td>
</tr>

<tr>
<td class="org-left">any other form</td>
<td class="org-left">::op=illegal</td>
<td class="org-left">not a legal op</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> Operations, Nodes, and Their Predicates</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operation</th>
<th scope="col" class="org-left">Op Predicate</th>
<th scope="col" class="org-left">Node <code>:op-type</code></th>
<th scope="col" class="org-left">Node Predicate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">!v</td>
<td class="org-left">!symbol?</td>
<td class="org-left">::op=push-var</td>
<td class="org-left">push-var-node?</td>
</tr>

<tr>
<td class="org-left">const</td>
<td class="org-left">self-evaluating?</td>
<td class="org-left">::op=push-sef</td>
<td class="org-left">push-sef-node?</td>
</tr>

<tr>
<td class="org-left">&lt;pop&gt;</td>
<td class="org-left">&lt;pop&gt;?</td>
<td class="org-left">::op=pop</td>
<td class="org-left">pop-node?</td>
</tr>

<tr>
<td class="org-left">!v+</td>
<td class="org-left">!symbol+?</td>
<td class="org-left">::op=def-var</td>
<td class="org-left">def-var-node?</td>
</tr>

<tr>
<td class="org-left">(invoke&gt; f n)</td>
<td class="org-left">invoke&gt;?</td>
<td class="org-left">::op=invoke</td>
<td class="org-left">invoke-node?</td>
</tr>

<tr>
<td class="org-left">(if&gt;&#x2026; else&gt;&#x2026;)</td>
<td class="org-left">if&gt;?</td>
<td class="org-left">::op=if</td>
<td class="org-left">if-node?</td>
</tr>

<tr>
<td class="org-left">any other form</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">::op=illegal</td>
<td class="org-left">illegal-node?</td>
</tr>
</tbody>
</table>

<p>
Each legal op node requires 0 or more stack values (its <code>:needs</code>), and changes the size of the stack by some integer number (its <code>:delta</code>)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> Node and Their Effect on the Stack</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Node <code>:op-type</code></th>
<th scope="col" class="org-right">:needs</th>
<th scope="col" class="org-right">:delta</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">::op=push-var</td>
<td class="org-right">0</td>
<td class="org-right">+1</td>
</tr>

<tr>
<td class="org-left">::op=push-sef</td>
<td class="org-right">0</td>
<td class="org-right">+1</td>
</tr>

<tr>
<td class="org-left">::op=pop</td>
<td class="org-right">1</td>
<td class="org-right">-1</td>
</tr>

<tr>
<td class="org-left">::op=def-var</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-left">::op=invoke</td>
<td class="org-right">n</td>
<td class="org-right">-(n-1)</td>
</tr>

<tr>
<td class="org-left">::op=if</td>
<td class="org-right">1</td>
<td class="org-right">-1</td>
</tr>

<tr>
<td class="org-left">::op=illegal</td>
<td class="org-right">NA</td>
<td class="org-right">NA</td>
</tr>
</tbody>
</table>


<p>
Each op node has some of the keys.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 4:</span> Node Keys</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">KEY</th>
<th scope="col" class="org-left">VALUE</th>
<th scope="col" class="org-left">OPTIONALITY</th>
<th scope="col" class="org-left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>:op</code></td>
<td class="org-left">expr</td>
<td class="org-left">All nodes</td>
<td class="org-left">the operation as a quoted value</td>
</tr>

<tr>
<td class="org-left"><code>:op-type</code></td>
<td class="org-left">key</td>
<td class="org-left">All nodes</td>
<td class="org-left">See operation table</td>
</tr>

<tr>
<td class="org-left"><code>:needs</code></td>
<td class="org-left">int &gt;= 0</td>
<td class="org-left">All legal</td>
<td class="org-left">how many stack values the operation requires</td>
</tr>

<tr>
<td class="org-left"><code>:delta</code></td>
<td class="org-left">int</td>
<td class="org-left">All legal</td>
<td class="org-left">the change to the stack size after execution of the node</td>
</tr>

<tr>
<td class="org-left"><code>:op-index</code></td>
<td class="org-left">vector</td>
<td class="org-left">All nodes</td>
<td class="org-left">vector of pos-int to the operation in the original sequence</td>
</tr>

<tr>
<td class="org-left"><code>:node-index</code></td>
<td class="org-left">vector</td>
<td class="org-left">All nodes</td>
<td class="org-left">vector of pos-int to the operation in the resulting node-tree</td>
</tr>

<tr>
<td class="org-left"><code>:fun</code></td>
<td class="org-left">fn?</td>
<td class="org-left">invoke&gt;</td>
<td class="org-left">function value of invoke&gt; operation</td>
</tr>

<tr>
<td class="org-left"><code>:arity</code></td>
<td class="org-left">pos-int?</td>
<td class="org-left">invoke&gt;</td>
<td class="org-left">number of stack items the invoke&gt; :fun will consume (same as needs)</td>
</tr>

<tr>
<td class="org-left"><code>:then</code></td>
<td class="org-left">vector of nodes</td>
<td class="org-left">if&gt;</td>
<td class="org-left">a node subtree to follow if the top of the stack is truthy</td>
</tr>

<tr>
<td class="org-left"><code>:else</code></td>
<td class="org-left">vector of nodes</td>
<td class="org-left">if&gt;</td>
<td class="org-left">a node subtree to follow if the top of the stack is falsey</td>
</tr>

<tr>
<td class="org-left"><code>:var-ref</code></td>
<td class="org-left">!v</td>
<td class="org-left">def-var push-var</td>
<td class="org-left">!v form symbol for stack variable</td>
</tr>

<tr>
<td class="org-left"><code>:var-def</code></td>
<td class="org-left">!v+</td>
<td class="org-left">def-var</td>
<td class="org-left">!v+ form for stack variable (::op=def-var only)</td>
</tr>

<tr>
<td class="org-left"><code>:branch</code></td>
<td class="org-left">keyword</td>
<td class="org-left">start if-pop termn</td>
<td class="org-left">Represents path start, turn , and end</td>
</tr>

<tr>
<td class="org-left"><code>:errors</code></td>
<td class="org-left">vector of maps</td>
<td class="org-left">Any</td>
<td class="org-left">(See <a href="#org2855dc3">Errors</a>)</td>
</tr>
</tbody>
</table>


<p>
Internally, nodes are created by <code>kdh.stax.nodify/nodify-ops</code>, which returns a node-tree.
Operationally, build-node-data takes the declarations and operations arguments of defstackfn and returns a map of node data.
Node templates (the default properities of a node of a <code>:node-type</code>) are maps in <code>kdh.stax.node</code>, which also contains op and node predicate functions (I use these to avoid having to ns/keyword to in other files a node for <code>:node-type</code>)
</p>
</div>
</div>


<div id="outline-container-org5d516c2" class="outline-2">
<h2 id="org5d516c2">Node Data</h2>
<div class="outline-text-2" id="text-org5d516c2">
<p>
The node data generated by <code>kdh.stax.nodify/build-node-data</code> is a map that contains the following keys:
</p>
<dl class="org-dl">
<dt><code>:declarations</code></dt><dd>The declarations vector passed to <code>defstackfn</code></dd>
<dt><code>:operations</code></dt><dd>The operations sequence passed to <code>defstackfn</code></dd>
<dt><code>:node-tree</code></dt><dd><ul class="org-ul">
<li>A vector of <a href="#org91ca666">nodes</a> with <code>if&gt;</code> nodes containing <code>:then</code> and <code>:else</code> subtrees</li>
</ul></dd>
<dt><code>:nodes</code></dt><dd><ul class="org-ul">
<li>The node-tree flattened into a vector of nodes with <code>if&gt;</code> nodes converted to if-pop nodes (without a :branch - see <code>:paths</code> below) followed by both then and else nodes.</li>
<li>Because this is derived from the node-tree, it contains all of the parse errors (illegal ops, and malformed invoke&gt;).</li>
<li>It is used to inject tree errors into the <a href="#orge49b9d3">visualization</a></li>
</ul></dd>
<dt><code>:paths</code></dt><dd><ul class="org-ul">
<li>All of the traversable paths through the node-tree as a vector of vectors of nodes
(the outer vector is the paths, and an inner vector is a single path).</li>
<li>Each path begins with a start node and ends with a terminal node.</li>
<li><code>if&gt;</code> nodes in the tree become <code>if-pop</code> nodes in the path with a branch key <code>:branch</code> recording the branch taken (<code>:then</code> or <code>:else</code>)</li>
<li>Paths are in then-over-else order, meaning the first path is all <code>:then</code> branches, the last is all <code>:else</code> branches. See <a href="#orgcb66691">Sorting Paths</a></li>
</ul></dd>
<dt><code>:turns</code></dt><dd><ul class="org-ul">
<li>A vector of vectors of strings, turns is one-for-one matched to paths, such that each turn vector has the same index in turns as its path has in paths.
<ul class="org-ul">
<li>as an example, there are two turn vectors in the node-data for the rpl example ops, which has a single <code>if&gt;</code>
<ul class="org-ul">
<li>["start" "then" "term"]</li>
<li>["start" "else" "term"]</li>
</ul></li>
<li>Used to name the visualization for each path and can be used uniquely identify paths (e.g. as a key to a map of paths)</li>
</ul></li>
</ul></dd>
<dt><code>:errors-for-print</code></dt><dd><ul class="org-ul">
<li>a vector of errors found through parsing (of <code>:node-tree</code>) and static analysis (of <code>:paths</code>) with keys <code>:node-index</code> and values of a vector of a nodes :~errors~.</li>
</ul></dd>
</dl>

<hr />
</div>
</div>
<div id="outline-container-org214c058" class="outline-2">
<h2 id="org214c058">Building Node Data</h2>
<div class="outline-text-2" id="text-org214c058">
</div>
<div id="outline-container-orgc98c6eb" class="outline-3">
<h3 id="orgc98c6eb"><code>build-node-data</code></h3>
<div class="outline-text-3" id="text-orgc98c6eb">
</div>
<div id="outline-container-org35c96c0" class="outline-4">
<h4 id="org35c96c0">ops ➤ node-tree (<code>kdh.stax.nodify/nodify-ops</code>)</h4>
<div class="outline-text-4" id="text-org35c96c0">
<p>
<code>nodify-ops</code> returns a node-tree (a vector of nodes where if-nodes have sub node-trees).
</p>

<p>
Called with one argument (an ops sequence), <code>nodify-ops</code> calls a two argument version of itself with the first argument as an accumulation map to initialize the accumulation values:
</p>
<div class="org-src-container">
<pre class="src src-clj">{<span style="color: #34c8d8; font-weight: bold;">:op-index</span> [] <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [] <span style="color: #34c8d8; font-weight: bold;">:op-offset</span> 0}
</pre>
</div>
<p>
In the two argument version, <code>nodify-ops</code> uses <code>map-indexed</code> to iterate across the sequence of ops given to it, adjusting the index keys (<code>:node-index</code> and <code>:op-index</code>) by <code>conj</code>'ing <code>i</code> (or <code>(+ i :offset)</code> for the <code>:op-index</code>), where <code>i</code> is the index argument to <code>map-indexed</code>'d function.
</p>

<ul class="org-ul">
<li>If the op in the <code>map-indexed</code> loop is <code>if&gt;</code> (branching case)
<ul class="org-ul">
<li><code>nodify-ops</code> recurses on the then and else ops sequences returned by <code>if&gt;sexp-to-then-and-else</code>, passing an accumulation map adjusted appropriately
<ul class="org-ul">
<li><code>:then</code> or <code>:else</code> is <code>conj</code>'d onto <code>:node-index'</code></li>
<li><code>:offset</code> is set to either
<ul class="org-ul">
<li>1 for the then recursion or</li>
<li>2 + count of then for the else recursion</li>
</ul></li>
<li>the node-trees returned by the then and else recursive calls are assigned to the if-node's <code>:then</code> / <code>:else</code> keys.</li>
</ul></li>
</ul></li>

<li>If the op is not an <code>if&gt;</code> (non-branching case),
<ul class="org-ul">
<li><code>nodify-ops</code>'s <code>map-indexed</code> fn adds the adjusted node-index and op-index to the return of a call to <code>nodify-op</code>.</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-orgc6275ba" class="outline-4">
<h4 id="orgc6275ba">node-tree ➤ paths (<code>kdh.stax.nodify/node-tree-to-node-paths</code>)</h4>
<div class="outline-text-4" id="text-orgc6275ba">
</div>
<div id="outline-container-org9dd6415" class="outline-5">
<h5 id="org9dd6415">Whiteboarding</h5>
<div class="outline-text-5" id="text-org9dd6415">
<p>
The following is a rough approximation of the whiteboard analysis I did to come up with the algorithm in <code>kdh.stax.nodify/node-tree-to-node-paths</code>.
</p>

<p>
Let's start with a simple tree.
</p>

<?xml version="1.0" encoding="UTF-8"?><svg width="165pt" height="108pt" preserveAspectRatio="xMidYMid meet" zoomAndPan="magnify" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css"><g id="graph0" class="graph" transform="scale(1.5 1.5) rotate(0) translate(4 73.8)"><title>simple</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-73.8 114.8,-73.8 114.8,4 -4,4"></polygon><text text-anchor="middle" x="55.4" y="-7.8" font-family="Roboto" font-size="14.00">simple</text><g id="v1" class="node"><title>v1</title><ellipse fill="black" stroke="black" cx="1.8" cy="-43.8" rx="1.8" ry="1.8"></ellipse></g><g id="v2" class="node"><title>v2</title><ellipse fill="black" stroke="black" cx="55.4" cy="-43.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge1" class="edge"><title>v1--v2</title><path fill="none" stroke="black" d="M3.7,-43.8C9.91,-43.8 46.5,-43.8 53.31,-43.8"></path><text text-anchor="middle" x="28.6" y="-47.6" font-family="Times,serif" font-size="14.00">p1</text></g><g id="v3" class="node"><title>v3</title><ellipse fill="black" stroke="black" cx="109" cy="-62.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge2" class="edge"><title>v2--v3</title><path fill="none" stroke="black" d="M57.3,-44.13C63.51,-46.42 100.1,-59.89 106.91,-62.4"></path><text text-anchor="middle" x="82.2" y="-58.6" font-family="Times,serif" font-size="14.00">p2</text></g><g id="v4" class="node"><title>v4</title><ellipse fill="black" stroke="black" cx="109" cy="-24.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge3" class="edge"><title>v2--v4</title><path fill="none" stroke="black" d="M57.35,-43.01C59.99,-40.87 67.75,-34.86 75.2,-31.8 87.27,-26.85 103.33,-25.2 107.16,-24.87"></path><text text-anchor="middle" x="82.2" y="-35.6" font-family="Times,serif" font-size="14.00">p3</text></g></g></svg>


<ul class="org-ul">
<li>In the diagram above, there are three labeled subpaths
<ul class="org-ul">
<li>the edges p1, p2 and p3</li>
</ul></li>
<li>But only two paths through the tree
<ul class="org-ul">
<li>p1→p2</li>
<li>p1→p3</li>
</ul></li>
</ul>

<p>
If we divide the tree at the branch vertex, into left side and right side, we can see the paths are a cross product, which in clojure can be easily expressed using <code>for</code>:
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">for</span> [left [<span style="color: #34c8d8; font-weight: bold;">:p1</span>]  right [<span style="color: #34c8d8; font-weight: bold;">:p2</span> <span style="color: #34c8d8; font-weight: bold;">:p3</span>]]
  [left right])

(=&gt; ([<span style="color: #34c8d8; font-weight: bold;">:p1</span> <span style="color: #34c8d8; font-weight: bold;">:p2</span>] [<span style="color: #34c8d8; font-weight: bold;">:p1</span> <span style="color: #34c8d8; font-weight: bold;">:p3</span>]) )
</pre>
</div>

<p>
Let's try a more complex example:
</p>

<?xml version="1.0" encoding="UTF-8"?><svg width="379pt" height="133pt" preserveAspectRatio="xMidYMid meet" zoomAndPan="magnify" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css"><g id="graph0" class="graph" transform="scale(1.5 1.5) rotate(0) translate(4 91.8)"><title>unbalanced</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-91.8 269.2,-91.8 269.2,4 -4,4"></polygon><text text-anchor="middle" x="132.6" y="-7.8" font-family="Times,serif" font-size="14.00">unbalanced</text><g id="v1" class="node"><title>v1</title><ellipse fill="black" stroke="black" cx="1.8" cy="-62.8" rx="1.8" ry="1.8"></ellipse></g><g id="v2" class="node"><title>v2</title><polygon fill="none" stroke="black" points="107.6,-74.8 71.6,-74.8 71.6,-80.8 53.6,-62.8 71.6,-44.8 71.6,-50.8 107.6,-50.8 107.6,-74.8"></polygon><text text-anchor="middle" x="80.6" y="-59.1" font-family="Times,serif" font-size="14.00">2</text></g><g id="edge1" class="edge"><title>v1--v2</title><path fill="none" stroke="black" d="M3.66,-62.8C8.57,-62.8 33.49,-62.8 53.47,-62.8"></path><text text-anchor="middle" x="28.6" y="-66.6" font-family="Times,serif" font-size="14.00">p1</text></g><g id="v3" class="node"><title>v3</title><ellipse fill="black" stroke="black" cx="184.6" cy="-81.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge2" class="edge"><title>v2--v3</title><path fill="none" stroke="black" d="M107.6,-67.64C135.46,-72.83 176.54,-80.49 182.79,-81.65"></path><text text-anchor="middle" x="132.6" y="-76.6" font-family="Times,serif" font-size="14.00">p2</text></g><g id="v4" class="node"><title>v4</title><polygon fill="none" stroke="black" points="211.6,-55.8 175.6,-55.8 175.6,-61.8 157.6,-43.8 175.6,-25.8 175.6,-31.8 211.6,-31.8 211.6,-55.8"></polygon><text text-anchor="middle" x="184.6" y="-40.1" font-family="Times,serif" font-size="14.00">1</text></g><g id="edge3" class="edge"><title>v2--v4</title><path fill="none" stroke="black" d="M108.02,-55.7C113.79,-54.29 119.88,-52.91 125.6,-51.8 135.98,-49.79 147.5,-48.1 157.52,-46.79"></path><text text-anchor="middle" x="132.6" y="-55.6" font-family="Times,serif" font-size="14.00">p3</text></g><g id="v5" class="node"><title>v5</title><ellipse fill="black" stroke="black" cx="263.4" cy="-62.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge4" class="edge"><title>v4--v5</title><path fill="none" stroke="black" d="M211.6,-50.23C231.1,-55.06 255.37,-61.06 261.13,-62.49"></path><text text-anchor="middle" x="236.6" y="-60.6" font-family="Times,serif" font-size="14.00">p4</text></g><g id="v6" class="node"><title>v6</title><ellipse fill="black" stroke="black" cx="263.4" cy="-24.8" rx="1.8" ry="1.8"></ellipse></g><g id="edge5" class="edge"><title>v4--v6</title><path fill="none" stroke="black" d="M211.6,-37.37C231.1,-32.54 255.37,-26.54 261.13,-25.11"></path><text text-anchor="middle" x="236.6" y="-36.6" font-family="Times,serif" font-size="14.00">p5</text></g></g></svg>

<ul class="org-ul">
<li>In the diagram above, their are five labeled subpaths
<ul class="org-ul">
<li>the edges p1, p2, p3, p4 and p5</li>
</ul></li>
<li>But only three paths through the tree
<ul class="org-ul">
<li>p1→p2</li>
<li>p1→p3→p4</li>
<li>p1→p3→p5</li>
</ul></li>
</ul>

<p>
For this example we need to modify our calculation.  The arrow indicates the direction and order of subpath combination
</p>

<p>
First we must combine p3 with p4 and with p5
</p>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">1: </span>(<span style="color: #ffff0b;">for</span> [left [<span style="color: #34c8d8; font-weight: bold;">:p3</span>] right [<span style="color: #34c8d8; font-weight: bold;">:p4</span> <span style="color: #34c8d8; font-weight: bold;">:p5</span>]]
<span class="linenr">2: </span>  [left right])
<span class="linenr">3: </span>
<span class="linenr">4: </span>(=&gt; ([<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p4</span>] [<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p5</span>]) )
</pre>
</div>
<p>
Next, we must put the results of the previous step (as a vector, not a list) into p2 (wrapped in a vector) so the we have a right side for the next step.
</p>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr">1: </span>(into [[<span style="color: #34c8d8; font-weight: bold;">:p2</span>]] [[<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p4</span>] [<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p5</span>]])
<span class="linenr">2: </span>
<span class="linenr">3: </span>(=&gt; [[<span style="color: #34c8d8; font-weight: bold;">:p2</span>] [<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p4</span>] [<span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p5</span>]] )
</pre>
</div>
<p>
Then we must combine p1 with this result.  Cleaning it all up, give us the three paths we want.
</p>
<div class="org-src-container">
<pre class="src src-clj"><span class="linenr"> 1: </span>(vec (<span style="color: #ffff0b;">for</span> [left [[<span style="color: #34c8d8; font-weight: bold;">:p1</span>]]
<span class="linenr"> 2: </span>           right (into [[<span style="color: #34c8d8; font-weight: bold;">:p2</span>]]
<span class="linenr"> 3: </span>                       (vec (<span style="color: #ffff0b;">for</span> [left [[<span style="color: #34c8d8; font-weight: bold;">:p3</span>]]
<span class="linenr"> 4: </span>                                  right (into [[<span style="color: #34c8d8; font-weight: bold;">:p4</span>]] [[<span style="color: #34c8d8; font-weight: bold;">:p5</span>]])]
<span class="linenr"> 5: </span>                              (into left right))))]
<span class="linenr"> 6: </span>       (into left right)))
<span class="linenr"> 7: </span>
<span class="linenr"> 8: </span>(=&gt; [[<span style="color: #34c8d8; font-weight: bold;">:p1</span> <span style="color: #34c8d8; font-weight: bold;">:p2</span>]
<span class="linenr"> 9: </span>     [<span style="color: #34c8d8; font-weight: bold;">:p1</span> <span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p4</span>]
<span class="linenr">10: </span>     [<span style="color: #34c8d8; font-weight: bold;">:p1</span> <span style="color: #34c8d8; font-weight: bold;">:p3</span> <span style="color: #34c8d8; font-weight: bold;">:p5</span>]]
<span class="linenr">11: </span>    )
</pre>
</div>

<p>
Some conclusions (from my notes)
</p>
<ul class="org-ul">
<li>A subpath (e.g. p1) is a sequence of op-nodes and the vertices are branch points with then and else (if-nodes)</li>
<li>Made easier by dividing a sequence of nodes into non-if subpaths and if subpaths (which eventually recurse to non-if subpaths)
<ul class="org-ul">
<li>non-if subpaths will reduce to <code>[[p1]]</code></li>
<li>if subpaths must call our node to paths function on their then and else subpaths and combine the results (with into - line 5 above)</li>
</ul></li>
<li>Since we are making choices in each path, we need to flatten the if into a chose-then and chose-else so when if recurses, it should push a special choice node called if-pop
<ul class="org-ul">
<li>because it contains the pop of the stack implicit after the if's conditional step</li>
<li>both if-pop nodes are given the :node-index and :op-index of their if-node to preserve refence to it</li>
<li>each if-pop records its choice as :branch key with value :then or :else</li>
<li>each if-pop is pushed into the front of their branch sequence of nodes</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org850ff45" class="outline-4">
<h4 id="org850ff45">Implementation</h4>
<div class="outline-text-4" id="text-org850ff45">
<p>
Here is an overview of <code>node-tree-to-node-paths</code> and the functions it uses
</p>
<ul class="org-ul">
<li><code>node-tree-to-node-paths</code> calls <code>any-son-to-paths</code> on the node-tree (son is short for sequence of nodes)
<ul class="org-ul">
<li><code>any-son-to-paths</code> partitions the node sequence by <code>if-node?</code>, creating alternating sequences of non-if-nodes and if-nodes subpaths
<ul class="org-ul">
<li>It then <code>mapv</code> dispatches to either <code>non-if-son-to-subpaths</code> or <code>if-son-to-subpaths</code> as appropriate, across the partitioned sequence</li>
</ul></li>
<li><code>non-if-son-to-subpaths</code> wraps the son in [[]]</li>
<li><code>if-son-to-subpaths</code> calls <code>any-son-to-paths</code> on the <code>then</code> sequence again on the <code>else</code> sequence
and combines the results into a collection of subpaths</li>
<li>When the <code>mapv</code> in each call to <code>any-son-to-paths</code> finishes, its vector of paths is reversed with <code>rseq</code> and reduced with <code>paths&gt;&gt;</code> which is a combinor on <code>into</code> (for all paths in one side against all paths in the other side, joining them with <code>into</code>).</li>
<li>Finally the resulting paths returned by the first call to <code>any-son-to-paths</code> is passed by <code>node-tree-to-node-paths</code> to <code>add-ends-to-paths</code></li>
<li><code>add-ends-to-paths</code> adds the same <code>[start-node]</code> to all paths (<code>kdh/stax/nodes/start-node-template</code>), then pushes a <code>terminal-node</code> onto the end of each path.
<ul class="org-ul">
<li><code>terminal-node</code> is created by <code>terminate-path</code> which calls <code>teminal-after</code> on the last node in the given path</li>
<li><code>terminal-after</code> returns a <code>terminal-node-template</code> with added keys based on the that last node
<ul class="org-ul">
<li><code>:node-index</code> of the last node with :branch value added (iff the last was an if-pop) and <code>nil</code> added to (for any last node including if-pop).</li>
<li><code>:op-index</code> for the last node with <code>nil</code> added</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org2855dc3" class="outline-2">
<h2 id="org2855dc3">Errors</h2>
<div class="outline-text-2" id="text-org2855dc3">
<p>
At its simplest, an error is a map of keys:
</p>
<dl class="org-dl">
<dt><code>:err-zone</code></dt><dd>Where/When the error occurred (e.g. <code>:kdh.stax.errs/zone=tree</code>)</dd>
<dt><code>:err-type</code></dt><dd>A richly descriptive keyword (e.g. <code>:kdh.stax.errs/error=parse-illegal-operation</code>)</dd>
<dt><code>:err-text</code></dt><dd>A string describing the error (e.g. <code>"&lt;clear&gt; is not an allowed op"</code>)</dd>
</dl>

<p>
Errors are added to a node with <code>:kdh.stax.errs/error+</code> which adds an <code>:errors</code> key if necessary
</p>

<div class="org-src-container">
<pre class="src src-clojure">(require '[kdh.stax.node <span style="color: #34c8d8; font-weight: bold;">:refer</span> [start-node]]
         '[kdh.stax.errs <span style="color: #34c8d8; font-weight: bold;">:refer</span> [error+] <span style="color: #34c8d8; font-weight: bold;">:as</span> err])

(<span style="color: #ffff0b;">-&gt;</span> {}
    (error+ {<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">::</span><span style="color: #9fcb66;">err</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=mom</span>
             <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">::</span><span style="color: #9fcb66;">err</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=stop-hitting-your-brother</span>
             <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"Hands are for holding, not hitting."</span>})
    (error+ {<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">::</span><span style="color: #9fcb66;">err</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=dad</span>
             <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">::</span><span style="color: #9fcb66;">err</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=listen-to-your-mother</span>
             <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"I swear to god, I will pull this car over!"</span>}))

(=&gt; {<span style="color: #34c8d8; font-weight: bold;">:errors</span> [{<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=mom</span>,
               <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=stop-hitting-your-brother</span>,
               <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"Hands are for holding, not hitting."</span>}
              {<span style="color: #34c8d8; font-weight: bold;">:err-zone</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">zone=dad</span>,
               <span style="color: #34c8d8; font-weight: bold;">:err-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.errs</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">error=listen-to-your-mother</span>,
               <span style="color: #34c8d8; font-weight: bold;">:err-text</span> <span style="color: #ff7fff;">"I swear to god, I will pull this car over!"</span>}]} )
</pre>
</div>
</div>

<div id="outline-container-org7d3004e" class="outline-3">
<h3 id="org7d3004e">Error Zones</h3>
<div class="outline-text-3" id="text-org7d3004e">
<p>
There are three zones of stax errors, each representing a phase of error analysis
</p>
</div>
<div id="outline-container-orga888b0d" class="outline-4">
<h4 id="orga888b0d">Parse Errors</h4>
<div class="outline-text-4" id="text-orga888b0d">
<p>
Some operations are always erroneous.
</p>
<ul class="org-ul">
<li><code>!v3+</code> is a legal operation</li>
<li><code>v3</code> is not ever a legal operation, regardless of where it occurs in the tree.</li>
</ul>
<p>
Such errors have the following facts:
</p>
<ul class="org-ul">
<li>They have <code>:err-zone</code> key with value <code>:kdh.stax.errs/zone=tree</code></li>
<li>They have <code>:err-type</code> key with value <code>:kdh.stax.errs/error=parse-&lt;something&gt;</code></li>
<li>They are created during the conversion of an operation into an op node in by <code>kdh.stax.nodify/nodify-op</code> and <code>kdh.stax.nodify/nodify-ops</code></li>
<li>They are present in nodes within the <code>:node-tree</code>, <code>:nodes</code>, and <code>:paths</code> keys of the node-data</li>
</ul>
</div>
</div>

<div id="outline-container-orgf788cc5" class="outline-4">
<h4 id="orgf788cc5">Static Path Analysis Errors</h4>
<div class="outline-text-4" id="text-orgf788cc5">
<p>
Other errors are only true within a given context of traversal &#x2013; within a path:
</p>
<ul class="org-ul">
<li>the same op <code>!v3</code> could be valid or invalid depending on whether <code>!v3+</code> is present earlier in the path.</li>
</ul>
<p>
Such errors have the following facts:
</p>
<ul class="org-ul">
<li>They have <code>:err-zone</code> key with value <code>:kdh.stax.errs/zone=path</code></li>
<li>They have <code>:err-type</code> key with value <code>:kdh.stax.errs/error=static-&lt;something&gt;</code></li>
<li>They are created during the static analysis (iff <code>*stax-perform-static-analysis*</code> is bound to <code>true</code>, the default) by <code>kdh.stax.nodify/check-refs-in-path</code> and <code>kdh.stax.nodify/count-card-in-path</code></li>
<li>They are present in nodes within the <code>:paths</code> key of the node-data</li>
</ul>
</div>
</div>

<div id="outline-container-org503303c" class="outline-4">
<h4 id="org503303c">Runtime Errors</h4>
<div class="outline-text-4" id="text-org503303c">
<p>
Finally, some errors can only occur within the context of evaluation (which is a traversal of the node-tree with values given to <code>stackfn</code> or <code>stackfn-dbg, or the ~defstackfn</code> defined functions that call them)
</p>
<ul class="org-ul">
<li><code>(invoke&gt;</code> + 2) will fail at runtime if either or both of the top two values on the stack are not numbers</li>
</ul>
<p>
Such errors have the following facts:
</p>
<ul class="org-ul">
<li>They have <code>:err-zone</code> key with value <code>:kdh.stax.errs/zone=exec</code></li>
<li>They have <code>:err-type</code> key with value <code>:kdh.stax.errs/error=runtime-&lt;something&gt;</code></li>
<li>They are created during the execution of nodes via <code>kdh.stax.nodify/exec-nodes</code>, which stops execution at the first node with errors.</li>
<li>They are present in nodes within the <code>:results</code> key of the node-data</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1904230" class="outline-3">
<h3 id="org1904230">Error Types</h3>
<div class="outline-text-3" id="text-org1904230">
<p>
Error type are richly descriptive, namespaced keywords.
Richly descriptive means that their names contain multiple parts that allow them easily distinguished out of context.
On their own, <code>:error=runtime-illegal-operation</code> and <code>:error=parse-illegal-operation</code> tell you more than <code>:error=illegal-operation</code>.
</p>

<p>
And <code>:error=runtime-&lt;something&gt;</code> is easily targeted by tooling (e.g. grep emacs/occur) and css matching.
For example, here is a list of all of the errors found by grep'ing 'error=':
</p>

<div class="org-src-container">
<pre class="src src-shell">find ~/clj/rpl/stax/src/clj/kdh/stax/ -type f -name <span style="color: #ff7fff;">'*.clj'</span> -print0 | xargs -0 grep <span style="color: #4ac964;">error</span>= | tr <span style="color: #ff7fff;">'\011\042/:()'</span> <span style="color: #ff7fff;">' '</span> | tr -s <span style="color: #ff7fff;">' '</span> | tr <span style="color: #ff7fff;">' '</span> <span style="color: #ff7fff;">'\012'</span> | grep <span style="color: #4ac964;">error</span>= | sort | uniq | sort -t-
</pre>
</div>

<pre class="example" id="org43113ee">
- error=parse-illegal-operation
- error=parse-invoke-arity-not-pos-int
- error=parse-invoke-fun-not-function
- error=parse-invoke-wrong-number-args
- error=runtime-debug-stack-is-not-a-vector
- error=runtime-debug-var-map-is-not-a-map
- error=runtime-illegal-operation
- error=runtime-insufficient-stack
- error=runtime-invoke-arity-not-pos-int
- error=runtime-invoke-failed
- error=runtime-invoke-fun-not-function
- error=runtime-invoke-returned-complex-val
- error=runtime-invoke-wrong-number-args
- error=runtime-var-not-defined
- error=static-insufficient-stack
- error=static-var-not-defined
</pre>

<p>
In addition to its use in :err-type, I also use the pattern <code>:&lt;type&gt;=&lt;ordered-properties&gt;</code> for op-type values:
</p>
<ul class="org-ul">
<li><code>:op=if</code> (the <code>if&gt;</code> operation's node)</li>
<li><code>:op=if-pop</code> (the isolation of the <code>if&gt;</code> node's pop-like conditional)</li>
</ul>
</div>



<div id="outline-container-org16f5b76" class="outline-4">
<h4 id="org16f5b76"><code>:err-type</code> vs <code>err-zone</code></h4>
<div class="outline-text-4" id="text-org16f5b76">
<p>
Many erroneous conditions that are caught in either parsing or static analysis, also have runtime variants.  This is to allow for full runtime checking even in the presents of parse or static analyis error by binding the <code>*stax-errors-prevent-exec*</code> to <code>false</code> or <code>nil</code>.
</p>

<table id="org2ba9121" border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 5:</span> Table of Node <code>:err-type</code> <code>:err-zone</code> interaction</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">op type</th>
<th scope="col" class="org-left">zone=tree<br>error=parse-…</th>
<th scope="col" class="org-left">zone=path<br>error=static-…</th>
<th scope="col" class="org-left">zone=exec<br>error=runtime-…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">!v</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">var-not-defined</td>
<td class="org-left">var-not-defined</td>
</tr>

<tr>
<td class="org-left">!v+</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">insufficient-stack</td>
<td class="org-left">insufficient-stack</td>
</tr>

<tr>
<td class="org-left">&lt;pop&gt;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">insufficient-stack</td>
<td class="org-left">insufficient-stack</td>
</tr>

<tr>
<td class="org-left">if&gt;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">insufficient-stack</td>
<td class="org-left">insufficient-stack</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">invoke-wrong-number-args</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">invoke-wrong-number-args</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">invoke-fun-not-function</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">invoke-fun-not-function</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">invoke-arity-not-pos-int</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">invoke-arity-not-pos-int</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">insufficient-stack</td>
<td class="org-left">insufficient-stack</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">invoke-failed</td>
</tr>

<tr>
<td class="org-left">invoke&gt;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">invoke-returned-complex-val</td>
</tr>

<tr>
<td class="org-left">NA</td>
<td class="org-left">illegal-operation</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">illegal-operation</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-org4e5aad6" class="outline-4">
<h4 id="org4e5aad6">Debugging Errors</h4>
<div class="outline-text-4" id="text-org4e5aad6">
<p>
Some errors should never occur &#x2013; their occurence indicates a serious flaw in the logic of the <code>exec-nodes</code> and <code>stack-op-exec</code> funtions
</p>
<ul class="org-ul">
<li><code>kdh.stax.errs/error=runtime-debug-stack-is-not-a-vector</code></li>
<li><code>kdh.stax.errs/error=runtime-debug-var-map-is-not-a-map</code></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org9454547" class="outline-3">
<h3 id="org9454547">NodeFailure</h3>
<div class="outline-text-3" id="text-org9454547">
<p>
The multimethod <code>kdh.stax.node/stack-op-exec</code> takes a node and dispatches on <code>:op-type</code>.
To simplify error handling, it uses <a href="https://github.com/adambard/failjure">failjure</a>, a monadic library for errors.
In kdh.stax.errs, I define a <code>NodeFailure</code> record that implements the <code>failjure.core/HasFailed</code> protocol.
</p>
<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">defrecord</span> <span style="color: #9fcb66;">NodeFailure</span> [node err-msg]
  <span style="color: #9fcb66;">f</span>/HasFailed
  (failed? [self] <span style="color: #34c8d8; font-weight: bold;">true</span>)
  (message [self] (<span style="color: #34c8d8; font-weight: bold;">:err-msg</span> self)))
</pre>
</div>

<p>
<code>-&gt;NodeFailure</code> creates a new NodeFailure with the node and an err-msg.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(-&gt;NodeFailure start-node-template <span style="color: #ff7fff;">"Analysis Failed"</span>)

(=&gt; #kdh.stax.errs.NodeFailure
    {<span style="color: #34c8d8; font-weight: bold;">:node</span> {<span style="color: #34c8d8; font-weight: bold;">:op</span> &lt;&lt;start&gt;&gt;,
            <span style="color: #34c8d8; font-weight: bold;">:op-type</span> <span style="color: #34c8d8; font-weight: bold;">:</span><span style="color: #9fcb66;">kdh.stax.node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=start</span>,
            <span style="color: #34c8d8; font-weight: bold;">:needs</span> 0,
            <span style="color: #34c8d8; font-weight: bold;">:delta</span> 0,
            <span style="color: #34c8d8; font-weight: bold;">:op-index</span> [],
            <span style="color: #34c8d8; font-weight: bold;">:node-index</span> [],
            <span style="color: #34c8d8; font-weight: bold;">:branch</span> <span style="color: #34c8d8; font-weight: bold;">:start</span>,
            <span style="color: #34c8d8; font-weight: bold;">:dot-opts</span> {<span style="color: #34c8d8; font-weight: bold;">:shape</span> <span style="color: #34c8d8; font-weight: bold;">:point</span>}},
     <span style="color: #34c8d8; font-weight: bold;">:err-msg</span> <span style="color: #ff7fff;">"Analysis Failed"</span>} )
</pre>
</div>

<p>
The fail-node-if-&lt;Failure Case&gt; functions test and maybe fail conditions individually, returning a FailureNode containing one of the following errors:
</p>

<div class="org-src-container">
<pre class="src src-shell">find ~/clj/rpl/stax/src/ -type f -name <span style="color: #ff7fff;">'*.clj'</span> -print0 | xargs -0 grep fail-node-if | tr <span style="color: #ff7fff;">')]'</span> <span style="color: #ff7fff;">' '</span> | tr -s <span style="color: #ff7fff;">' '</span> | tr <span style="color: #ff7fff;">' '</span>  <span style="color: #ff7fff;">'\012'</span> | grep fail-node-if | sort | uniq
</pre>
</div>

<pre class="example">
- fail-node-if-invoke-apply-error
- fail-node-if-invoke-arity-error
- fail-node-if-invoke-fn-error
- fail-node-if-invoke-val-error
- fail-node-if-invoke-wrong-number-args
- fail-node-if-stack-empty
- fail-node-if-stack-not-vector
- fail-node-if-var-map-not-map
- fail-node-if-var-ref-not-defined
</pre>




<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">fail-node-if-&lt;Failure-Case&gt;</th>
<th scope="col" class="org-left">Error Returned in the FailureNode</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">invoke-apply-error</td>
<td class="org-left">:kdh.stax.errors/error=runtime-invoke-failed</td>
</tr>

<tr>
<td class="org-left">invoke-arity-error</td>
<td class="org-left">:kdh.stax.errors/error=runtime-insufficient-stack :kdh.stax.errors/error=runtime-invoke-arity-not-pos-int</td>
</tr>

<tr>
<td class="org-left">invoke-fn-error</td>
<td class="org-left">:kdh.stax.errors/error=runtime-invoke-fun-not-function</td>
</tr>

<tr>
<td class="org-left">invoke-val-error</td>
<td class="org-left">:kdh.stax.errors/error=runtime-invoke-returned-complex-val</td>
</tr>

<tr>
<td class="org-left">invoke-wrong-number-args</td>
<td class="org-left">:kdh.stax.errors/error=runtime-invoke-wrong-number-args</td>
</tr>

<tr>
<td class="org-left">stack-empty</td>
<td class="org-left">:kdh.stax.errors/error=runtime-insufficient-stack</td>
</tr>

<tr>
<td class="org-left">stack-not-vector</td>
<td class="org-left">:kdh.stax.errors/error=runtime-debug-stack-is-not-a-vector</td>
</tr>

<tr>
<td class="org-left">var-map-not-map</td>
<td class="org-left">:kdh.stax.errors/error=runtime-debug-var-map-is-not-a-map</td>
</tr>

<tr>
<td class="org-left">var-ref-not-defined</td>
<td class="org-left">:kdh.stax.errors/error=runtime-var-not-defined</td>
</tr>
</tbody>
</table>

<p>
The fail-node-do functions test and maybe fail on the multiple fail-node-if conditions:
</p>

<div class="org-src-container">
<pre class="src src-shell">find ../src/clj/kdh/stax/errs.clj -type f -name <span style="color: #ff7fff;">'*.clj'</span> -print0 | xargs -0 grep fail-node-do | grep defn | tr -s <span style="color: #ff7fff;">' '</span> | tr <span style="color: #ff7fff;">' '</span>  <span style="color: #ff7fff;">'\012'</span> | grep fail-node-do | sort | uniq
</pre>
</div>

<pre class="example" id="org29fe8f3">
- fail-node-do-def-var
- fail-node-do-invoke
- fail-node-do-pop
- fail-node-do-push-sef
- fail-node-do-push-var
</pre>

<ul class="org-ul">
<li>fail-node-do-def-var
<ul class="org-ul">
<li>fail-node-if-stack-not-vector</li>
<li>fail-node-if-stack-empty</li>
<li>fail-node-if-var-map-not-map</li>
</ul></li>
<li>fail-node-do-invoke
<ul class="org-ul">
<li>fail-node-if-stack-not-vector</li>
<li>fail-node-if-invoke-wrong-number-args</li>
<li>fail-node-if-invoke-fn-error</li>
<li>fail-node-if-invoke-arity-error</li>
<li>fail-node-if-invoke-apply-error</li>
<li>fail-node-if-invoke-val-error</li>
</ul></li>
<li>fail-node-do-pop
<ul class="org-ul">
<li>fail-node-if-stack-not-vector</li>
<li>fail-node-if-stack-empty</li>
</ul></li>
<li>fail-node-do-push-sef
<ul class="org-ul">
<li>fail-node-if-stack-not-vector</li>
</ul></li>
<li>fail-node-do-push-var
<ul class="org-ul">
<li>fail-node-if-var-map-not-map</li>
<li>fail-node-if-var-ref-not-defined</li>
<li>fail-node-if-stack-not-vector</li>
</ul></li>
</ul>

<p>
The <code>kdh.stax.nodify/stack-op-exec</code> methods call the fail-node-do functions and (on failure) return the <code>NodeFailure</code>'s node cleaned of by without keys <code>:stack</code> <code>:var-map</code> and <code>:stack-size</code> so that <code>exec-nodes</code> can return the failed node with its errors and trace.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defmethod</span> <span style="color: #ff996f;">stack-op-exec</span> <span style="color: #34c8d8; font-weight: bold;">::</span><span style="color: #9fcb66;">node</span><span style="color: #cfccd2; background-color: #25202a;">/</span><span style="color: #34c8d8; font-weight: bold;">op=pop</span>
  [node]
  (<span style="color: #9fcb66;">f</span>/if-let-failed? [node-or-fail (<span style="color: #9fcb66;">errs</span>/fail-node-do-pop node)]
                    (clean-failed-node node-or-fail)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc115ed3" class="outline-2">
<h2 id="orgc115ed3">Dynamic Variables</h2>
<div class="outline-text-2" id="text-orgc115ed3">
<dl class="org-dl">
<dt><code>*stax-require-simple-stack-values*</code></dt><dd><ul class="org-ul">
<li>default is <code>true</code></li>
<li>if true, checks arguments to defstackfn fn, and invoke return are simple &#x2013; i.e. self evaluating forms</li>
</ul></dd>
<dt><code>*stax-throw-on-error*</code></dt><dd><ul class="org-ul">
<li>default is <code>false</code></li>
<li>if true, throw on error; if false, return error as a keyword and print error report</li>
</ul></dd>
<dt><code>*stax-defstackfn-fails-on-errors*</code></dt><dd><ul class="org-ul">
<li>default is <code>true</code></li>
<li>if false, continue to the execution phase even though there are parse errors and/or static analysis errors</li>
<li>used for testing runtime equivalents of parse/static errors (see <a href="#org2ba9121">Error Zone Table</a> and <a href="#orgd0fd7c9">FLAGS Visualization</a>)</li>
</ul></dd>
<dt><code>*stax-perform-path-analysis*</code></dt><dd><ul class="org-ul">
<li>default is <code>true</code></li>
<li>if true, defstackfn performs static path analysis</li>
</ul></dd>
<dt><code>*stax-op-short-invoke&gt;*</code></dt><dd><ul class="org-ul">
<li>default is <code>nil</code></li>
<li>bind to a shorter name for <code>invoke&gt;</code> in the visualization (I use <code>★</code> for <code>invoke&gt;</code> in some examples).</li>
</ul></dd>
<dt><code>*stax-default-dot-options*</code></dt><dd><ul class="org-ul">
<li>default</li>
<li>graph, node, and edge properties for dot generation</li>
</ul></dd>
</dl>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>bb file bb/grepn-link.clj</label><pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> <span style="color: #4ac964;">*input*</span>
     (map #(<span style="color: #9fcb66;">str</span>/split <span style="color: #4ac964;">%</span> #<span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\s</span><span style="color: #ff7fff;">+"</span>))
     (map (<span style="color: #ffff0b;">fn</span> [[file num var]]
            (str <span style="color: #ff7fff;">"[[file:"</span> file <span style="color: #ff7fff;">"::"</span> num <span style="color: #ff7fff;">"]["</span> var <span style="color: #ff7fff;">"]]"</span>)))
     (run! println))
</pre>
</div>


<div class="org-src-container">
<pre class="src src-shell"><span style="color: #ff9029;">echo</span> <span style="color: #ff7fff;">"source-file pg dynamic-var"</span>
 find src/clj/kdh/stax/ -type f -name <span style="color: #ff7fff;">'*.clj'</span> -print0 | xargs -0 grep -n <span style="color: #ff7fff;">"\^:dynamic"</span> | cut -d: -f1-2,4 | tr <span style="color: #ff7fff;">':'</span> <span style="color: #ff7fff;">' '</span> | cut -d<span style="color: #ff7fff;">' '</span> -f1,2,4 
</pre>
</div>

<div class="org" id="orgffa5757">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">source-file</td>
<td class="org-right">pg</td>
<td class="org-left">dynamic-var</td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/errs.clj</td>
<td class="org-right">13</td>
<td class="org-left"><b>stax-require-simple-stack-values</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/errs.clj</td>
<td class="org-right">17</td>
<td class="org-left"><b>stax-defstackfn-fails-on-errors</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/errs.clj</td>
<td class="org-right">21</td>
<td class="org-left"><b>stax-throw-on-error</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/errs.clj</td>
<td class="org-right">25</td>
<td class="org-left"><b>stax-perform-path-analysis</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/errs.clj</td>
<td class="org-right">31</td>
<td class="org-left"><b>stax-errors-prevent-exec</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/svg.clj</td>
<td class="org-right">17</td>
<td class="org-left"><b>stax-op-short-invoke&gt;</b></td>
</tr>

<tr>
<td class="org-left">src/clj/kdh/stax/svg.clj</td>
<td class="org-right">20</td>
<td class="org-left"><b>default-dot-options</b></td>
</tr>
</tbody>
</table>

</div>
</div>
</div>

<div id="outline-container-orge49b9d3" class="outline-2">
<h2 id="orge49b9d3">Visualization</h2>
<div class="outline-text-2" id="text-orge49b9d3">
<p>
The node-data map returned by <code>kdh.stax.nodify/build-node-data</code> is large, and dificult to debug.
</p>
<p target="_blank">
<a href="https://github.com/djblue/portal" target="_blank">Portal</a> helped in diving into the data somewhat, but ever since I started working on this project, I wanted to display a graph of the op nodes in the <code>:node-tree</code> key of the node-data and I also wanted to visually represent overlays of <code>:paths</code> and <code>:results</code> data onto the node-tree. I've found that nothing beats a good visualization of data for the end user and the developer.
</p>
</div>
<div id="outline-container-org69c4c13" class="outline-3">
<h3 id="org69c4c13">Using Tangle to Generate dot</h3>
<div class="outline-text-3" id="text-org69c4c13">
<p target="_blank">
I looked into a few graphing libraries, but most seemed overly complex for the problem at hand: draw a simple tree of nodes and decorate them using the node-data.  I previously used graphviz to draw diagrams manually in dot format using emacs org-mode and babel dot code blocks. So I went back to look for clojure libraries that handle graphviz dot, and found a few, but settled on <a href="https://github.com/Macroz/tangle" target="_blank">tangle</a>.
</p>

<p>
<code>tangle.core/graph-&gt;dot</code> takes 3 args:
</p>
<ol class="org-ol">
<li>nodes :: a collection of ids or maps with :id key</li>
<li>edges :: a collection of vector of from-node id and and to-node ids with optional map of edge options</li>
<li>an optional map for dot graph, node, and edge defaults, plus some conversion functions.</li>
</ol>

<p>
As noted before, this website is written in org-mode, so I can show the tangle testing I did here:
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;</span> (<span style="color: #9fcb66;">tangle.core</span>/graph-&gt;dot [<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"b"</span> <span style="color: #ff7fff;">"c"</span>]              <span style="color: #767283; font-style: italic;">; nodes</span>
                            [[<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"b"</span>] [<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"c"</span>]]      <span style="color: #767283; font-style: italic;">; edges</span>
                            {<span style="color: #34c8d8; font-weight: bold;">:graph</span> {<span style="color: #34c8d8; font-weight: bold;">:rankdir</span> <span style="color: #34c8d8; font-weight: bold;">:LR</span>}})   <span style="color: #767283; font-style: italic;">; options</span>
    print)
</pre>
</div>

<p>
OK, that looks like dot syntax.  Now lets convert it to SVG:
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;</span> (<span style="color: #9fcb66;">tangle.core</span>/graph-&gt;dot [<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"b"</span> <span style="color: #ff7fff;">"c"</span>]              <span style="color: #767283; font-style: italic;">; nodes</span>
                            [[<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"b"</span>] [<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"c"</span>]]      <span style="color: #767283; font-style: italic;">; edges</span>
                            {<span style="color: #34c8d8; font-weight: bold;">:graph</span> {<span style="color: #34c8d8; font-weight: bold;">:rankdir</span> <span style="color: #34c8d8; font-weight: bold;">:LR</span>}})   <span style="color: #767283; font-style: italic;">; options</span>
    <span style="color: #9fcb66;">tangle.core</span>/dot-&gt;svg
    print)
</pre>
</div>

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="211pt" height="136pt"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.72 0.72) rotate(0) translate(4 94)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-94 148,-94 148,4 -4,4"/>
<!-- a -->
<g id="node1" class="node">
<title>a</title>
<ellipse fill="none" stroke="black" cx="27" cy="-45" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-41.3" font-family="Times,serif" font-size="14.00">a</text>
</g>
<!-- b -->
<g id="node2" class="node">
<title>b</title>
<ellipse fill="none" stroke="black" cx="117" cy="-72" rx="27" ry="18"/>
<text text-anchor="middle" x="117" y="-68.3" font-family="Times,serif" font-size="14.00">b</text>
</g>
<!-- a&#45;&#45;b -->
<g id="edge1" class="edge">
<title>a&#45;&#45;b</title>
<path fill="none" stroke="black" d="M52.05,-52.38C64.57,-56.22 79.82,-60.9 92.29,-64.72"/>
</g>
<!-- c -->
<g id="node3" class="node">
<title>c</title>
<ellipse fill="none" stroke="black" cx="117" cy="-18" rx="27" ry="18"/>
<text text-anchor="middle" x="117" y="-14.3" font-family="Times,serif" font-size="14.00">c</text>
</g>
<!-- a&#45;&#45;c -->
<g id="edge2" class="edge">
<title>a&#45;&#45;c</title>
<path fill="none" stroke="black" d="M52.05,-37.62C64.57,-33.78 79.82,-29.1 92.29,-25.28"/>
</g>
</g>
</svg>

<p>
Now a slightly more sophisticated tree like I want <code>if&gt;</code> to become:
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> (<span style="color: #9fcb66;">tangle.core</span>/graph-&gt;dot [{<span style="color: #34c8d8; font-weight: bold;">:id</span> <span style="color: #ff7fff;">"a"</span> <span style="color: #34c8d8; font-weight: bold;">:label</span> <span style="color: #ff7fff;">"if&amp;gt;"</span> <span style="color: #34c8d8; font-weight: bold;">:shape</span> <span style="color: #34c8d8; font-weight: bold;">:diamond</span>}    <span style="color: #767283; font-style: italic;">; nodes</span>
                              {<span style="color: #34c8d8; font-weight: bold;">:id</span> <span style="color: #ff7fff;">"b"</span> <span style="color: #34c8d8; font-weight: bold;">:label</span> <span style="color: #ff7fff;">"!b"</span>}
                              {<span style="color: #34c8d8; font-weight: bold;">:id</span> <span style="color: #ff7fff;">"c"</span> <span style="color: #34c8d8; font-weight: bold;">:label</span> <span style="color: #ff7fff;">"!c"</span>}]
                             [[<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"b"</span> {<span style="color: #34c8d8; font-weight: bold;">:label</span> <span style="color: #ff7fff;">"then"</span>}]                    <span style="color: #767283; font-style: italic;">; edges</span>
                              [<span style="color: #ff7fff;">"a"</span> <span style="color: #ff7fff;">"c"</span> {<span style="color: #34c8d8; font-weight: bold;">:label</span> <span style="color: #ff7fff;">"else"</span>}]]
                             {<span style="color: #34c8d8; font-weight: bold;">:graph</span> {<span style="color: #34c8d8; font-weight: bold;">:rankdir</span> <span style="color: #34c8d8; font-weight: bold;">:LR</span>}                        <span style="color: #767283; font-style: italic;">; options</span>
                              <span style="color: #34c8d8; font-weight: bold;">:node</span> {<span style="color: #34c8d8; font-weight: bold;">:shape</span> <span style="color: #34c8d8; font-weight: bold;">:box</span>}
                              <span style="color: #34c8d8; font-weight: bold;">:node-&gt;id</span> (<span style="color: #ffff0b;">fn</span> [n] (<span style="color: #ffff0b;">if</span> (keyword? n) (name n) (<span style="color: #34c8d8; font-weight: bold;">:id</span> n)))   <span style="color: #767283; font-style: italic;">; conversion functions</span>
                              <span style="color: #34c8d8; font-weight: bold;">:node-&gt;descriptor</span> (<span style="color: #ffff0b;">fn</span> [n] (<span style="color: #ffff0b;">when-not</span> (keyword? n) n))})
     <span style="color: #9fcb66;">tangle.core</span>/dot-&gt;svg
     print)
</pre>
</div>

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="254pt" height="136pt"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.72 0.72) rotate(0) translate(4 94)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-94 178.66,-94 178.66,4 -4,4"/>
<!-- a -->
<g id="a" class="node">
<title>a</title>
<polygon fill="none" stroke="black" points="30.33,-63 0.17,-45 30.33,-27 60.5,-45 30.33,-63"/>
<text text-anchor="middle" x="30.33" y="-41.3" font-family="Times,serif" font-size="14.00">if&gt;</text>
</g>
<!-- b -->
<g id="b" class="node">
<title>b</title>
<polygon fill="none" stroke="black" points="174.66,-90 120.66,-90 120.66,-54 174.66,-54 174.66,-90"/>
<text text-anchor="middle" x="147.66" y="-68.3" font-family="Times,serif" font-size="14.00">!b</text>
</g>
<!-- a&#45;&#45;b -->
<g id="edge1" class="edge">
<title>a&#45;&#45;b</title>
<path fill="none" stroke="black" d="M52.49,-49.95C71.6,-54.43 99.82,-61.03 120.38,-65.85"/>
<text text-anchor="middle" x="90.66" y="-63.8" font-family="Times,serif" font-size="14.00">then</text>
</g>
<!-- c -->
<g id="c" class="node">
<title>c</title>
<polygon fill="none" stroke="black" points="174.66,-36 120.66,-36 120.66,0 174.66,0 174.66,-36"/>
<text text-anchor="middle" x="147.66" y="-14.3" font-family="Times,serif" font-size="14.00">!c</text>
</g>
<!-- a&#45;&#45;c -->
<g id="edge2" class="edge">
<title>a&#45;&#45;c</title>
<path fill="none" stroke="black" d="M52.49,-40.05C71.6,-35.57 99.82,-28.97 120.38,-24.15"/>
<text text-anchor="middle" x="90.66" y="-36.8" font-family="Times,serif" font-size="14.00">else</text>
</g>
</g>
</svg>
</div>
</div>

<div id="outline-container-org2c80d2d" class="outline-3">
<h3 id="org2c80d2d">Turning Stax Node Data into dot and SVG</h3>
<div class="outline-text-3" id="text-org2c80d2d">
<p>
<code>kdh.stax.svg/paths-to-dot</code> takes node-data <code>:paths</code> and
</p>
<ul class="org-ul">
<li>generates deduplicated, labeled, and indexed nodes and edges</li>
<li>sorts the edges so graphviz generates then above else</li>
<li>and calls tangle.core/graph-&gt;dot to generate the dot</li>
</ul>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;</span> (build-node-data '[!a !b !c] '((if&gt; !a else&gt; !b)))
    <span style="color: #34c8d8; font-weight: bold;">:paths</span>
    paths-to-dot
    (<span style="color: #9fcb66;">str</span>/replace <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\\</span><span style="color: #ff7fff;">"</span> <span style="color: #ff7fff;">""</span>)   <span style="color: #767283; font-style: italic;">; necessary to unescape the brackets and colon in id which is a :node-index</span>
    print)
</pre>
</div>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;</span> (build-node-data '[!a !b !c] '((if&gt; !a else&gt; !b)))
    <span style="color: #34c8d8; font-weight: bold;">:paths</span>
    paths-to-dot
    (<span style="color: #9fcb66;">str</span>/replace <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\\</span><span style="color: #ff7fff;">"</span> <span style="color: #ff7fff;">""</span>)   <span style="color: #767283; font-style: italic;">; necessary to unescape the brackets and colon in id which is a :node-index</span>
    <span style="color: #9fcb66;">tangle.core</span>/dot-&gt;svg
    print)
</pre>
</div>

<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="325pt" height="94pt"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(0.72 0.72) rotate(0) translate(4 64)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-64 229.8,-64 229.8,4 -4,4"/>
<!-- [] -->
<g id="[]" class="node">
<title>[]</title>
<ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2"/>
</g>
<!-- [0] -->
<g id="[0]" class="node">
<title>[0]</title>
<polygon fill="none" stroke="black" points="90.4,-52.5 57.4,-29.5 90.4,-6.5 123.4,-29.5 90.4,-52.5"/>
<text text-anchor="middle" x="90.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text>
</g>
<!-- []&#45;&#45;[0] -->
<g id="edge1" class="edge">
<title>[]&#45;&#45;[0]</title>
<path fill="none" stroke="black" d="M14.57,-29.5C23.77,-29.5 41.4,-29.5 57.24,-29.5"/>
<text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text>
</g>
<!-- [0 :then 0] -->
<g id="[0 :then 0]" class="node">
<title>[0 :then 0]</title>
<polygon fill="none" stroke="black" points="193.9,-60 166.9,-60 166.9,-37 193.9,-37 193.9,-60"/>
<text text-anchor="middle" x="180.4" y="-44.8" font-family="Times,serif" font-size="14.00">!a</text>
</g>
<!-- [0]&#45;&#45;[0 :then 0] -->
<g id="edge2" class="edge">
<title>[0]&#45;&#45;[0 :then 0]</title>
<path fill="none" stroke="black" d="M115.91,-34.79C132.39,-38.35 153.44,-42.89 166.67,-45.75"/>
<text text-anchor="middle" x="144.9" y="-47.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text>
</g>
<!-- [0 :else 0] -->
<g id="[0 :else 0]" class="node">
<title>[0 :else 0]</title>
<polygon fill="none" stroke="black" points="194.4,-23 166.4,-23 166.4,0 194.4,0 194.4,-23"/>
<text text-anchor="middle" x="180.4" y="-7.8" font-family="Times,serif" font-size="14.00">!b</text>
</g>
<!-- [0]&#45;&#45;[0 :else 0] -->
<g id="edge3" class="edge">
<title>[0]&#45;&#45;[0 :else 0]</title>
<path fill="none" stroke="black" d="M111.88,-21.21C118.06,-19.02 124.92,-16.88 131.4,-15.5 143.01,-13.03 156.51,-12.07 166.23,-11.7"/>
<text text-anchor="middle" x="144.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text>
</g>
<!-- [0 :then 0 ] -->
<g id="[0 :then 0 ]" class="node">
<title>[0 :then 0 ]</title>
<ellipse fill="black" stroke="black" cx="218.6" cy="-48.5" rx="7.2" ry="7.2"/>
</g>
<!-- [0 :then 0]&#45;&#45;[0 :then 0 ] -->
<g id="edge4" class="edge">
<title>[0 :then 0]&#45;&#45;[0 :then 0 ]</title>
<path fill="none" stroke="black" d="M194.06,-48.5C199.93,-48.5 206.65,-48.5 211.4,-48.5"/>
</g>
<!-- [0 :else 0 ] -->
<g id="[0 :else 0 ]" class="node">
<title>[0 :else 0 ]</title>
<ellipse fill="black" stroke="black" cx="218.6" cy="-11.5" rx="7.2" ry="7.2"/>
</g>
<!-- [0 :else 0]&#45;&#45;[0 :else 0 ] -->
<g id="edge5" class="edge">
<title>[0 :else 0]&#45;&#45;[0 :else 0 ]</title>
<path fill="none" stroke="black" d="M194.47,-11.5C200.14,-11.5 206.53,-11.5 211.15,-11.5"/>
</g>
</g>
</svg>

<p>
In code, I use <code>tangle.core/dot-&gt;svg</code> and <code>clojure.data.xml/parse-str</code> to get the svg as edn for later maniplulation.
</p>

<p>
<code>kdh.stax.svg/add-svg-data</code> converts node-data <code>:paths</code> into dot node ids (strings of <code>:node-index</code>, which are unique) and edges (vector pairs of dot node ids) sometimes with labels (start, then, else) from node <code>:branch</code> values.  SVG is an xml vocabulary, which <code>clojure.data.xml/parse-string</code> turns into edn that can be manipulated with specter.  I like this multi-step process:  edn-&gt;dot then dot-&gt;svg then svg-&gt;edn because the intermediate dot and svg allow me to quickly play with dot and svg in org-mode.
</p>
</div>
</div>

<div id="outline-container-orge055040" class="outline-3">
<h3 id="orge055040">Visualition using <code>kdh.stax.svg</code></h3>
<div class="outline-text-3" id="text-orge055040">
<p>
<a id="orga2f11bd"></a>
</p>
</div>
<div id="outline-container-orgae5e7e8" class="outline-4">
<h4 id="orgae5e7e8">Visualizing the RPL Example</h4>
<div class="outline-text-4" id="text-orgae5e7e8">
<p>
The <code>add-svg-data</code> function in the namespace <code>kdh.stax.svg</code> converts the node-data <code>:nodes</code>, <code>:paths</code>, and <code>:results</code> into SVG.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">def</span> <span style="color: #4ac964;">RPL-EXAMPLE</span>
  (add-svg-data (stackfn-dbg (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-rpl-example))))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-clj"><span style="color: #9fcb66;">#'user</span>/RPL-EXAMPLE

</pre>
</div>
</div>

<div id="outline-container-org2d31705" class="outline-5">
<h5 id="org2d31705">Visualizing the RPL Example as a Parse Tree</h5>
<div class="outline-text-5" id="text-org2d31705">
<p>
The <code>node-data-to-stax-tree-xml</code> function in the namespace <code>kdh.stax.svg</code> returns the node-data svg xml decorated with errors in the <code>:nodes</code>.
</p>


<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> RPL-EXAMPLE
     node-data-to-stax-tree-xml
     div-stax-tree
     html
     print)
</pre>
</div>

<div class="stax-tree"><figure><figcaption>graph0</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1408" height="68" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1408 68"><g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 64)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-64 1403.8,-64 1403.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!a
</title><polygon fill="none" stroke="black" points="84.4,-41 57.4,-41 57.4,-18 84.4,-18 84.4,-41"></polygon><text text-anchor="middle" x="70.9" y="-25.8" font-family="Times,serif" font-size="14.00">!a</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.8,-29.5C24.88,-29.5 44.26,-29.5 57.14,-29.5"></path><text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=!b
</title><polygon fill="none" stroke="black" points="129.4,-41 101.4,-41 101.4,-18 129.4,-18 129.4,-41"></polygon><text text-anchor="middle" x="115.4" y="-25.8" font-family="Times,serif" font-size="14.00">!b</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M84.42,-29.5C89.71,-29.5 95.87,-29.5 101.23,-29.5"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=(invoke&gt; + 2)
</title><polygon fill="none" stroke="black" points="230.4,-41 146.4,-41 146.4,-18 230.4,-18 230.4,-41"></polygon><text text-anchor="middle" x="188.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; + 2</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M129.42,-29.5C134.31,-29.5 140.15,-29.5 146.23,-29.5"></path></g><g id="[3]" class="node"><title>:node-index=[3]
:op=!v1+
</title><polygon fill="none" stroke="black" points="290.4,-41 247.4,-41 247.4,-18 290.4,-18 290.4,-41"></polygon><text text-anchor="middle" x="268.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v1+</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M230.49,-29.5C236.28,-29.5 242.01,-29.5 247.19,-29.5"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!c
</title><polygon fill="none" stroke="black" points="334.4,-41 307.4,-41 307.4,-18 334.4,-18 334.4,-41"></polygon><text text-anchor="middle" x="320.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M290.53,-29.5C296.23,-29.5 302.24,-29.5 307.34,-29.5"></path></g><g id="[5]" class="node"><title>:node-index=[5]
:op=!c
</title><polygon fill="none" stroke="black" points="378.4,-41 351.4,-41 351.4,-18 378.4,-18 378.4,-41"></polygon><text text-anchor="middle" x="364.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M334.73,-29.5C339.94,-29.5 345.95,-29.5 351.15,-29.5"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="448.4,-41 395.4,-41 395.4,-18 448.4,-18 448.4,-41"></polygon><text text-anchor="middle" x="421.9" y="-25.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M378.66,-29.5C383.61,-29.5 389.46,-29.5 395.21,-29.5"></path></g><g id="[7]" class="node"><title>:node-index=[7]
:op=2
</title><polygon fill="none" stroke="black" points="488.4,-41 465.4,-41 465.4,-18 488.4,-18 488.4,-41"></polygon><text text-anchor="middle" x="476.9" y="-25.8" font-family="Times,serif" font-size="14.00">2</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M448.47,-29.5C454.4,-29.5 460.39,-29.5 465.25,-29.5"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=(invoke&gt; * 2)
</title><polygon fill="none" stroke="black" points="588.4,-41 505.4,-41 505.4,-18 588.4,-18 588.4,-41"></polygon><text text-anchor="middle" x="546.9" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M488.53,-29.5C493.23,-29.5 499.1,-29.5 505.26,-29.5"></path></g><g id="[9]" class="node"><title>:node-index=[9]
:op=!v2+
</title><polygon fill="none" stroke="black" points="648.4,-41 605.4,-41 605.4,-18 648.4,-18 648.4,-41"></polygon><text text-anchor="middle" x="626.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v2+</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M588.73,-29.5C594.48,-29.5 600.17,-29.5 605.32,-29.5"></path></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; = 2)
</title><polygon fill="none" stroke="black" points="749.4,-41 665.4,-41 665.4,-18 749.4,-18 749.4,-41"></polygon><text text-anchor="middle" x="707.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; = 2</text></g><g id="[9]--[10]" class="edge"><path fill="none" stroke="black" d="M648.52,-29.5C653.7,-29.5 659.45,-29.5 665.24,-29.5"></path></g><g id="[11]" class="node"><title>:node-index=[11]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="799.4,-52.5 766.4,-29.5 799.4,-6.5 832.4,-29.5 799.4,-52.5"></polygon><text text-anchor="middle" x="799.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[10]--[11]" class="edge"><path fill="none" stroke="black" d="M749.45,-29.5C755.11,-29.5 760.85,-29.5 766.31,-29.5"></path></g><g id="[11 :then 0]" class="node"><title>:node-index=[11 :then 0]
:op=!v1
</title><polygon fill="none" stroke="black" points="924.4,-60 889.4,-60 889.4,-37 924.4,-37 924.4,-60"></polygon><text text-anchor="middle" x="906.9" y="-44.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11]--[11 :then 0]" class="edge"><path fill="none" stroke="black" d="M825.94,-34.1C845.57,-37.64 872.14,-42.42 889.15,-45.48"></path><text text-anchor="middle" x="853.9" y="-44.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[11 :else 0]" class="node"><title>:node-index=[11 :else 0]
:op=false!!
</title><polygon fill="none" stroke="black" points="938.4,-23 875.4,-23 875.4,0 938.4,0 938.4,-23"></polygon><text text-anchor="middle" x="906.9" y="-7.8" font-family="Times,serif" font-size="14.00">"false!!"</text></g><g id="[11]--[11 :else 0]" class="edge"><path fill="none" stroke="black" d="M820.86,-21.12C827.04,-18.93 833.91,-16.81 840.4,-15.5 851.68,-13.23 864.25,-12.13 875.35,-11.62"></path><text text-anchor="middle" x="853.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[11 :then 1]" class="node"><title>:node-index=[11 :then 1]
:op=!v2
</title><polygon fill="none" stroke="black" points="1028.9,-60 993.9,-60 993.9,-37 1028.9,-37 1028.9,-60"></polygon><text text-anchor="middle" x="1011.4" y="-44.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :then 0]--[11 :then 1]" class="edge"><path fill="none" stroke="black" d="M924.83,-48.5C943.93,-48.5 974.81,-48.5 993.79,-48.5"></path></g><g id="[11 :then 2]" class="node"><title>:node-index=[11 :then 2]
:op=(invoke&gt; - 2)
</title><polygon fill="none" stroke="black" points="1164.4,-60 1084.4,-60 1084.4,-37 1164.4,-37 1164.4,-60"></polygon><text text-anchor="middle" x="1124.4" y="-44.8" font-family="Times,serif" font-size="14.00">invoke&gt; - 2</text></g><g id="[11 :then 1]--[11 :then 2]" class="edge"><path fill="none" stroke="black" d="M1029.26,-48.5C1043.81,-48.5 1065.41,-48.5 1084.25,-48.5"></path></g><g id="[11 :then 2 ]" class="node"><title>:node-index=[11 :then 2 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1198.9" cy="-48.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :then 2]--[11 :then 2 ]" class="edge"><path fill="none" stroke="black" d="M1164.62,-48.5C1175.03,-48.5 1185.11,-48.5 1191.4,-48.5"></path></g><g id="[11 :else 1]" class="node"><title>:node-index=[11 :else 1]
:op=(invoke&gt; println 1)
</title><polygon fill="none" stroke="black" points="1067.4,-23 955.4,-23 955.4,0 1067.4,0 1067.4,-23"></polygon><text text-anchor="middle" x="1011.4" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; println 1</text></g><g id="[11 :else 0]--[11 :else 1]" class="edge"><path fill="none" stroke="black" d="M938.65,-11.5C943.96,-11.5 949.62,-11.5 955.34,-11.5"></path></g><g id="[11 :else 2]" class="node"><title>:node-index=[11 :else 2]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="1150.9,-23 1097.9,-23 1097.9,0 1150.9,0 1150.9,-23"></polygon><text text-anchor="middle" x="1124.4" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[11 :else 1]--[11 :else 2]" class="edge"><path fill="none" stroke="black" d="M1067.57,-11.5C1078.13,-11.5 1088.7,-11.5 1097.76,-11.5"></path></g><g id="[11 :else 3]" class="node"><title>:node-index=[11 :else 3]
:op=!v1
</title><polygon fill="none" stroke="black" points="1216.4,-23 1181.4,-23 1181.4,0 1216.4,0 1216.4,-23"></polygon><text text-anchor="middle" x="1198.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11 :else 2]--[11 :else 3]" class="edge"><path fill="none" stroke="black" d="M1151.16,-11.5C1161.1,-11.5 1172.18,-11.5 1181.05,-11.5"></path></g><g id="[11 :else 4]" class="node"><title>:node-index=[11 :else 4]
:op=!v2
</title><polygon fill="none" stroke="black" points="1268.4,-23 1233.4,-23 1233.4,0 1268.4,0 1268.4,-23"></polygon><text text-anchor="middle" x="1250.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :else 3]--[11 :else 4]" class="edge"><path fill="none" stroke="black" d="M1216.55,-11.5C1221.89,-11.5 1227.81,-11.5 1233.15,-11.5"></path></g><g id="[11 :else 5]" class="node"><title>:node-index=[11 :else 5]
:op=(invoke&gt; * 2)
</title><polygon fill="none" stroke="black" points="1368.4,-23 1285.4,-23 1285.4,0 1368.4,0 1368.4,-23"></polygon><text text-anchor="middle" x="1326.9" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[11 :else 4]--[11 :else 5]" class="edge"><path fill="none" stroke="black" d="M1268.69,-11.5C1273.72,-11.5 1279.47,-11.5 1285.35,-11.5"></path></g><g id="[11 :else 5 ]" class="node"><title>:node-index=[11 :else 5 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1392.6" cy="-11.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :else 5]--[11 :else 5 ]" class="edge"><path fill="none" stroke="black" d="M1368.6,-11.5C1375.04,-11.5 1380.95,-11.5 1385.17,-11.5"></path></g></g></svg></figure></div>

<ul class="org-ul">
<li>The Gray/Black diagram above is the Parse Tree visualization
<ul class="org-ul">
<li>It is the svg representation of the node-data's <code>:node-tree</code> with errors from <code>:nodes</code> overlayed</li>
<li>If you hover over any node, you should see a popup with <code>:op</code> and <code>:node-index</code></li>
<li><code>:node-index</code> is an alternating vector of numbers (index in the straight section) and keywords (<code>:then</code> or <code>:else</code>) for branch followed.</li>
<li>Note that all the nodes are Gray (indicating no parse errors) and the edges are black (always the case in the parse tree).</li>
</ul></li>
</ul>
<hr />
</div>
</div>

<div id="outline-container-orga8bed54" class="outline-5">
<h5 id="orga8bed54">Visualizing the RPL Example as Paths</h5>
<div class="outline-text-5" id="text-orga8bed54">
<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> RPL-EXAMPLE
     node-data-to-stax-paths-xml
     div-stax-paths
     html
     print)
</pre>
</div>

<div class="stax-paths"><div class="stax-path"><figure><figcaption>graph0-path1 : [start&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1408" height="68" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1408 68"><g id="graph0-path1 : [start&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 64)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-64 1403.8,-64 1403.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!a
:stack-size=1
</title><polygon fill="none" stroke="black" points="84.4,-41 57.4,-41 57.4,-18 84.4,-18 84.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="70.9" y="-25.8" font-family="Times,serif" font-size="14.00">!a</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.8,-29.5C24.88,-29.5 44.26,-29.5 57.14,-29.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=!b
:stack-size=2
</title><polygon fill="none" stroke="black" points="129.4,-41 101.4,-41 101.4,-18 129.4,-18 129.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="115.4" y="-25.8" font-family="Times,serif" font-size="14.00">!b</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M84.42,-29.5C89.71,-29.5 95.87,-29.5 101.23,-29.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=(invoke&gt; + 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="230.4,-41 146.4,-41 146.4,-18 230.4,-18 230.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="188.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; + 2</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M129.42,-29.5C134.31,-29.5 140.15,-29.5 146.23,-29.5" data-stax-path="good"></path></g><g id="[3]" class="node"><title>:node-index=[3]
:op=!v1+
:stack-size=1
</title><polygon fill="none" stroke="black" points="290.4,-41 247.4,-41 247.4,-18 290.4,-18 290.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="268.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v1+</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M230.49,-29.5C236.28,-29.5 242.01,-29.5 247.19,-29.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!c
:stack-size=2
</title><polygon fill="none" stroke="black" points="334.4,-41 307.4,-41 307.4,-18 334.4,-18 334.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="320.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M290.53,-29.5C296.23,-29.5 302.24,-29.5 307.34,-29.5" data-stax-path="good"></path></g><g id="[5]" class="node"><title>:node-index=[5]
:op=!c
:stack-size=3
</title><polygon fill="none" stroke="black" points="378.4,-41 351.4,-41 351.4,-18 378.4,-18 378.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="364.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M334.73,-29.5C339.94,-29.5 345.95,-29.5 351.15,-29.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=&lt;pop&gt;
:stack-size=2
</title><polygon fill="none" stroke="black" points="448.4,-41 395.4,-41 395.4,-18 448.4,-18 448.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="421.9" y="-25.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M378.66,-29.5C383.61,-29.5 389.46,-29.5 395.21,-29.5" data-stax-path="good"></path></g><g id="[7]" class="node"><title>:node-index=[7]
:op=2
:stack-size=3
</title><polygon fill="none" stroke="black" points="488.4,-41 465.4,-41 465.4,-18 488.4,-18 488.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="476.9" y="-25.8" font-family="Times,serif" font-size="14.00">2</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M448.47,-29.5C454.4,-29.5 460.39,-29.5 465.25,-29.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=(invoke&gt; * 2)
:stack-size=2
</title><polygon fill="none" stroke="black" points="588.4,-41 505.4,-41 505.4,-18 588.4,-18 588.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="546.9" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M488.53,-29.5C493.23,-29.5 499.1,-29.5 505.26,-29.5" data-stax-path="good"></path></g><g id="[9]" class="node"><title>:node-index=[9]
:op=!v2+
:stack-size=2
</title><polygon fill="none" stroke="black" points="648.4,-41 605.4,-41 605.4,-18 648.4,-18 648.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="626.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v2+</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M588.73,-29.5C594.48,-29.5 600.17,-29.5 605.32,-29.5" data-stax-path="good"></path></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; = 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="749.4,-41 665.4,-41 665.4,-18 749.4,-18 749.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="707.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; = 2</text></g><g id="[9]--[10]" class="edge"><path fill="none" stroke="black" d="M648.52,-29.5C653.7,-29.5 659.45,-29.5 665.24,-29.5" data-stax-path="good"></path></g><g id="[11]" class="node"><title>:node-index=[11]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="799.4,-52.5 766.4,-29.5 799.4,-6.5 832.4,-29.5 799.4,-52.5" data-stax-path="good"></polygon><text text-anchor="middle" x="799.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[10]--[11]" class="edge"><path fill="none" stroke="black" d="M749.45,-29.5C755.11,-29.5 760.85,-29.5 766.31,-29.5" data-stax-path="good"></path></g><g id="[11 :then 0]" class="node"><title>:node-index=[11 :then 0]
:op=!v1
:stack-size=1
</title><polygon fill="none" stroke="black" points="924.4,-60 889.4,-60 889.4,-37 924.4,-37 924.4,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="906.9" y="-44.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11]--[11 :then 0]" class="edge"><path fill="none" stroke="black" d="M825.94,-34.1C845.57,-37.64 872.14,-42.42 889.15,-45.48" data-stax-path="good"></path><text text-anchor="middle" x="853.9" y="-44.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[11 :else 0]" class="node"><title>:node-index=[11 :else 0]
:op=false!!
</title><polygon fill="none" stroke="black" points="938.4,-23 875.4,-23 875.4,0 938.4,0 938.4,-23"></polygon><text text-anchor="middle" x="906.9" y="-7.8" font-family="Times,serif" font-size="14.00">"false!!"</text></g><g id="[11]--[11 :else 0]" class="edge"><path fill="none" stroke="black" d="M820.86,-21.12C827.04,-18.93 833.91,-16.81 840.4,-15.5 851.68,-13.23 864.25,-12.13 875.35,-11.62"></path><text text-anchor="middle" x="853.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[11 :then 1]" class="node"><title>:node-index=[11 :then 1]
:op=!v2
:stack-size=2
</title><polygon fill="none" stroke="black" points="1028.9,-60 993.9,-60 993.9,-37 1028.9,-37 1028.9,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="1011.4" y="-44.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :then 0]--[11 :then 1]" class="edge"><path fill="none" stroke="black" d="M924.83,-48.5C943.93,-48.5 974.81,-48.5 993.79,-48.5" data-stax-path="good"></path></g><g id="[11 :then 2]" class="node"><title>:node-index=[11 :then 2]
:op=(invoke&gt; - 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="1164.4,-60 1084.4,-60 1084.4,-37 1164.4,-37 1164.4,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.4" y="-44.8" font-family="Times,serif" font-size="14.00">invoke&gt; - 2</text></g><g id="[11 :then 1]--[11 :then 2]" class="edge"><path fill="none" stroke="black" d="M1029.26,-48.5C1043.81,-48.5 1065.41,-48.5 1084.25,-48.5" data-stax-path="good"></path></g><g id="[11 :then 2 ]" class="node"><title>:node-index=[11 :then 2 ]
:op=&lt;&lt;term&gt;&gt;
:stack-size=1
</title><ellipse fill="black" stroke="black" cx="1198.9" cy="-48.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[11 :then 2]--[11 :then 2 ]" class="edge"><path fill="none" stroke="black" d="M1164.62,-48.5C1175.03,-48.5 1185.11,-48.5 1191.4,-48.5" data-stax-path="good"></path></g><g id="[11 :else 1]" class="node"><title>:node-index=[11 :else 1]
:op=(invoke&gt; println 1)
</title><polygon fill="none" stroke="black" points="1067.4,-23 955.4,-23 955.4,0 1067.4,0 1067.4,-23"></polygon><text text-anchor="middle" x="1011.4" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; println 1</text></g><g id="[11 :else 0]--[11 :else 1]" class="edge"><path fill="none" stroke="black" d="M938.65,-11.5C943.96,-11.5 949.62,-11.5 955.34,-11.5"></path></g><g id="[11 :else 2]" class="node"><title>:node-index=[11 :else 2]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="1150.9,-23 1097.9,-23 1097.9,0 1150.9,0 1150.9,-23"></polygon><text text-anchor="middle" x="1124.4" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[11 :else 1]--[11 :else 2]" class="edge"><path fill="none" stroke="black" d="M1067.57,-11.5C1078.13,-11.5 1088.7,-11.5 1097.76,-11.5"></path></g><g id="[11 :else 3]" class="node"><title>:node-index=[11 :else 3]
:op=!v1
</title><polygon fill="none" stroke="black" points="1216.4,-23 1181.4,-23 1181.4,0 1216.4,0 1216.4,-23"></polygon><text text-anchor="middle" x="1198.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11 :else 2]--[11 :else 3]" class="edge"><path fill="none" stroke="black" d="M1151.16,-11.5C1161.1,-11.5 1172.18,-11.5 1181.05,-11.5"></path></g><g id="[11 :else 4]" class="node"><title>:node-index=[11 :else 4]
:op=!v2
</title><polygon fill="none" stroke="black" points="1268.4,-23 1233.4,-23 1233.4,0 1268.4,0 1268.4,-23"></polygon><text text-anchor="middle" x="1250.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :else 3]--[11 :else 4]" class="edge"><path fill="none" stroke="black" d="M1216.55,-11.5C1221.89,-11.5 1227.81,-11.5 1233.15,-11.5"></path></g><g id="[11 :else 5]" class="node"><title>:node-index=[11 :else 5]
:op=(invoke&gt; * 2)
</title><polygon fill="none" stroke="black" points="1368.4,-23 1285.4,-23 1285.4,0 1368.4,0 1368.4,-23"></polygon><text text-anchor="middle" x="1326.9" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[11 :else 4]--[11 :else 5]" class="edge"><path fill="none" stroke="black" d="M1268.69,-11.5C1273.72,-11.5 1279.47,-11.5 1285.35,-11.5"></path></g><g id="[11 :else 5 ]" class="node"><title>:node-index=[11 :else 5 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1392.6" cy="-11.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :else 5]--[11 :else 5 ]" class="edge"><path fill="none" stroke="black" d="M1368.6,-11.5C1375.04,-11.5 1380.95,-11.5 1385.17,-11.5"></path></g></g></svg></figure></div><div class="stax-path"><figure><figcaption>graph0-path2 : [start&rarr;else&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1408" height="68" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1408 68"><g id="graph0-path2 : [start&amp;rarr;else&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 64)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-64 1403.8,-64 1403.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!a
:stack-size=1
</title><polygon fill="none" stroke="black" points="84.4,-41 57.4,-41 57.4,-18 84.4,-18 84.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="70.9" y="-25.8" font-family="Times,serif" font-size="14.00">!a</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.8,-29.5C24.88,-29.5 44.26,-29.5 57.14,-29.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=!b
:stack-size=2
</title><polygon fill="none" stroke="black" points="129.4,-41 101.4,-41 101.4,-18 129.4,-18 129.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="115.4" y="-25.8" font-family="Times,serif" font-size="14.00">!b</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M84.42,-29.5C89.71,-29.5 95.87,-29.5 101.23,-29.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=(invoke&gt; + 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="230.4,-41 146.4,-41 146.4,-18 230.4,-18 230.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="188.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; + 2</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M129.42,-29.5C134.31,-29.5 140.15,-29.5 146.23,-29.5" data-stax-path="good"></path></g><g id="[3]" class="node"><title>:node-index=[3]
:op=!v1+
:stack-size=1
</title><polygon fill="none" stroke="black" points="290.4,-41 247.4,-41 247.4,-18 290.4,-18 290.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="268.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v1+</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M230.49,-29.5C236.28,-29.5 242.01,-29.5 247.19,-29.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!c
:stack-size=2
</title><polygon fill="none" stroke="black" points="334.4,-41 307.4,-41 307.4,-18 334.4,-18 334.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="320.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M290.53,-29.5C296.23,-29.5 302.24,-29.5 307.34,-29.5" data-stax-path="good"></path></g><g id="[5]" class="node"><title>:node-index=[5]
:op=!c
:stack-size=3
</title><polygon fill="none" stroke="black" points="378.4,-41 351.4,-41 351.4,-18 378.4,-18 378.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="364.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M334.73,-29.5C339.94,-29.5 345.95,-29.5 351.15,-29.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=&lt;pop&gt;
:stack-size=2
</title><polygon fill="none" stroke="black" points="448.4,-41 395.4,-41 395.4,-18 448.4,-18 448.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="421.9" y="-25.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M378.66,-29.5C383.61,-29.5 389.46,-29.5 395.21,-29.5" data-stax-path="good"></path></g><g id="[7]" class="node"><title>:node-index=[7]
:op=2
:stack-size=3
</title><polygon fill="none" stroke="black" points="488.4,-41 465.4,-41 465.4,-18 488.4,-18 488.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="476.9" y="-25.8" font-family="Times,serif" font-size="14.00">2</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M448.47,-29.5C454.4,-29.5 460.39,-29.5 465.25,-29.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=(invoke&gt; * 2)
:stack-size=2
</title><polygon fill="none" stroke="black" points="588.4,-41 505.4,-41 505.4,-18 588.4,-18 588.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="546.9" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M488.53,-29.5C493.23,-29.5 499.1,-29.5 505.26,-29.5" data-stax-path="good"></path></g><g id="[9]" class="node"><title>:node-index=[9]
:op=!v2+
:stack-size=2
</title><polygon fill="none" stroke="black" points="648.4,-41 605.4,-41 605.4,-18 648.4,-18 648.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="626.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v2+</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M588.73,-29.5C594.48,-29.5 600.17,-29.5 605.32,-29.5" data-stax-path="good"></path></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; = 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="749.4,-41 665.4,-41 665.4,-18 749.4,-18 749.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="707.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; = 2</text></g><g id="[9]--[10]" class="edge"><path fill="none" stroke="black" d="M648.52,-29.5C653.7,-29.5 659.45,-29.5 665.24,-29.5" data-stax-path="good"></path></g><g id="[11]" class="node"><title>:node-index=[11]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="799.4,-52.5 766.4,-29.5 799.4,-6.5 832.4,-29.5 799.4,-52.5" data-stax-path="good"></polygon><text text-anchor="middle" x="799.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[10]--[11]" class="edge"><path fill="none" stroke="black" d="M749.45,-29.5C755.11,-29.5 760.85,-29.5 766.31,-29.5" data-stax-path="good"></path></g><g id="[11 :then 0]" class="node"><title>:node-index=[11 :then 0]
:op=!v1
</title><polygon fill="none" stroke="black" points="924.4,-60 889.4,-60 889.4,-37 924.4,-37 924.4,-60"></polygon><text text-anchor="middle" x="906.9" y="-44.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11]--[11 :then 0]" class="edge"><path fill="none" stroke="black" d="M825.94,-34.1C845.57,-37.64 872.14,-42.42 889.15,-45.48"></path><text text-anchor="middle" x="853.9" y="-44.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[11 :else 0]" class="node"><title>:node-index=[11 :else 0]
:op=false!!
:stack-size=1
</title><polygon fill="none" stroke="black" points="938.4,-23 875.4,-23 875.4,0 938.4,0 938.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="906.9" y="-7.8" font-family="Times,serif" font-size="14.00">"false!!"</text></g><g id="[11]--[11 :else 0]" class="edge"><path fill="none" stroke="black" d="M820.86,-21.12C827.04,-18.93 833.91,-16.81 840.4,-15.5 851.68,-13.23 864.25,-12.13 875.35,-11.62" data-stax-path="good"></path><text text-anchor="middle" x="853.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[11 :then 1]" class="node"><title>:node-index=[11 :then 1]
:op=!v2
</title><polygon fill="none" stroke="black" points="1028.9,-60 993.9,-60 993.9,-37 1028.9,-37 1028.9,-60"></polygon><text text-anchor="middle" x="1011.4" y="-44.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :then 0]--[11 :then 1]" class="edge"><path fill="none" stroke="black" d="M924.83,-48.5C943.93,-48.5 974.81,-48.5 993.79,-48.5"></path></g><g id="[11 :then 2]" class="node"><title>:node-index=[11 :then 2]
:op=(invoke&gt; - 2)
</title><polygon fill="none" stroke="black" points="1164.4,-60 1084.4,-60 1084.4,-37 1164.4,-37 1164.4,-60"></polygon><text text-anchor="middle" x="1124.4" y="-44.8" font-family="Times,serif" font-size="14.00">invoke&gt; - 2</text></g><g id="[11 :then 1]--[11 :then 2]" class="edge"><path fill="none" stroke="black" d="M1029.26,-48.5C1043.81,-48.5 1065.41,-48.5 1084.25,-48.5"></path></g><g id="[11 :then 2 ]" class="node"><title>:node-index=[11 :then 2 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1198.9" cy="-48.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :then 2]--[11 :then 2 ]" class="edge"><path fill="none" stroke="black" d="M1164.62,-48.5C1175.03,-48.5 1185.11,-48.5 1191.4,-48.5"></path></g><g id="[11 :else 1]" class="node"><title>:node-index=[11 :else 1]
:op=(invoke&gt; println 1)
:stack-size=1
</title><polygon fill="none" stroke="black" points="1067.4,-23 955.4,-23 955.4,0 1067.4,0 1067.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1011.4" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; println 1</text></g><g id="[11 :else 0]--[11 :else 1]" class="edge"><path fill="none" stroke="black" d="M938.65,-11.5C943.96,-11.5 949.62,-11.5 955.34,-11.5" data-stax-path="good"></path></g><g id="[11 :else 2]" class="node"><title>:node-index=[11 :else 2]
:op=&lt;pop&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="1150.9,-23 1097.9,-23 1097.9,0 1150.9,0 1150.9,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.4" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[11 :else 1]--[11 :else 2]" class="edge"><path fill="none" stroke="black" d="M1067.57,-11.5C1078.13,-11.5 1088.7,-11.5 1097.76,-11.5" data-stax-path="good"></path></g><g id="[11 :else 3]" class="node"><title>:node-index=[11 :else 3]
:op=!v1
:stack-size=1
</title><polygon fill="none" stroke="black" points="1216.4,-23 1181.4,-23 1181.4,0 1216.4,0 1216.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1198.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11 :else 2]--[11 :else 3]" class="edge"><path fill="none" stroke="black" d="M1151.16,-11.5C1161.1,-11.5 1172.18,-11.5 1181.05,-11.5" data-stax-path="good"></path></g><g id="[11 :else 4]" class="node"><title>:node-index=[11 :else 4]
:op=!v2
:stack-size=2
</title><polygon fill="none" stroke="black" points="1268.4,-23 1233.4,-23 1233.4,0 1268.4,0 1268.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1250.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :else 3]--[11 :else 4]" class="edge"><path fill="none" stroke="black" d="M1216.55,-11.5C1221.89,-11.5 1227.81,-11.5 1233.15,-11.5" data-stax-path="good"></path></g><g id="[11 :else 5]" class="node"><title>:node-index=[11 :else 5]
:op=(invoke&gt; * 2)
:stack-size=1
</title><polygon fill="none" stroke="black" points="1368.4,-23 1285.4,-23 1285.4,0 1368.4,0 1368.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1326.9" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[11 :else 4]--[11 :else 5]" class="edge"><path fill="none" stroke="black" d="M1268.69,-11.5C1273.72,-11.5 1279.47,-11.5 1285.35,-11.5" data-stax-path="good"></path></g><g id="[11 :else 5 ]" class="node"><title>:node-index=[11 :else 5 ]
:op=&lt;&lt;term&gt;&gt;
:stack-size=1
</title><ellipse fill="black" stroke="black" cx="1392.6" cy="-11.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[11 :else 5]--[11 :else 5 ]" class="edge"><path fill="none" stroke="black" d="M1368.6,-11.5C1375.04,-11.5 1380.95,-11.5 1385.17,-11.5" data-stax-path="good"></path></g></g></svg></figure></div></div>

<ul class="org-ul">
<li>The Blue diagram above is the Path Analysis visualization
<ul class="org-ul">
<li>It is the svg representation of the node-data's <code>:node-tree</code> with errors from <code>:paths</code> overlayed</li>
<li>Each path is shown with its edge and node polygon strokes in blue</li>
<li>Note the turns vector in the figure caption.
<ul class="org-ul">
<li>[start→then→term] after the name "graph0-path1"</li>
<li>[start→else→term] after the name "graph0-path2"</li>
</ul></li>
<li>As with the Parse Tree, if you hover over any node here, you will see <code>:op</code> and <code>:node-index</code></li>
<li>Additionally, you will see <code>:stack-size</code> if your hover over a blue node (i.e. a node in path)
<ul class="org-ul">
<li><code>:stack-size</code> is the predicted size of the stack derived by adding each <code>:delta</code> in path starting from the start node (where it is 0)</li>
</ul></li>
</ul></li>
</ul>
<hr />
</div>
</div>

<div id="outline-container-org6c5b158" class="outline-5">
<h5 id="org6c5b158">RPL Example: Runtime</h5>
<div class="outline-text-5" id="text-org6c5b158">
<p>
Now that we've seen there are no parse errors and static analysis found no path errors, we can expect <code>stackfn-dbg</code> to produce results when called with values.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">-&gt;&gt;</span> (stackfn-dbg RPL-EXAMPLE
                  1 2 4, 3 3 3)
     add-svg-data
     node-data-to-stax-execs-xml
     div-stax-execs
     html
     print)
</pre>
</div>

<div class="stax-execs"><div class="stax-exec"><figure><figcaption>graph0-result1 : [start&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1408" height="68" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1408 68"><g id="graph0-result1 : [start&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 64)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-64 1403.8,-64 1403.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!a 1, !b 2, !c 4}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!a
:var-map={!a 1, !b 2, !c 4}
:stack=[1]
</title><polygon fill="none" stroke="black" points="84.4,-41 57.4,-41 57.4,-18 84.4,-18 84.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="70.9" y="-25.8" font-family="Times,serif" font-size="14.00">!a</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.8,-29.5C24.88,-29.5 44.26,-29.5 57.14,-29.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=!b
:var-map={!a 1, !b 2, !c 4}
:stack=[1 2]
</title><polygon fill="none" stroke="black" points="129.4,-41 101.4,-41 101.4,-18 129.4,-18 129.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="115.4" y="-25.8" font-family="Times,serif" font-size="14.00">!b</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M84.42,-29.5C89.71,-29.5 95.87,-29.5 101.23,-29.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=(invoke&gt; + 2)
:var-map={!a 1, !b 2, !c 4}
:stack=[3]
</title><polygon fill="none" stroke="black" points="230.4,-41 146.4,-41 146.4,-18 230.4,-18 230.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="188.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; + 2</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M129.42,-29.5C134.31,-29.5 140.15,-29.5 146.23,-29.5" data-stax-path="good"></path></g><g id="[3]" class="node"><title>:node-index=[3]
:op=!v1+
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3]
</title><polygon fill="none" stroke="black" points="290.4,-41 247.4,-41 247.4,-18 290.4,-18 290.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="268.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v1+</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M230.49,-29.5C236.28,-29.5 242.01,-29.5 247.19,-29.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!c
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3 4]
</title><polygon fill="none" stroke="black" points="334.4,-41 307.4,-41 307.4,-18 334.4,-18 334.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="320.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M290.53,-29.5C296.23,-29.5 302.24,-29.5 307.34,-29.5" data-stax-path="good"></path></g><g id="[5]" class="node"><title>:node-index=[5]
:op=!c
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3 4 4]
</title><polygon fill="none" stroke="black" points="378.4,-41 351.4,-41 351.4,-18 378.4,-18 378.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="364.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M334.73,-29.5C339.94,-29.5 345.95,-29.5 351.15,-29.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=&lt;pop&gt;
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3 4]
</title><polygon fill="none" stroke="black" points="448.4,-41 395.4,-41 395.4,-18 448.4,-18 448.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="421.9" y="-25.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M378.66,-29.5C383.61,-29.5 389.46,-29.5 395.21,-29.5" data-stax-path="good"></path></g><g id="[7]" class="node"><title>:node-index=[7]
:op=2
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3 4 2]
</title><polygon fill="none" stroke="black" points="488.4,-41 465.4,-41 465.4,-18 488.4,-18 488.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="476.9" y="-25.8" font-family="Times,serif" font-size="14.00">2</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M448.47,-29.5C454.4,-29.5 460.39,-29.5 465.25,-29.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=(invoke&gt; * 2)
:var-map={!a 1, !b 2, !c 4, !v1 3}
:stack=[3 8]
</title><polygon fill="none" stroke="black" points="588.4,-41 505.4,-41 505.4,-18 588.4,-18 588.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="546.9" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M488.53,-29.5C493.23,-29.5 499.1,-29.5 505.26,-29.5" data-stax-path="good"></path></g><g id="[9]" class="node"><title>:node-index=[9]
:op=!v2+
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[3 8]
</title><polygon fill="none" stroke="black" points="648.4,-41 605.4,-41 605.4,-18 648.4,-18 648.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="626.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v2+</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M588.73,-29.5C594.48,-29.5 600.17,-29.5 605.32,-29.5" data-stax-path="good"></path></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; = 2)
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[false]
</title><polygon fill="none" stroke="black" points="749.4,-41 665.4,-41 665.4,-18 749.4,-18 749.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="707.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; = 2</text></g><g id="[9]--[10]" class="edge"><path fill="none" stroke="black" d="M648.52,-29.5C653.7,-29.5 659.45,-29.5 665.24,-29.5" data-stax-path="good"></path></g><g id="[11]" class="node"><title>:node-index=[11]
:op=if&gt;
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[]
</title><polygon fill="none" stroke="black" points="799.4,-52.5 766.4,-29.5 799.4,-6.5 832.4,-29.5 799.4,-52.5" data-stax-path="good"></polygon><text text-anchor="middle" x="799.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[10]--[11]" class="edge"><path fill="none" stroke="black" d="M749.45,-29.5C755.11,-29.5 760.85,-29.5 766.31,-29.5" data-stax-path="good"></path></g><g id="[11 :then 0]" class="node"><title>:node-index=[11 :then 0]
:op=!v1
</title><polygon fill="none" stroke="black" points="924.4,-60 889.4,-60 889.4,-37 924.4,-37 924.4,-60"></polygon><text text-anchor="middle" x="906.9" y="-44.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11]--[11 :then 0]" class="edge"><path fill="none" stroke="black" d="M825.94,-34.1C845.57,-37.64 872.14,-42.42 889.15,-45.48"></path><text text-anchor="middle" x="853.9" y="-44.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[11 :else 0]" class="node"><title>:node-index=[11 :else 0]
:op=false!!
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=["false!!"]
</title><polygon fill="none" stroke="black" points="938.4,-23 875.4,-23 875.4,0 938.4,0 938.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="906.9" y="-7.8" font-family="Times,serif" font-size="14.00">"false!!"</text></g><g id="[11]--[11 :else 0]" class="edge"><path fill="none" stroke="black" d="M820.86,-21.12C827.04,-18.93 833.91,-16.81 840.4,-15.5 851.68,-13.23 864.25,-12.13 875.35,-11.62" data-stax-path="good"></path><text text-anchor="middle" x="853.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[11 :then 1]" class="node"><title>:node-index=[11 :then 1]
:op=!v2
</title><polygon fill="none" stroke="black" points="1028.9,-60 993.9,-60 993.9,-37 1028.9,-37 1028.9,-60"></polygon><text text-anchor="middle" x="1011.4" y="-44.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :then 0]--[11 :then 1]" class="edge"><path fill="none" stroke="black" d="M924.83,-48.5C943.93,-48.5 974.81,-48.5 993.79,-48.5"></path></g><g id="[11 :then 2]" class="node"><title>:node-index=[11 :then 2]
:op=(invoke&gt; - 2)
</title><polygon fill="none" stroke="black" points="1164.4,-60 1084.4,-60 1084.4,-37 1164.4,-37 1164.4,-60"></polygon><text text-anchor="middle" x="1124.4" y="-44.8" font-family="Times,serif" font-size="14.00">invoke&gt; - 2</text></g><g id="[11 :then 1]--[11 :then 2]" class="edge"><path fill="none" stroke="black" d="M1029.26,-48.5C1043.81,-48.5 1065.41,-48.5 1084.25,-48.5"></path></g><g id="[11 :then 2 ]" class="node"><title>:node-index=[11 :then 2 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1198.9" cy="-48.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :then 2]--[11 :then 2 ]" class="edge"><path fill="none" stroke="black" d="M1164.62,-48.5C1175.03,-48.5 1185.11,-48.5 1191.4,-48.5"></path></g><g id="[11 :else 1]" class="node"><title>:node-index=[11 :else 1]
:op=(invoke&gt; println 1)
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[]
</title><polygon fill="none" stroke="black" points="1067.4,-23 955.4,-23 955.4,0 1067.4,0 1067.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1011.4" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; println 1</text></g><g id="[11 :else 0]--[11 :else 1]" class="edge"><path fill="none" stroke="black" d="M938.65,-11.5C943.96,-11.5 949.62,-11.5 955.34,-11.5" data-stax-path="good"></path></g><g id="[11 :else 2]" class="node"><title>:node-index=[11 :else 2]
:op=&lt;pop&gt;
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[]
</title><polygon fill="none" stroke="black" points="1150.9,-23 1097.9,-23 1097.9,0 1150.9,0 1150.9,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.4" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[11 :else 1]--[11 :else 2]" class="edge"><path fill="none" stroke="black" d="M1067.57,-11.5C1078.13,-11.5 1088.7,-11.5 1097.76,-11.5" data-stax-path="good"></path></g><g id="[11 :else 3]" class="node"><title>:node-index=[11 :else 3]
:op=!v1
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[3]
</title><polygon fill="none" stroke="black" points="1216.4,-23 1181.4,-23 1181.4,0 1216.4,0 1216.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1198.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11 :else 2]--[11 :else 3]" class="edge"><path fill="none" stroke="black" d="M1151.16,-11.5C1161.1,-11.5 1172.18,-11.5 1181.05,-11.5" data-stax-path="good"></path></g><g id="[11 :else 4]" class="node"><title>:node-index=[11 :else 4]
:op=!v2
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[3 8]
</title><polygon fill="none" stroke="black" points="1268.4,-23 1233.4,-23 1233.4,0 1268.4,0 1268.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1250.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :else 3]--[11 :else 4]" class="edge"><path fill="none" stroke="black" d="M1216.55,-11.5C1221.89,-11.5 1227.81,-11.5 1233.15,-11.5" data-stax-path="good"></path></g><g id="[11 :else 5]" class="node"><title>:node-index=[11 :else 5]
:op=(invoke&gt; * 2)
:var-map={!a 1, !b 2, !c 4, !v1 3, !v2 8}
:stack=[24]
</title><polygon fill="none" stroke="black" points="1368.4,-23 1285.4,-23 1285.4,0 1368.4,0 1368.4,-23" data-stax-path="good"></polygon><text text-anchor="middle" x="1326.9" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[11 :else 4]--[11 :else 5]" class="edge"><path fill="none" stroke="black" d="M1268.69,-11.5C1273.72,-11.5 1279.47,-11.5 1285.35,-11.5" data-stax-path="good"></path></g><g id="[11 :else 5 ]" class="node"><title>:node-index=[11 :else 5 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1392.6" cy="-11.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :else 5]--[11 :else 5 ]" class="edge"><path fill="none" stroke="black" d="M1368.6,-11.5C1375.04,-11.5 1380.95,-11.5 1385.17,-11.5"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!a</th><th>!b</th><th>!c</th><th>!v1</th><th>!v2</th></tr><tr><th>Init</th><td>1</td><td>2</td><td>4</td></tr><tr><th>Last</th><td>1</td><td>2</td><td>4</td><td>3</td><td>8</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><table><tr><td>24</td></tr></table></div></div></div><div class="stax-exec-output"><div class="output"><div class="lside"><label>OUTPUT:</label></div><div class="rside"><table><tr><td>false!!</td></tr></table></div></div></div><div class="stax-exec-errors"></div></div><div class="stax-exec"><figure><figcaption>graph0-result2 : [start&rarr;then]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1408" height="68" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1408 68"><g id="graph0-result2 : [start&amp;rarr;then]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 64)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-64 1403.8,-64 1403.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!a 3, !b 3, !c 3}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-29.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!a
:var-map={!a 3, !b 3, !c 3}
:stack=[3]
</title><polygon fill="none" stroke="black" points="84.4,-41 57.4,-41 57.4,-18 84.4,-18 84.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="70.9" y="-25.8" font-family="Times,serif" font-size="14.00">!a</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.8,-29.5C24.88,-29.5 44.26,-29.5 57.14,-29.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-33.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=!b
:var-map={!a 3, !b 3, !c 3}
:stack=[3 3]
</title><polygon fill="none" stroke="black" points="129.4,-41 101.4,-41 101.4,-18 129.4,-18 129.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="115.4" y="-25.8" font-family="Times,serif" font-size="14.00">!b</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M84.42,-29.5C89.71,-29.5 95.87,-29.5 101.23,-29.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=(invoke&gt; + 2)
:var-map={!a 3, !b 3, !c 3}
:stack=[6]
</title><polygon fill="none" stroke="black" points="230.4,-41 146.4,-41 146.4,-18 230.4,-18 230.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="188.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; + 2</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M129.42,-29.5C134.31,-29.5 140.15,-29.5 146.23,-29.5" data-stax-path="good"></path></g><g id="[3]" class="node"><title>:node-index=[3]
:op=!v1+
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6]
</title><polygon fill="none" stroke="black" points="290.4,-41 247.4,-41 247.4,-18 290.4,-18 290.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="268.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v1+</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M230.49,-29.5C236.28,-29.5 242.01,-29.5 247.19,-29.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!c
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6 3]
</title><polygon fill="none" stroke="black" points="334.4,-41 307.4,-41 307.4,-18 334.4,-18 334.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="320.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M290.53,-29.5C296.23,-29.5 302.24,-29.5 307.34,-29.5" data-stax-path="good"></path></g><g id="[5]" class="node"><title>:node-index=[5]
:op=!c
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6 3 3]
</title><polygon fill="none" stroke="black" points="378.4,-41 351.4,-41 351.4,-18 378.4,-18 378.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="364.9" y="-25.8" font-family="Times,serif" font-size="14.00">!c</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M334.73,-29.5C339.94,-29.5 345.95,-29.5 351.15,-29.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=&lt;pop&gt;
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6 3]
</title><polygon fill="none" stroke="black" points="448.4,-41 395.4,-41 395.4,-18 448.4,-18 448.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="421.9" y="-25.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M378.66,-29.5C383.61,-29.5 389.46,-29.5 395.21,-29.5" data-stax-path="good"></path></g><g id="[7]" class="node"><title>:node-index=[7]
:op=2
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6 3 2]
</title><polygon fill="none" stroke="black" points="488.4,-41 465.4,-41 465.4,-18 488.4,-18 488.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="476.9" y="-25.8" font-family="Times,serif" font-size="14.00">2</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M448.47,-29.5C454.4,-29.5 460.39,-29.5 465.25,-29.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=(invoke&gt; * 2)
:var-map={!a 3, !b 3, !c 3, !v1 6}
:stack=[6 6]
</title><polygon fill="none" stroke="black" points="588.4,-41 505.4,-41 505.4,-18 588.4,-18 588.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="546.9" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M488.53,-29.5C493.23,-29.5 499.1,-29.5 505.26,-29.5" data-stax-path="good"></path></g><g id="[9]" class="node"><title>:node-index=[9]
:op=!v2+
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[6 6]
</title><polygon fill="none" stroke="black" points="648.4,-41 605.4,-41 605.4,-18 648.4,-18 648.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="626.9" y="-25.8" font-family="Times,serif" font-size="14.00">!v2+</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M588.73,-29.5C594.48,-29.5 600.17,-29.5 605.32,-29.5" data-stax-path="good"></path></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; = 2)
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[true]
</title><polygon fill="none" stroke="black" points="749.4,-41 665.4,-41 665.4,-18 749.4,-18 749.4,-41" data-stax-path="good"></polygon><text text-anchor="middle" x="707.4" y="-25.8" font-family="Times,serif" font-size="14.00">invoke&gt; = 2</text></g><g id="[9]--[10]" class="edge"><path fill="none" stroke="black" d="M648.52,-29.5C653.7,-29.5 659.45,-29.5 665.24,-29.5" data-stax-path="good"></path></g><g id="[11]" class="node"><title>:node-index=[11]
:op=if&gt;
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[]
</title><polygon fill="none" stroke="black" points="799.4,-52.5 766.4,-29.5 799.4,-6.5 832.4,-29.5 799.4,-52.5" data-stax-path="good"></polygon><text text-anchor="middle" x="799.4" y="-25.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[10]--[11]" class="edge"><path fill="none" stroke="black" d="M749.45,-29.5C755.11,-29.5 760.85,-29.5 766.31,-29.5" data-stax-path="good"></path></g><g id="[11 :then 0]" class="node"><title>:node-index=[11 :then 0]
:op=!v1
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[6]
</title><polygon fill="none" stroke="black" points="924.4,-60 889.4,-60 889.4,-37 924.4,-37 924.4,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="906.9" y="-44.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11]--[11 :then 0]" class="edge"><path fill="none" stroke="black" d="M825.94,-34.1C845.57,-37.64 872.14,-42.42 889.15,-45.48" data-stax-path="good"></path><text text-anchor="middle" x="853.9" y="-44.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[11 :else 0]" class="node"><title>:node-index=[11 :else 0]
:op=false!!
</title><polygon fill="none" stroke="black" points="938.4,-23 875.4,-23 875.4,0 938.4,0 938.4,-23"></polygon><text text-anchor="middle" x="906.9" y="-7.8" font-family="Times,serif" font-size="14.00">"false!!"</text></g><g id="[11]--[11 :else 0]" class="edge"><path fill="none" stroke="black" d="M820.86,-21.12C827.04,-18.93 833.91,-16.81 840.4,-15.5 851.68,-13.23 864.25,-12.13 875.35,-11.62"></path><text text-anchor="middle" x="853.9" y="-19.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[11 :then 1]" class="node"><title>:node-index=[11 :then 1]
:op=!v2
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[6 6]
</title><polygon fill="none" stroke="black" points="1028.9,-60 993.9,-60 993.9,-37 1028.9,-37 1028.9,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="1011.4" y="-44.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :then 0]--[11 :then 1]" class="edge"><path fill="none" stroke="black" d="M924.83,-48.5C943.93,-48.5 974.81,-48.5 993.79,-48.5" data-stax-path="good"></path></g><g id="[11 :then 2]" class="node"><title>:node-index=[11 :then 2]
:op=(invoke&gt; - 2)
:var-map={!a 3, !b 3, !c 3, !v1 6, !v2 6}
:stack=[0]
</title><polygon fill="none" stroke="black" points="1164.4,-60 1084.4,-60 1084.4,-37 1164.4,-37 1164.4,-60" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.4" y="-44.8" font-family="Times,serif" font-size="14.00">invoke&gt; - 2</text></g><g id="[11 :then 1]--[11 :then 2]" class="edge"><path fill="none" stroke="black" d="M1029.26,-48.5C1043.81,-48.5 1065.41,-48.5 1084.25,-48.5" data-stax-path="good"></path></g><g id="[11 :then 2 ]" class="node"><title>:node-index=[11 :then 2 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1198.9" cy="-48.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :then 2]--[11 :then 2 ]" class="edge"><path fill="none" stroke="black" d="M1164.62,-48.5C1175.03,-48.5 1185.11,-48.5 1191.4,-48.5"></path></g><g id="[11 :else 1]" class="node"><title>:node-index=[11 :else 1]
:op=(invoke&gt; println 1)
</title><polygon fill="none" stroke="black" points="1067.4,-23 955.4,-23 955.4,0 1067.4,0 1067.4,-23"></polygon><text text-anchor="middle" x="1011.4" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; println 1</text></g><g id="[11 :else 0]--[11 :else 1]" class="edge"><path fill="none" stroke="black" d="M938.65,-11.5C943.96,-11.5 949.62,-11.5 955.34,-11.5"></path></g><g id="[11 :else 2]" class="node"><title>:node-index=[11 :else 2]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="1150.9,-23 1097.9,-23 1097.9,0 1150.9,0 1150.9,-23"></polygon><text text-anchor="middle" x="1124.4" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[11 :else 1]--[11 :else 2]" class="edge"><path fill="none" stroke="black" d="M1067.57,-11.5C1078.13,-11.5 1088.7,-11.5 1097.76,-11.5"></path></g><g id="[11 :else 3]" class="node"><title>:node-index=[11 :else 3]
:op=!v1
</title><polygon fill="none" stroke="black" points="1216.4,-23 1181.4,-23 1181.4,0 1216.4,0 1216.4,-23"></polygon><text text-anchor="middle" x="1198.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v1</text></g><g id="[11 :else 2]--[11 :else 3]" class="edge"><path fill="none" stroke="black" d="M1151.16,-11.5C1161.1,-11.5 1172.18,-11.5 1181.05,-11.5"></path></g><g id="[11 :else 4]" class="node"><title>:node-index=[11 :else 4]
:op=!v2
</title><polygon fill="none" stroke="black" points="1268.4,-23 1233.4,-23 1233.4,0 1268.4,0 1268.4,-23"></polygon><text text-anchor="middle" x="1250.9" y="-7.8" font-family="Times,serif" font-size="14.00">!v2</text></g><g id="[11 :else 3]--[11 :else 4]" class="edge"><path fill="none" stroke="black" d="M1216.55,-11.5C1221.89,-11.5 1227.81,-11.5 1233.15,-11.5"></path></g><g id="[11 :else 5]" class="node"><title>:node-index=[11 :else 5]
:op=(invoke&gt; * 2)
</title><polygon fill="none" stroke="black" points="1368.4,-23 1285.4,-23 1285.4,0 1368.4,0 1368.4,-23"></polygon><text text-anchor="middle" x="1326.9" y="-7.8" font-family="Times,serif" font-size="14.00">invoke&gt; * 2</text></g><g id="[11 :else 4]--[11 :else 5]" class="edge"><path fill="none" stroke="black" d="M1268.69,-11.5C1273.72,-11.5 1279.47,-11.5 1285.35,-11.5"></path></g><g id="[11 :else 5 ]" class="node"><title>:node-index=[11 :else 5 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1392.6" cy="-11.5" rx="7.2" ry="7.2"></ellipse></g><g id="[11 :else 5]--[11 :else 5 ]" class="edge"><path fill="none" stroke="black" d="M1368.6,-11.5C1375.04,-11.5 1380.95,-11.5 1385.17,-11.5"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!a</th><th>!b</th><th>!c</th><th>!v1</th><th>!v2</th></tr><tr><th>Init</th><td>3</td><td>3</td><td>3</td></tr><tr><th>Last</th><td>3</td><td>3</td><td>3</td><td>6</td><td>6</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><table><tr><td>0</td></tr></table></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"></div></div></div>

<ul class="org-ul">
<li>The Green diagram above is the Execution visualization
<ul class="org-ul">
<li>Each is the svg representation of the node-data's <code>:node-tree</code> with errors from the <code>:trace</code> of its result map in <code>:results</code> overlayed</li>
<li>Each run is shown in the order given to stackfn-dbg (as opposed to the Path which is then over else)</li>
<li>Note the turns vector in each shown matches that of the corresponding Path in the previous section)
<ul class="org-ul">
<li>This is only true for successful runs &#x2013; a runtime error halts the run before the teminal node, so erroroneous runs do not go to term.</li>
</ul></li>
<li>As with the Parse Tree, if you hover over any node here, you will see <code>:op</code> and <code>:node-index</code></li>
<li>If you hover over any Green filled node, you will also see
<ul class="org-ul">
<li><code>:var-map</code> ={&lt;!var&gt; &lt;val&gt; &#x2026;} which is the state of the variables after the node executed</li>
<li><code>:stack</code> which is the accumulated stack after the node executed</li>
</ul></li>
<li>Below the svg in each run is the results report with a group of labeled tables for
<ul class="org-ul">
<li><b>VARIABLES</b>: names and values of
<ul class="org-ul">
<li><b>Init</b> row is the pre execution values of <code>declarations</code> (in given order)</li>
<li><b>Last</b> row is the post execution values of the same, plus additional defined !vars (in alphabetical order)</li>
</ul></li>
<li><b>STACK</b>: is the post-execution values of the stack (where rightmost is top)</li>
<li><b>OUTPUT</b>: if it exists, a box of text from output (e.g. println) in the executed operations</li>
</ul></li>
</ul></li>
</ul>

<hr />

<p>
Now let's visualize some errors.
<a id="orgd0fd7c9"></a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgf8c5357" class="outline-4">
<h4 id="orgf8c5357">FLAGS: A Good Example of Bad Nodes</h4>
<div class="outline-text-4" id="text-orgf8c5357">
<p>
Let's see if we can construct a single visualization of each of the major error types:
</p>
<ul class="org-ul">
<li>Parse Errors (Black Tree)
<ul class="org-ul">
<li>Illegal Ops</li>
<li>Malformed <code>invoke&gt;</code></li>
</ul></li>
<li>Path Errors (Blue/Red Tree)
<ul class="org-ul">
<li>Insufficient Stack</li>
<li>Undefined Variable</li>
</ul></li>
<li>Runtime Errors (Green/Red Tree)</li>
</ul>

<p>
In this example, the declarations act as flags that steer into intentional errors, when their value is <code>nil</code>. The flag declarations are listed in the following table:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">DECL</th>
<th scope="col" class="org-left">MNEMONIC</th>
<th scope="col" class="org-left">ZONE</th>
<th scope="col" class="org-left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>!i</code></td>
<td class="org-left">illegal</td>
<td class="org-left">tree</td>
<td class="org-left"><code>nil</code> to choose the path of illegal op</td>
</tr>

<tr>
<td class="org-left"><code>!m</code></td>
<td class="org-left">malformed</td>
<td class="org-left">tree</td>
<td class="org-left"><code>nil</code> to choose the path of a malformed invoke</td>
</tr>

<tr>
<td class="org-left"><code>!s</code></td>
<td class="org-left">starved</td>
<td class="org-left">path</td>
<td class="org-left"><code>nil</code> to choose the path of an op on insuffient stack</td>
</tr>

<tr>
<td class="org-left"><code>!u</code></td>
<td class="org-left">undefined</td>
<td class="org-left">path</td>
<td class="org-left"><code>nil</code> to choose the path of an undefined !var</td>
</tr>

<tr>
<td class="org-left"><code>!r</code></td>
<td class="org-left">runtime</td>
<td class="org-left">exec</td>
<td class="org-left"><code>nil</code> to choose the path of a runtime error</td>
</tr>
</tbody>
</table>

<p>
There are five declaration variables, and six runs of five values each, corresponding to the declarations. We expect the first run to succeed, and all others to fail execution with runtime errors analogous to the tree or path errors (except the second run, which has a runtime error with no equivalent parse or path error).
</p>

<p>
Not all of the possible paths are shown. Five non-nested <code>if&gt;</code> operations have 2<sup>5</sup> = 32 paths. In order select the paths that correspond to each run, I take advantage of the fact the values given to a run as arguments can be view as bits in a 5 digit binary number, where <code>nil</code> or <code>false</code> is 1 and a truthy value is 0.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">!i</th>
<th scope="col" class="org-right">!m</th>
<th scope="col" class="org-right">!s</th>
<th scope="col" class="org-right">!u</th>
<th scope="col" class="org-left">!r</th>
<th scope="col" class="org-right">binary</th>
<th scope="col" class="org-right">decimal</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">1,</td>
<td class="org-right">00000</td>
<td class="org-right">0</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">false,</td>
<td class="org-right">00001</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-left">1,</td>
<td class="org-right">00010</td>
<td class="org-right">2</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-left">1,</td>
<td class="org-right">00100</td>
<td class="org-right">4</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">1,</td>
<td class="org-right">01000</td>
<td class="org-right">8</td>
</tr>

<tr>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-left">1</td>
<td class="org-right">10000</td>
<td class="org-right">16</td>
</tr>
</tbody>
</table>

<p>
The decimal value of a run's arguments interpreted this way is the index of the corresponding path in <code>:paths</code>.
</p>

<p>
Because the svg often extends past the right side of the page of this document, the visualizations in this section bind <code>*stax-op-short-invoke&gt;*</code> to <code>'★</code> to make <code>invoke&gt;</code> display as <code>★</code>.
</p>

<p>
Below, we define <code>FLAG-DATA</code> as the svg for tree, paths, and execs.  In the <a href="#orga2f11bd">RPL Example Visualization</a> above, we checked the parse and path trees for errors before running with values.  Here, however, we want errors, so we override the normal behavior of <code>stackfn-dbg</code> to exec regardless of pre-execution errors by binding <code>*stax-errors-prevent-exec*</code> to <code>false</code>.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">def</span> <span style="color: #4ac964;">FLAG-DATA</span>
  (<span style="color: #ffff0b;">let</span> [decls '[!i !m !s !u !r]
        ops '[!i (if&gt; else&gt; Z)
              !m (if&gt; else&gt; (invoke&gt; &#191; 0))
              !s (if&gt; else&gt; !v)
              !u (if&gt; else&gt; &lt;pop&gt;)
              !r (if&gt; 42 else&gt; <span style="color: #34c8d8; font-weight: bold;">true</span>)
              (invoke&gt; + 1)]
        args '[  1     1     1     1     1,
                 1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>,
                 1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1,
                 1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1,
                 1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1,
               <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1]
        {<span style="color: #34c8d8; font-weight: bold;">:keys</span> [paths results] <span style="color: #34c8d8; font-weight: bold;">:as</span> data}
        (<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-op-short-invoke&gt;*</span> '&#9733;
                  <span style="color: #4ac964;">*stax-errors-prevent-exec*</span> <span style="color: #34c8d8; font-weight: bold;">false</span>]
          (add-svg-data (apply stackfn-dbg (build-node-data decls ops) args)))
        runs (partition (count decls) args)
        run-to-nth (<span style="color: #ffff0b;">fn</span> [run] (<span style="color: #9fcb66;">Integer</span>/parseInt (apply str (map #(<span style="color: #ffff0b;">if</span> <span style="color: #4ac964;">%</span> 0 1) run)) 2))
        nths (map run-to-nth runs)
        paths-for-runs (<span style="color: #ffff0b;">fn</span> [paths nths] (mapv #(nth paths <span style="color: #4ac964;">%</span>) nths))
        tree-xml (<span style="color: #ffff0b;">-&gt;</span> data node-data-to-stax-tree-xml)
        path-xmls (into [] (<span style="color: #ffff0b;">-&gt;</span> data
                                (update <span style="color: #34c8d8; font-weight: bold;">:paths</span> paths-for-runs nths)
                                (update <span style="color: #34c8d8; font-weight: bold;">:turns</span> paths-for-runs nths)
                                node-data-to-stax-paths-xml))
        exec-xmls (into [] (<span style="color: #ffff0b;">-&gt;&gt;</span> data node-data-to-stax-execs-xml))]
    {<span style="color: #34c8d8; font-weight: bold;">:runs</span> runs
     <span style="color: #34c8d8; font-weight: bold;">:tree-xml</span> tree-xml
     <span style="color: #34c8d8; font-weight: bold;">:path-xmls</span> path-xmls
     <span style="color: #34c8d8; font-weight: bold;">:exec-xmls</span> exec-xmls}))
</pre>
</div>

<div class="org-src-container">
<pre class="src src-clj"><span style="color: #9fcb66;">#'user</span>/FLAG-DATA

</pre>
</div>
</div>

<div id="outline-container-org7616426" class="outline-5">
<h5 id="org7616426">FLAGS: Parse Errors</h5>
<div class="outline-text-5" id="text-org7616426">
<p>
Here, we visualize the tree-xml of <code>FLAG-DATA</code>:
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">let</span> [{<span style="color: #34c8d8; font-weight: bold;">:keys</span> [tree-xml]} FLAG-DATA]
  (<span style="color: #ffff0b;">-&gt;&gt;</span> (div-stax-tree tree-xml)
       html print))
</pre>
</div>

<div class="stax-tree"><figure><figcaption>graph0</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z

TREE ERRORS:
Z is not an allowed op</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23" data-stax-err-type="error=parse-illegal-operation"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)

TREE ERRORS:
¿ is not a known function!
0 is not a valid arity (must be pos-int)!</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23" data-stax-err-type="error=parse-invoke-fun-not-function error=parse-invoke-arity-not-pos-int"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div>

<ul class="org-ul">
<li>Note the following:
<ul class="org-ul">
<li><p>
Hover over colored nodes for their "TREE ERRORS".  Nodes with Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #ffff0b; font-weight: bold;">div.stax-tree svg&gt;g.graph&gt;g.node&gt;polygon[data-stax-err-type~=</span><span style="color: #ff7fff;">"error=parse-illegal-operation"</span><span style="color: #ffff0b; font-weight: bold;">],</span>
<span style="color: #ffff0b; font-weight: bold;">div.stax-path svg&gt;g.graph&gt;g.node&gt;polygon[data-stax-err-type~=</span><span style="color: #ff7fff;">"error=parse-illegal-operation"</span><span style="color: #ffff0b; font-weight: bold;">] </span>{
    <span style="color: #ff55ff;">fill</span>: <span style="color: #ffffff; background-color: #ff4500;">orangered</span>;
}

<span style="color: #ffff0b; font-weight: bold;">div.stax-tree svg&gt;g.graph&gt;g.node&gt;polygon[data-stax-err-type^=</span><span style="color: #ff7fff;">"error=parse-invoke"</span><span style="color: #ffff0b; font-weight: bold;">],</span>
<span style="color: #ffff0b; font-weight: bold;">div.stax-path svg&gt;g.graph&gt;g.node&gt;polygon[data-stax-err-type^=</span><span style="color: #ff7fff;">"error=parse-invoke"</span><span style="color: #ffff0b; font-weight: bold;">] </span>{
    <span style="color: #ff55ff;">fill</span>: <span style="color: #ffffff; background-color: #ffa500;">orange</span>;
}
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>


<div id="outline-container-org9bc113c" class="outline-5">
<h5 id="org9bc113c">FLAGS: Run #1 &#x2013; Happy Path</h5>
<div class="outline-text-5" id="text-org9bc113c">
<p>
Here is the code to show the first run as a path / exec pair (the code blocks for subsequent runs are not exported, but differ only in <code>row</code> value):
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">let</span> [row 0
      {<span style="color: #34c8d8; font-weight: bold;">:keys</span> [path-xmls exec-xmls]} FLAG-DATA]
  (<span style="color: #ffff0b;">-&gt;&gt;</span> [<span style="color: #34c8d8; font-weight: bold;">:div</span>
        (div-stax-path (path-xmls row))
        (div-stax-exec (exec-xmls row))]
       html print))
</pre>
</div>

<div><div class="stax-path"><figure><figcaption>graph0-path1 : [start&rarr;then&rarr;then&rarr;then&rarr;then&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path1 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:stack-size=1
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:stack-size=1
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:stack-size=1
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
:stack-size=1
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="good"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="good"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
:stack-size=1
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="good"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="good"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
:stack-size=1
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
:stack-size=1
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="good"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="good"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div><div class="stax-exec"><figure><figcaption>graph0-result1 : [start&rarr;then&rarr;then&rarr;then&rarr;then&rarr;then]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result1 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="good"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="good"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[42]
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="good"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="good"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
:var-map={!i 1, !m 1, !s 1, !u 1, !r 1}
:stack=[42]
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="good"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr><tr><th>Last</th><td>1</td><td>1</td><td>1</td><td>1</td><td>1</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><table><tr><td>42</td></tr></table></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"></div></div></div>

<ul class="org-ul">
<li>This is the only good result in this example.</li>
</ul>
</div>
</div>

<div id="outline-container-org93f3c3a" class="outline-5">
<h5 id="org93f3c3a">FLAGS: Run #2 &#x2013; Failed Invoke &#x2013; Runtime Error</h5>
<div class="outline-text-5" id="text-org93f3c3a">
<div><div class="stax-path"><figure><figcaption>graph0-path2 : [start&rarr;then&rarr;then&rarr;then&rarr;then&rarr;else&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path2 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;else&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:stack-size=1
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:stack-size=1
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:stack-size=1
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
:stack-size=1
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="good"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="good"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
:stack-size=1
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25" data-stax-path="good"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71" data-stax-path="good"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
:stack-size=1
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
:stack-size=1
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="good"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91" data-stax-path="good"></path></g></g></svg></figure></div><div class="stax-exec" has-errors="has-errors"><figure><figcaption>graph0-result2 : [start&rarr;then&rarr;then&rarr;then&rarr;then&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result2 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[1]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[1]
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[1]
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[1]
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[false]
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="good"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[]
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="good"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
:var-map={!i 1, !m 1, !s 1, !u 1, !r false}
:stack=[true]
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25" data-stax-path="good"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71" data-stax-path="good"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)

Exec Errors:
`(apply #'clojure.core/+ (true))' failed during execution (Cannot cast java.lang.Boolean to java.lang.Number)</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-err-type="error=runtime-invoke-failed" data-stax-path="bad"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91" data-stax-path="good"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>1</td><td>1</td><td>1</td><td>1</td><td>false</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><div class="empty" id="stack">&empty;</div></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"><div class="stack"><div class="lside"><label>ERRORS:</label></div><div class="rside"><table><tr><td><pre>`(apply #&apos;clojure.core/+ (true))&apos; failed during execution (Cannot cast java.lang.Boolean to java.lang.Number)</pre></td></tr></table></div></div></div></div></div>

<ul class="org-ul">
<li>No errors were found in Parse or Path Analysis
<ul class="org-ul">
<li>Path trees shows Blue line/stroke for valid path from start-node to terminal node</li>
<li>All nodes in Path are colored Blue</li>
</ul></li>
<li>One error in Runtime Tree &#x2013; execution halts on error
<ul class="org-ul">
<li>Exec tree shows
<ul class="org-ul">
<li>Green stroke for successful nodes from start-node to the edge after the last succesful node</li>
<li>Red stroke for failed node</li>
<li>Black stroke beyond the failed node</li>
</ul></li>
<li>A Run that produces a Runtime Error halts and invalidate the var-map and stack
<ul class="org-ul">
<li>It shows no <b>Last</b> row in the <b>VARIABLES</b> table</li>
<li>And <b>STACK</b>: <b>&empty;</b>
<ul class="org-ul">
<li>This is different from an empty stack (which would have table with one empty cell)</li>
</ul></li>
</ul></li>
<li>Exec Tree turns has value <code>[start→then→then→then→then→else]</code> &#x2013; i.e. does not go to term</li>
</ul></li>
<li>Hover over the Purple node for its <b>EXEC ERRORS</b>. Also shown as <b>ERRORS</b> in the result report area</li>
<li><p>
Nodes with Runtime Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.
</p>
<div class="org-src-container">
<pre class="src src-css"><span style="color: #ffff0b; font-weight: bold;">div.stax-exec svg&gt;g.graph&gt;g.node&gt;polygon[data-stax-err-type^=</span><span style="color: #ff7fff;">"error=runtime"</span><span style="color: #ffff0b; font-weight: bold;">] </span>{
    <span style="color: #ff55ff;">fill</span>: <span style="color: #ffffff; background-color: #9370db;">mediumpurple</span>;
}
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga649874" class="outline-5">
<h5 id="orga649874">FLAGS: Run #3 &#x2013; Insufficient Stack &#x2013; Runtime Error vs Path Error</h5>
<div class="outline-text-5" id="text-orga649874">
<div><div class="stax-path"><figure><figcaption>graph0-path3 : [start&rarr;then&rarr;then&rarr;then&rarr;else&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path3 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;else&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:stack-size=1
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:stack-size=1
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:stack-size=1
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;

PATH ERRORS:
stack size=0, operation &lt;pop&gt; needs &gt;=1</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23" data-stax-err-type="error=static-insufficient-stack" data-stax-path="bad"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68" data-stax-path="good"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="bad"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="bad"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="bad"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="bad"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="bad"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07" data-stax-path="bad"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="bad"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div><div class="stax-exec" has-errors="has-errors"><figure><figcaption>graph0-result3 : [start&rarr;then&rarr;then&rarr;then&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result3 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[false]
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:var-map={!i 1, !m 1, !s 1, !u false, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="good"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;

Exec Errors:
Needs 1 item -- but stack is empty</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23" data-stax-err-type="error=runtime-insufficient-stack" data-stax-path="bad"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68" data-stax-path="good"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>1</td><td>1</td><td>1</td><td>false</td><td>1</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><div class="empty" id="stack">&empty;</div></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"><div class="stack"><div class="lside"><label>ERRORS:</label></div><div class="rside"><table><tr><td><pre>Needs 1 item -- but stack is empty</pre></td></tr></table></div></div></div></div></div>

<ul class="org-ul">
<li>One error found in Path Analysis
<ul class="org-ul">
<li>Path tree shows
<ul class="org-ul">
<li>Blue line/stroke for valid path from start-node to path error (<code>&lt;pop&gt;</code>), Red from there on to terminal node</li>
</ul></li>
</ul></li>
<li>One error in Runtime Tree &#x2013; execution halts on error as in prior run
<ul class="org-ul">
<li>Exec tree shows Green line/stroke for successful node execution from start-node to last succesful node, Red for failed node, Black beyond.</li>
<li>Error in runtime produce no <b>Last</b> row in <b>VARIABLES</b>, and invalidated <b>STACK</b> (shown as <b>&empty;</b>)</li>
<li>Exec Tree turns <code>[start→then→then→then→else]</code> does not go to term</li>
</ul></li>
<li>Hover over the Purple node for its <b>EXEC ERRORS</b>. Also shown as <b>ERRORS</b> in the result area</li>
<li>Nodes with Runtime Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgf899750" class="outline-5">
<h5 id="orgf899750">FLAGS: Run #4 &#x2013; Undefined !Var &#x2013; Runtime Error vs Path Error</h5>
<div class="outline-text-5" id="text-orgf899750">
<div><div class="stax-path"><figure><figcaption>graph0-path4 : [start&rarr;then&rarr;then&rarr;else&rarr;then&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path4 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;else&amp;rarr;then&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:stack-size=1
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:stack-size=1
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
:stack-size=2
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
:stack-size=1

PATH ERRORS:
!v is a reference before definition</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23" data-stax-err-type="error=static-var-not-defined" data-stax-path="bad"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59" data-stax-path="good"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
:stack-size=1
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="bad"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
:stack-size=2
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="bad"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
:stack-size=1
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="bad"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
:stack-size=2
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="bad"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="bad"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
:stack-size=2
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
:stack-size=2
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="bad"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="bad"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43" data-stax-path="bad"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="bad"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div><div class="stax-exec" has-errors="has-errors"><figure><figcaption>graph0-result4 : [start&rarr;then&rarr;then&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result4 : [start&amp;rarr;then&amp;rarr;then&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[false]
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="good"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
:var-map={!i 1, !m 1, !s false, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="good"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v

Exec Errors:
Undefined stack var `!v'</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23" data-stax-err-type="error=runtime-var-not-defined" data-stax-path="bad"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59" data-stax-path="good"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>1</td><td>1</td><td>false</td><td>1</td><td>1</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><div class="empty" id="stack">&empty;</div></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"><div class="stack"><div class="lside"><label>ERRORS:</label></div><div class="rside"><table><tr><td><pre>Undefined stack var `!v&apos;</pre></td></tr></table></div></div></div></div></div>

<ul class="org-ul">
<li>One errors found in Path Analysis
<ul class="org-ul">
<li>Path tree shows Blue line/stroke for valid path from start-node to path error (<code>&lt;!v&gt;</code>), Red from there on to terminal node</li>
<li>Hover over it to see that it is similar to (same underlying cause), but worded differently than Runtime Error</li>
</ul></li>
<li>One error in Runtime Tree &#x2013; execution halts on error as in prior run
<ul class="org-ul">
<li>Exec tree shows Green line/stroke for successful node execution from start-node to last succesful node, Red for failed node, Black beyond.</li>
<li>Error in runtime produce no <b>Last</b> row in <b>VARIABLES</b>, and invalidated <b>STACK</b> (shown as <b>&empty;</b>)</li>
<li>Exec Tree turns start→then→then→then→else does not go to term</li>
</ul></li>
<li>Hover over the Purple node for its <b>EXEC ERRORS</b>. Also shown as <b>ERRORS</b> in the result area</li>
<li>Nodes with Runtime Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.</li>
</ul>
</div>
</div>


<div id="outline-container-org7eeee45" class="outline-5">
<h5 id="org7eeee45">FLAGS: Run #5 &#x2013; Malformed Invoke &#x2013; Runtime Error vs Parse Error</h5>
<div class="outline-text-5" id="text-org7eeee45">
<div><div class="stax-path"><figure><figcaption>graph0-path5 : [start&rarr;then&rarr;else&rarr;then&rarr;then&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path5 : [start&amp;rarr;then&amp;rarr;else&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:stack-size=1
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)

TREE ERRORS:
¿ is not a known function!
0 is not a valid arity (must be pos-int)!</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23" data-stax-err-type="error=parse-invoke-fun-not-function error=parse-invoke-arity-not-pos-int" data-stax-path="bad"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59" data-stax-path="good"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="bad"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="bad"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="bad"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="bad"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="bad"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="bad"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="bad"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="bad"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="bad"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95" data-stax-path="bad"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="bad"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div><div class="stax-exec" has-errors="has-errors"><figure><figcaption>graph0-result5 : [start&rarr;then&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result5 : [start&amp;rarr;then&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i 1, !m false, !s 1, !u 1, !r 1}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i 1, !m false, !s 1, !u 1, !r 1}
:stack=[1]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i 1, !m false, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
:var-map={!i 1, !m false, !s 1, !u 1, !r 1}
:stack=[false]
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57" data-stax-path="good"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z
</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
:var-map={!i 1, !m false, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="good"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)

Exec Errors:
Could not resolve `¿' to iFn</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23" data-stax-err-type="error=runtime-invoke-fun-not-function" data-stax-path="bad"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59" data-stax-path="good"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>1</td><td>false</td><td>1</td><td>1</td><td>1</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><div class="empty" id="stack">&empty;</div></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"><div class="stack"><div class="lside"><label>ERRORS:</label></div><div class="rside"><table><tr><td><pre>Could not resolve `¿&apos; to iFn</pre></td></tr></table></div></div></div></div></div>

<ul class="org-ul">
<li>One errors found in Path Analysis
<ul class="org-ul">
<li>Path tree shows Blue line/stroke for valid path from start-node to path error (<code>(★ ¿ 0)</code> &#x2013; which looks to me like Paul Stanley in KISS makeup), Red from there on to terminal node</li>
<li>Hover over it to see that it is similar to (same underlying cause), but worded differently than Runtime Error</li>
</ul></li>
<li>One error in Runtime Tree &#x2013; execution halts on error as in prior run
<ul class="org-ul">
<li>Exec tree shows Green line/stroke for successful node execution from start-node to last succesful node, Red for failed node, Black beyond.</li>
<li>Error in runtime produce no <b>Last</b> row in <b>VARIABLES</b>, and invalidated <b>STACK</b> (shown as <b>&empty;</b>)</li>
<li>Exec Tree turns [start→then→then→then→else] does not go to term</li>
</ul></li>
<li>Hover over the Purple node for its <b>EXEC ERRORS</b>. Also shown as <b>ERRORS</b> in the result area</li>
<li>Nodes with Runtime Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org878f091" class="outline-5">
<h5 id="org878f091">FLAGS: Run #6 &#x2013; Illegal Operation &#x2013; Runtime Error vs Parse Error</h5>
<div class="outline-text-5" id="text-org878f091">
<div><div class="stax-path"><figure><figcaption>graph0-path6 : [start&rarr;else&rarr;then&rarr;then&rarr;then&rarr;then&rarr;term]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-path6 : [start&amp;rarr;else&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;then&amp;rarr;term]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:stack-size=0
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:stack-size=1
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:stack-size=0
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z

TREE ERRORS:
Z is not an allowed op</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23" data-stax-err-type="error=parse-illegal-operation" data-stax-path="bad"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25" data-stax-path="good"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5" data-stax-path="bad"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22" data-stax-path="bad"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5" data-stax-path="bad"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22" data-stax-path="bad"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5" data-stax-path="bad"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23" data-stax-path="bad"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5" data-stax-path="bad"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5" data-stax-path="bad"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62" data-stax-path="bad"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64" data-stax-path="bad"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43" data-stax-path="bad"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="bad"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5" data-stax-path="bad"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62" data-stax-path="bad"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61" data-stax-path="bad"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure></div><div class="stax-exec" has-errors="has-errors"><figure><figcaption>graph0-result6 : [start&rarr;else]</figcaption><?xml version="1.0" encoding="UTF-8"?><svg width="1191" height="70" preserveAspectRatio="xMidYMid meet" version="1.1" contentScriptType="application/ecmascript" contentStyleType="text/css" viewBox="0 0 1191 70"><g id="graph0-result6 : [start&amp;rarr;else]" class="graph" transform="scale(1.0 1.0) rotate(0) translate(4 66)"><title>graph0</title><polygon fill="white" stroke="transparent" points="-4,4 -4,-66 1186.8,-66 1186.8,4 -4,4"></polygon><g id="[]" class="node"><title>:node-index=[]
:op=&lt;&lt;start&gt;&gt;
:var-map={!i false, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><ellipse fill="black" stroke="black" cx="7.2" cy="-31.5" rx="7.2" ry="7.2" data-stax-path="good"></ellipse></g><g id="[0]" class="node"><title>:node-index=[0]
:op=!i
:var-map={!i false, !m 1, !s 1, !u 1, !r 1}
:stack=[false]
</title><polygon fill="none" stroke="black" points="82.4,-43 57.4,-43 57.4,-20 82.4,-20 82.4,-43" data-stax-path="good"></polygon><text text-anchor="middle" x="69.9" y="-27.8" font-family="Times,serif" font-size="14.00">!i</text></g><g id="[]--[0]" class="edge"><path fill="none" stroke="black" d="M14.7,-31.5C24.85,-31.5 44.63,-31.5 57.28,-31.5" data-stax-path="good"></path><text text-anchor="middle" x="35.9" y="-35.3" font-family="Helvetica,sans-Serif" font-size="14.00">start</text></g><g id="[1]" class="node"><title>:node-index=[1]
:op=if&gt;
:var-map={!i false, !m 1, !s 1, !u 1, !r 1}
:stack=[]
</title><polygon fill="none" stroke="black" points="132.4,-54.5 99.4,-31.5 132.4,-8.5 165.4,-31.5 132.4,-54.5" data-stax-path="good"></polygon><text text-anchor="middle" x="132.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[0]--[1]" class="edge"><path fill="none" stroke="black" d="M82.57,-31.5C87.44,-31.5 93.37,-31.5 99.39,-31.5" data-stax-path="good"></path></g><g id="[2]" class="node"><title>:node-index=[2]
:op=!m
</title><polygon fill="none" stroke="black" points="282.4,-43 250.4,-43 250.4,-20 282.4,-20 282.4,-43"></polygon><text text-anchor="middle" x="266.4" y="-27.8" font-family="Times,serif" font-size="14.00">!m</text></g><g id="[1]--[2]" class="edge"><path fill="none" stroke="black" d="M157.4,-37.1C162.64,-38.1 168.18,-38.98 173.4,-39.5 200.36,-42.17 231.82,-37.83 250.09,-34.57"></path><text text-anchor="middle" x="219.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[1 :else 0]" class="node"><title>:node-index=[1 :else 0]
:op=Z

Exec Errors:
`Z' is not a legal operation!</title><polygon fill="none" stroke="black" points="232.4,-23 207.4,-23 207.4,0 232.4,0 232.4,-23" data-stax-err-type="error=runtime-illegal-operation" data-stax-path="bad"></polygon><text text-anchor="middle" x="219.9" y="-7.8" font-family="Times,serif" font-size="14.00">Z</text></g><g id="[1]--[1 :else 0]" class="edge"><path fill="none" stroke="black" d="M157.67,-25.82C173.87,-22.03 194.44,-17.22 207.13,-14.25" data-stax-path="good"></path><text text-anchor="middle" x="185.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[3]" class="node"><title>:node-index=[3]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="332.4,-54.5 299.4,-31.5 332.4,-8.5 365.4,-31.5 332.4,-54.5"></polygon><text text-anchor="middle" x="332.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[2]--[3]" class="edge"><path fill="none" stroke="black" d="M282.57,-31.5C287.59,-31.5 293.4,-31.5 299.21,-31.5"></path></g><g id="[4]" class="node"><title>:node-index=[4]
:op=!s
</title><polygon fill="none" stroke="black" points="500.4,-43 474.4,-43 474.4,-20 500.4,-20 500.4,-43"></polygon><text text-anchor="middle" x="487.4" y="-27.8" font-family="Times,serif" font-size="14.00">!s</text></g><g id="[3]--[4]" class="edge"><path fill="none" stroke="black" d="M357.4,-37.1C362.64,-38.1 368.18,-38.98 373.4,-39.5 397.89,-41.92 461.57,-36.12 466.4,-35.5 468.93,-35.17 471.62,-34.72 474.18,-34.22"></path><text text-anchor="middle" x="431.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[3 :else 0]" class="node"><title>:node-index=[3 :else 0]
:op=(invoke&gt; ¿ 0)
</title><polygon fill="none" stroke="black" points="457.4,-23 406.4,-23 406.4,0 457.4,0 457.4,-23"></polygon><text text-anchor="middle" x="431.9" y="-7.8" font-family="Times,serif" font-size="14.00">★ ¿ 0</text></g><g id="[3]--[3 :else 0]" class="edge"><path fill="none" stroke="black" d="M358.26,-26.4C372.92,-23.39 391.43,-19.6 406.09,-16.59"></path><text text-anchor="middle" x="385.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[5]" class="node"><title>:node-index=[5]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="550.4,-54.5 517.4,-31.5 550.4,-8.5 583.4,-31.5 550.4,-54.5"></polygon><text text-anchor="middle" x="550.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[4]--[5]" class="edge"><path fill="none" stroke="black" d="M500.45,-31.5C505.38,-31.5 511.34,-31.5 517.38,-31.5"></path></g><g id="[6]" class="node"><title>:node-index=[6]
:op=!u
</title><polygon fill="none" stroke="black" points="697.4,-43 669.4,-43 669.4,-20 697.4,-20 697.4,-43"></polygon><text text-anchor="middle" x="683.4" y="-27.8" font-family="Times,serif" font-size="14.00">!u</text></g><g id="[5]--[6]" class="edge"><path fill="none" stroke="black" d="M575.4,-37.1C580.64,-38.1 586.18,-38.98 591.4,-39.5 619.02,-42.23 651.4,-37.49 669.13,-34.22"></path><text text-anchor="middle" x="638.4" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[5 :else 0]" class="node"><title>:node-index=[5 :else 0]
:op=!v
</title><polygon fill="none" stroke="black" points="652.4,-23 624.4,-23 624.4,0 652.4,0 652.4,-23"></polygon><text text-anchor="middle" x="638.4" y="-7.8" font-family="Times,serif" font-size="14.00">!v</text></g><g id="[5]--[5 :else 0]" class="edge"><path fill="none" stroke="black" d="M575.81,-25.82C591.51,-22.17 611.29,-17.57 624.13,-14.59"></path><text text-anchor="middle" x="603.9" y="-26.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[7]" class="node"><title>:node-index=[7]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="747.4,-54.5 714.4,-31.5 747.4,-8.5 780.4,-31.5 747.4,-54.5"></polygon><text text-anchor="middle" x="747.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[6]--[7]" class="edge"><path fill="none" stroke="black" d="M697.55,-31.5C702.53,-31.5 708.43,-31.5 714.39,-31.5"></path></g><g id="[8]" class="node"><title>:node-index=[8]
:op=!r
</title><polygon fill="none" stroke="black" points="917.4,-43 891.4,-43 891.4,-20 917.4,-20 917.4,-43"></polygon><text text-anchor="middle" x="904.4" y="-27.8" font-family="Times,serif" font-size="14.00">!r</text></g><g id="[7]--[8]" class="edge"><path fill="none" stroke="black" d="M772.4,-37.1C777.64,-38.1 783.18,-38.98 788.4,-39.5 813.14,-41.95 876.34,-36.4 883.4,-35.5 885.93,-35.18 888.62,-34.72 891.18,-34.23"></path><text text-anchor="middle" x="847.9" y="-43.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[7 :else 0]" class="node"><title>:node-index=[7 :else 0]
:op=&lt;pop&gt;
</title><polygon fill="none" stroke="black" points="874.4,-23 821.4,-23 821.4,0 874.4,0 874.4,-23"></polygon><text text-anchor="middle" x="847.9" y="-7.8" font-family="Times,serif" font-size="14.00">&lt;pop&gt;</text></g><g id="[7]--[7 :else 0]" class="edge"><path fill="none" stroke="black" d="M773.26,-26.45C787.96,-23.47 806.54,-19.69 821.37,-16.68"></path><text text-anchor="middle" x="800.9" y="-27.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[9]" class="node"><title>:node-index=[9]
:op=if&gt;
</title><polygon fill="none" stroke="black" points="967.4,-54.5 934.4,-31.5 967.4,-8.5 1000.4,-31.5 967.4,-54.5"></polygon><text text-anchor="middle" x="967.4" y="-27.8" font-family="Times,serif" font-size="14.00">if&gt;</text></g><g id="[8]--[9]" class="edge"><path fill="none" stroke="black" d="M917.45,-31.5C922.38,-31.5 928.34,-31.5 934.38,-31.5"></path></g><g id="[9 :then 0]" class="node"><title>:node-index=[9 :then 0]
:op=42
</title><polygon fill="none" stroke="black" points="1077.4,-62 1047.4,-62 1047.4,-39 1077.4,-39 1077.4,-62"></polygon><text text-anchor="middle" x="1062.4" y="-46.8" font-family="Times,serif" font-size="14.00">42</text></g><g id="[9]--[9 :then 0]" class="edge"><path fill="none" stroke="black" d="M993.32,-36.59C1010.65,-40.13 1033.11,-44.72 1047.39,-47.64"></path><text text-anchor="middle" x="1021.9" y="-48.3" font-family="Helvetica,sans-Serif" font-size="14.00">then</text></g><g id="[9 :else 0]" class="node"><title>:node-index=[9 :else 0]
:op=true
</title><polygon fill="none" stroke="black" points="1081.4,-25 1043.4,-25 1043.4,-2 1081.4,-2 1081.4,-25"></polygon><text text-anchor="middle" x="1062.4" y="-9.8" font-family="Times,serif" font-size="14.00">true</text></g><g id="[9]--[9 :else 0]" class="edge"><path fill="none" stroke="black" d="M988.87,-23.18C995.05,-20.99 1001.92,-18.85 1008.4,-17.5 1019.78,-15.12 1032.8,-14.12 1043.08,-13.71"></path><text text-anchor="middle" x="1021.9" y="-21.3" font-family="Helvetica,sans-Serif" font-size="14.00">else</text></g><g id="[10]" class="node"><title>:node-index=[10]
:op=(invoke&gt; + 1)
</title><polygon fill="none" stroke="black" points="1151.4,-43 1098.4,-43 1098.4,-20 1151.4,-20 1151.4,-43"></polygon><text text-anchor="middle" x="1124.9" y="-27.8" font-family="Times,serif" font-size="14.00">★ + 1</text></g><g id="[10 ]" class="node"><title>:node-index=[10 ]
:op=&lt;&lt;term&gt;&gt;
</title><ellipse fill="black" stroke="black" cx="1175.6" cy="-31.5" rx="7.2" ry="7.2"></ellipse></g><g id="[10]--[10 ]" class="edge"><path fill="none" stroke="black" d="M1151.68,-31.5C1157.88,-31.5 1163.96,-31.5 1168.3,-31.5"></path></g><g id="[1 :else 0]--[2]" class="edge"><path fill="none" stroke="black" d="M232.59,-16.75C237.95,-19.16 244.37,-22.05 250.1,-24.62"></path></g><g id="[3 :else 0]--[4]" class="edge"><path fill="none" stroke="black" d="M457.46,-20.68C463.28,-22.86 469.24,-25.09 474.23,-26.95"></path></g><g id="[5 :else 0]--[6]" class="edge"><path fill="none" stroke="black" d="M652.54,-17.61C657.87,-20.09 664.02,-22.95 669.35,-25.43"></path></g><g id="[7 :else 0]--[8]" class="edge"><path fill="none" stroke="black" d="M874.55,-20.91C880.41,-23.06 886.36,-25.25 891.32,-27.07"></path></g><g id="[9 :then 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1077.43,-46.09C1083.58,-44.16 1090.99,-41.84 1098.07,-39.61"></path></g><g id="[9 :else 0]--[10]" class="edge"><path fill="none" stroke="black" d="M1081.55,-18.9C1086.84,-20.47 1092.72,-22.22 1098.38,-23.91"></path></g></g></svg></figure><div class="stax-exec-variables"><div class="variables"><div class="lside"><label>VARIABLES:</label></div><div class="rside"><table><tr><td class="no-show"></td><th>!i</th><th>!m</th><th>!s</th><th>!u</th><th>!r</th></tr><tr><th>Init</th><td>false</td><td>1</td><td>1</td><td>1</td><td>1</td></tr></table></div></div></div><div class="stax-exec-stack"><div class="stack"><div class="lside"><label>STACK:</label></div><div class="rside"><div class="empty" id="stack">&empty;</div></div></div></div><div class="stax-exec-output"></div><div class="stax-exec-errors"><div class="stack"><div class="lside"><label>ERRORS:</label></div><div class="rside"><table><tr><td><pre>`Z&apos; is not a legal operation!</pre></td></tr></table></div></div></div></div></div>

<ul class="org-ul">
<li><p>
One errors found in Path Analysis
</p>
<ul class="org-ul">
<li>Path tree shows Blue line/stroke for valid path from start-node to path error (<code>Z</code>), Red from there on to terminal node</li>
<li>Hover over it to see that it is similar to (same underlying cause), but worded differently than Runtime Error</li>
</ul>
<ul class="org-ul">
<li>One error in Runtime Tree &#x2013; execution halts on error as in prior run
<ul class="org-ul">
<li>Exec tree shows Green line/stroke for successful node execution from start-node to last succesful node, Red for failed node, Black beyond.</li>
<li>Error in runtime produce no <b>Last</b> row in <b>VARIABLES</b>, and invalidated <b>STACK</b> (shown as <b>&empty;</b>)</li>
<li>Exec Tree turns [start→then→then→then→else] does not go to term</li>
</ul></li>
<li>Hover over the Purple node for its <b>EXEC ERRORS</b>. Also shown as <b>ERRORS</b> in the result area</li>
<li>Nodes with Runtime Errors are colored by CSS in <a href="doc/svg/stax.css">svg/stax.css</a>.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf963eaa" class="outline-4">
<h4 id="orgf963eaa">A Complete Visualization of Parse, Path, and Runtime Errors</h4>
<div class="outline-text-4" id="text-orgf963eaa">
<p>
The set of all Runtime Errors and their equivalent Parse and Path Errors, can be seen in the visualization file
</p>

<p>
<a href="svg/all-runtime-flag-test.html" target="_blank">svg/all-runtime-flag-test.html</a>
</p>

<p>
It uses the flag declarations in the following table to test 10 different failures, and shows 11 runs and their matching paths (out of 2<sup>10</sup> = 1024 total paths).
</p>
<ul class="org-ul">
<li>!p1-4 are runtime errors with parse time equivalents</li>
<li>!s1-4 are runtime errors with static analysis equivalents</li>
<li>!r1-2 are runtime errors with neither parse nor static analysis equivalents</li>
</ul>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">#</th>
<th scope="col" class="org-left">FLAG</th>
<th scope="col" class="org-left">LIKE</th>
<th scope="col" class="org-right">NTH</th>
<th scope="col" class="org-left">FN fail-node-do-…</th>
<th scope="col" class="org-left">CALLS fail-node-if-…</th>
<th scope="col" class="org-left">WHICH MAYBE RETURNS RUNTIME error=…</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">!p1</td>
<td class="org-left">parse</td>
<td class="org-right">1</td>
<td class="org-left">NA</td>
<td class="org-left">NA</td>
<td class="org-left">runtime-illegal-operation</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">!p2</td>
<td class="org-left">parse</td>
<td class="org-right">2</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-wrong-number-args</td>
<td class="org-left">runtime-invoke-wrong-number-args</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">!p3</td>
<td class="org-left">parse</td>
<td class="org-right">4</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-fn-error</td>
<td class="org-left">runtime-invoke-fun-not-function</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">!p4</td>
<td class="org-left">parse</td>
<td class="org-right">8</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-arity-error</td>
<td class="org-left">runtime-invoke-arity-not-pos-int</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">!s1</td>
<td class="org-left">static</td>
<td class="org-right">16</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-arity-error</td>
<td class="org-left">runtime-insufficient-stack</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-left">!s2</td>
<td class="org-left">static</td>
<td class="org-right">32</td>
<td class="org-left">fail-node-do-pop</td>
<td class="org-left">fail-node-if-stack-empty</td>
<td class="org-left">runtime-insufficient-stack</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-left">!s3</td>
<td class="org-left">static</td>
<td class="org-right">64</td>
<td class="org-left">fail-node-do-def-var</td>
<td class="org-left">fail-node-if-stack-empty</td>
<td class="org-left">runtime-insufficient-stack</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-left">!s4</td>
<td class="org-left">static</td>
<td class="org-right">128</td>
<td class="org-left">fail-node-do-push-var</td>
<td class="org-left">fail-node-if-var-ref-not-defined</td>
<td class="org-left">runtime-var-not-defined</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-left">!r1</td>
<td class="org-left">NA</td>
<td class="org-right">256</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-apply-error</td>
<td class="org-left">runtime-invoke-failed</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-left">!r2</td>
<td class="org-left">NA</td>
<td class="org-right">512</td>
<td class="org-left">fail-node-do-invoke</td>
<td class="org-left">fail-node-if-invoke-val-error</td>
<td class="org-left">runtime-invoke-returned-complex-val</td>
</tr>
</tbody>
</table>

<p>
The runs are numbered backwards below to show their correspondence to the numbers in the flags above (the first is unnumbered because it is the happy path &#x2013; the only Green result)
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">#</th>
<th scope="col" class="org-right">p1</th>
<th scope="col" class="org-right">p2</th>
<th scope="col" class="org-right">p3</th>
<th scope="col" class="org-right">p4</th>
<th scope="col" class="org-right">s1</th>
<th scope="col" class="org-right">s2</th>
<th scope="col" class="org-right">s3</th>
<th scope="col" class="org-right">s4</th>
<th scope="col" class="org-right">r1</th>
<th scope="col" class="org-right">r2</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">false</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table>


<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">let</span> [decls '[!p1 !p2 !p3 !p4 !s1 !s2 !s3 !s4 !r1 !r2]
      ops '[!p1 (if&gt; else&gt; Z)
            !p2 (if&gt; else&gt; (invoke&gt; +))
            !p3 (if&gt; else&gt; !p3 (invoke&gt; &#191; 1))
            !p4 (if&gt; else&gt; (invoke&gt; + 0))
            !s1 (if&gt; else&gt; (invoke&gt; + 1))
            !s2 (if&gt; else&gt; &lt;pop&gt;)
            !s3 (if&gt; else&gt; !v+)
            !s4 (if&gt; else&gt; !z)
            !r1 (if&gt; else&gt; !r1 (invoke&gt; + 1))
            !r2 (if&gt; else&gt; !r2 (invoke&gt; list 1))]
      args [  1     1     1     1     1     1     1     1     1     1 
              1     1     1     1     1     1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span> 
              1     1     1     1     1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1 
              1     1     1     1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1 
              1     1     1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1 
              1     1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1 
              1     1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1     1 
              1     1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1     1     1 
              1     1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1     1     1     1 
              1   <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1     1     1     1     1 
            <span style="color: #34c8d8; font-weight: bold;">false</span>   1     1     1     1     1     1     1     1     1 ]
      {<span style="color: #34c8d8; font-weight: bold;">:keys</span> [paths results] <span style="color: #34c8d8; font-weight: bold;">:as</span> data}
      (<span style="color: #ffff0b;">binding</span> [<span style="color: #4ac964;">*stax-op-short-invoke&gt;*</span> '&#9733;
                <span style="color: #4ac964;">*stax-errors-prevent-exec*</span> <span style="color: #34c8d8; font-weight: bold;">false</span>]
        (add-svg-data (apply stackfn-dbg (build-node-data decls ops) args)))
      runs (partition (count decls) args)
      run-to-nth (<span style="color: #ffff0b;">fn</span> [run] (<span style="color: #9fcb66;">Integer</span>/parseInt (apply str (map #(<span style="color: #ffff0b;">if</span> <span style="color: #4ac964;">%</span> 0 1) run)) 2))
      nths (map run-to-nth runs)
      paths-for-runs (<span style="color: #ffff0b;">fn</span> [paths nths] (mapv #(nth paths <span style="color: #4ac964;">%</span>) nths))
      tree-xml (<span style="color: #ffff0b;">-&gt;</span> data node-data-to-stax-tree-xml)
      path-xmls (into [] (<span style="color: #ffff0b;">-&gt;</span> data
                             (update <span style="color: #34c8d8; font-weight: bold;">:paths</span> paths-for-runs nths)
                             (update <span style="color: #34c8d8; font-weight: bold;">:turns</span> paths-for-runs nths)
                             node-data-to-stax-paths-xml))
      exec-xmls (into [] (node-data-to-stax-execs-xml data))]
  (spit (<span style="color: #9fcb66;">io</span>/file <span style="color: #ff7fff;">"svg/all-runtime-flag-test.html"</span>)
        (html
         [<span style="color: #34c8d8; font-weight: bold;">:html</span> [<span style="color: #34c8d8; font-weight: bold;">:head</span>
                 [<span style="color: #34c8d8; font-weight: bold;">:link</span> {<span style="color: #34c8d8; font-weight: bold;">:rel</span> <span style="color: #ff7fff;">"stylesheet"</span> <span style="color: #34c8d8; font-weight: bold;">:href</span> <span style="color: #ff7fff;">"stax-body.css"</span>}]
                 [<span style="color: #34c8d8; font-weight: bold;">:link</span> {<span style="color: #34c8d8; font-weight: bold;">:rel</span> <span style="color: #ff7fff;">"stylesheet"</span> <span style="color: #34c8d8; font-weight: bold;">:href</span> <span style="color: #ff7fff;">"stax.css"</span>}]
                 [<span style="color: #34c8d8; font-weight: bold;">:link</span> {<span style="color: #34c8d8; font-weight: bold;">:rel</span> <span style="color: #ff7fff;">"preconnect"</span> <span style="color: #34c8d8; font-weight: bold;">:href</span> <span style="color: #ff7fff;">"https://fonts.googleapis.com"</span>}]
                 [<span style="color: #34c8d8; font-weight: bold;">:link</span> {<span style="color: #34c8d8; font-weight: bold;">:rel</span> <span style="color: #ff7fff;">"preconnect"</span> <span style="color: #34c8d8; font-weight: bold;">:href</span> <span style="color: #ff7fff;">"https://fonts.gstatic.com"</span> <span style="color: #34c8d8; font-weight: bold;">:crossorigin</span> <span style="color: #34c8d8; font-weight: bold;">true</span>}]
                 [<span style="color: #34c8d8; font-weight: bold;">:link</span> {<span style="color: #34c8d8; font-weight: bold;">:rel</span> <span style="color: #ff7fff;">"stylesheet"</span> <span style="color: #34c8d8; font-weight: bold;">:href</span> <span style="color: #ff7fff;">"https://fonts.googleapis.com/css2?family=Oxygen&amp;display=swap"</span>}]]
          [<span style="color: #34c8d8; font-weight: bold;">:body</span>
           (div-stax-tree tree-xml)
           (into [<span style="color: #34c8d8; font-weight: bold;">:div</span>]
                 (mapcat (<span style="color: #ffff0b;">fn</span> [path-n exec-n]
                           [(div-stax-path path-n)
                            (div-stax-exec exec-n)])
                         path-xmls exec-xmls))]])))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd7d4761" class="outline-3">
<h3 id="orgd7d4761">Is assigning errors colors wise?</h3>
<div class="outline-text-3" id="text-orgd7d4761">
<p>
A couple notes on the SVG visualization used in this project.
</p>

<ol class="org-ol">
<li>Issues of Accesibility
<ul class="org-ul">
<li>These are not address in <code>[kdhouser24/stax "0.1.0"]</code> as the vizualization is dev only.  But in a proper front-end:
<ul class="org-ul">
<li>Shapes would be used in addition to color so that users with CVD (Color Vision Deficiency) could also have meaningful error indicators.</li>
<li>The use of the &lt;title&gt; element as an info box would be replaced with accessibility compliant popups with ARIA tagging.  Information in the &lt;title&gt; element can only be accessed by hovering with a mouse, and it is therefore incompatible with mobile devices, and assistive technology like screen magnifiers or screen readers.</li>
</ul></li>
</ul></li>

<li>Can colors clash &#x2013; i.e. can any one node potentially be colored by two or more errors such that one color (the last applied) would override the other(s)?
The answer is that the current implementation's style does not create color contention for the following reasons:
<ul class="org-ul">
<li>zones tree and path errors are mutually exclusive with respect to :op-type
<ul class="org-ul">
<li>tree invoke errors {[:err-zone ::zone=tree] [:err-type ::error=parse-invoke-*​]})
<ul class="org-ul">
<li>only occur on nodes of type op=invoke</li>
</ul></li>
<li>path variable errors ({[:err-zone ::zone=path] [:err-type ::error=static-var-*​]})
<ul class="org-ul">
<li>only occur on nodes of type op=push-var</li>
</ul></li>
<li>path stack insufficient errors ({[:err-zone ::zone=path] [:err-type ::error=static-insufficient-stack]})
<ul class="org-ul">
<li>occur on nodes with well-formed ops of type
<ul class="org-ul">
<li>op=pop</li>
<li>op=def-var</li>
<li>op=if (and its path linear replacement op=if-pop)</li>
<li>op=invoke
<ul class="org-ul">
<li>potential collision with invoke on svg path tree are prevented by the behavior of <code>kdh.stax.nodify/count-card-in-path</code>, which invalidates the count (stops counting) at the first node with errors</li>
</ul></li>
</ul></li>
</ul></li>
<li>zone exec clears errors on each node it executes (<code>kdh.stax.nodify/exec-nodes</code> calls <code>kdh.stax.nodify/exec-nodes</code> on <code>(dissoc node :errors)</code>)</li>
</ul></li>
<li>These guarantee that colors will not clash!</li>
</ul></li>
</ol>
<hr />
</div>
</div>

<div id="outline-container-org45134de" class="outline-3">
<h3 id="org45134de">Debugging Stax Execution in SVG</h3>
<div class="outline-text-3" id="text-org45134de">
<p>
The node-data created by <code>kdh.stax.nodify/build-node-data</code> can be passed into <code>kdh.stax.core/stackfn-dbg</code> to add the execution values. <code>kdh.stax.svg/node-data-to-html-file</code> calls the decorator functions in <code>kdh.stax.svg</code> to complete the visualization and outputs an html file.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(str
 (node-data-to-html-file (<span style="color: #9fcb66;">io</span>/file <span style="color: #ff7fff;">"doc"</span> <span style="color: #ff7fff;">"svg"</span> <span style="color: #ff7fff;">"rpl-example-tree-path-exec.html"</span>)
                         (<span style="color: #ffff0b;">-&gt;</span> (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-rpl-example)
                             (stackfn-dbg 1 2 4
                                           3 3 3))))
</pre>
</div>

<p>
<a href="svg/rpl-example-tree-path-exec.html">svg/rpl-example-tree-path-exec.html</a>
</p>
</div>

<div id="outline-container-org0c88f15" class="outline-4">
<h4 id="org0c88f15">A Walkthrough of Good Data Visualization</h4>
<div class="outline-text-4" id="text-org0c88f15">
<p>
Click on the link below to open the visualization that exercises the paths in the assignment example in another tab
</p>
<p target="_blank">
<a href="svg/rpl-example-tree-path-exec.html" target="_blank">rpl-example-tree-path-exec.html</a>
</p>

<dl class="org-dl">
<dt>Green</dt><dd>Shows the <code>:results</code> overlay of the <code>:node-tree</code>
<ul class="org-ul">
<li>This is the execution section</li>
<li>If you hover over nodes, you should see the popup no longer has "size=n"</li>
<li>Instead, you see "var-map={&lt;!var&gt; &lt;val&gt;}" which is the state of the variables after the node executes</li>
<li>Also in the popup is the "stack=[&lt;values&gt;]" which is the state of the stack after the node executes</li>
<li>Note that the path (the edges and the perimeter of the polygons) is colored green from start node to terminal node
<ul class="org-ul">
<li>That indicates no runtime errors in that path</li>
</ul></li>
<li>Note that the nodes in the path are filled with blue
<ul class="org-ul">
<li>That indicates there are no nodes with runtime errors</li>
</ul></li>
<li>Each result also has a section below it with
<ul class="org-ul">
<li>Variables Table (Init and Last state)</li>
<li>the final Stack value(s)</li>
<li>and the Output text box (if present)</li>
</ul></li>
</ul></dd>
</dl>

<hr />
</div>
</div>
</div>
</div>

<div id="outline-container-orge6cb14b" class="outline-2">
<h2 id="orge6cb14b">Optimization Case Studies</h2>
<div class="outline-text-2" id="text-orge6cb14b">
<p>
Throughout the development of <code>kdh/stax</code>, I optimized several sections of code.  While an exhaustive review is not feasible, I would like to show a few optimizations I made to give a sense of the work I did.
</p>
</div>

<div id="outline-container-orgcb66691" class="outline-3">
<h3 id="orgcb66691">Sorting Paths</h3>
<div class="outline-text-3" id="text-orgcb66691">
<p>
I want <code>build-node-data</code> and <code>build-node-data*</code> to produce the same node-data (specifically <code>:node-tree</code>, and <code>:paths</code>, as the others are derived from these).
Since paths is a vector of vectors, order matters. Because of their underlying implementations, <code>build-node-data</code> and <code>build-node-data*</code> produce paths in different order.
I wrote <code>mapify-paths</code> to make paths into a deep associative structure in order to compare them with <code>clojure.core/diff</code>.
</p>

<p>
But I want my tree visualization to flow left to right and with <code>then</code> ranked above <code>else</code>.
I want the enumerated paths in the visualization to display the top most path (all <code>then</code>) to bottom most (all <code>else</code>).
To accomplish this, I sort the paths reverse alphabetically by their turns (simplified here to sorting their turns).
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [turns [<span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span>]
      else-over-then (vec (<span style="color: #ffff0b;">for</span> [t1 turns t2 turns t3 turns] [<span style="color: #ff7fff;">"start"</span> t1 t2 t3 <span style="color: #ff7fff;">"term"</span>]))
      then-over-else (vec (sort-by str (comp - compare) else-over-then))]
     {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span>  else-over-then
      <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span>  then-over-else})
(=&gt;
 {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]],
  <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]]}
 )
</pre>
</div>

<p>
This works perfectly only because the paths have the same length.  If they don't (often the case), sort favors length over content.
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example
      paths (mapv path-to-turns (<span style="color: #ffff0b;">-&gt;</span> ops nodify-ops* <span style="color: #34c8d8; font-weight: bold;">:paths</span>))
      else-over-then (vec (sort-by identity paths))
      then-over-else (vec (sort-by identity (comp - compare) else-over-then))]
     {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span>  else-over-then
      <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span>  then-over-else})

(=&gt;
 {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]],
  <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]]}
 )
</pre>
</div>

<p>
Years ago, I needed to sort vectors like this - i.e. sort sequences (regardless of length) by comparing each sequential item.
After realizing that the different length of the data was confounding my sort, I hit upon a genius idea (always a bad sign, right?)
</p>

<p>
What if I could make the length of all of the sequences equal?
</p>

<p>
So I wrote a function <code>seq-to-deep</code> that turns a sequence into a two length vector containing item one in the first slot,
and another two length vector whose first was item two in the second slot&#x2026;
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">seq-to-deep</span> [v]
  (<span style="color: #ffff0b;">-&gt;&gt;</span> v reverse
       (map vector)
       (reduce (<span style="color: #ffff0b;">fn</span> [l r] (into r [l])) [])))

(=&gt; <span style="color: #9fcb66;">#'user</span>/seq-to-deep )

(seq-to-deep [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>])

(=&gt; [<span style="color: #ff7fff;">"start"</span> [<span style="color: #ff7fff;">"else"</span> [<span style="color: #ff7fff;">"then"</span> [<span style="color: #ff7fff;">"else"</span> [<span style="color: #ff7fff;">"else"</span> [<span style="color: #ff7fff;">"else"</span> [<span style="color: #ff7fff;">"else"</span> [<span style="color: #ff7fff;">"term"</span> []]]]]]]]] )
</pre>
</div>

<p>
This basically reduces a list or vector of any length into a vector of two-tuples,
where the first is a value and the second is, recursively, another two tuple
(similar to a linked list as a one legged cons tree in lisps of old - with [] standing in for nil to end the cons cell chain)
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example
      paths (mapv path-to-turns (<span style="color: #ffff0b;">-&gt;</span> ops nodify-ops* <span style="color: #34c8d8; font-weight: bold;">:paths</span>))
      else-over-then (vec (sort-by seq-to-deep paths))
      then-over-else (vec (sort-by seq-to-deep (comp - compare) else-over-then))]
  {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span>  else-over-then
   <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span>  then-over-else})

(=&gt;
 {<span style="color: #34c8d8; font-weight: bold;">:else-over-then</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]],
  <span style="color: #34c8d8; font-weight: bold;">:then-over-else</span> [[<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"then"</span> <span style="color: #ff7fff;">"term"</span>]
                   [<span style="color: #ff7fff;">"start"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"else"</span> <span style="color: #ff7fff;">"term"</span>]]}
 )
</pre>
</div>

<p>
It's ugly, and not very space efficient &#x2013; look at all those vectors!
But, it worked in a pinch!!  And remained one of my favorite ad-hoc odd-hacks!!!
Top of my utils for many years.
</p>

<p>
I pulled it out to use for stax, but having learned more in the intervening decade,
I decided that what I really want is a compare fn for <code>sort-by</code>'s compare arg,
not another function to comp onto <code>sort-by</code>'s keyfn arg.
</p>

<p>
The function sequential-compare1 compares each succesive term in two paths
returning the comparison at the first difference
</p>

<div class="org-src-container">
<pre class="src src-clj"><span class="linenr"> 1: </span>(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">sequential-compare1</span> [path-1 path-2]
<span class="linenr"> 2: </span>  (<span style="color: #ffff0b;">if</span> (= path-1 path-2) 0
<span class="linenr"> 3: </span>      (<span style="color: #ffff0b;">loop</span> [[nth-1 &amp; more-1] path-1
<span class="linenr"> 4: </span>             [nth-2 &amp; more-2] path-2]
<span class="linenr"> 5: </span>        (<span style="color: #ffff0b;">let</span> [comparison (compare nth-1 nth-2)]
<span class="linenr"> 6: </span>          (<span style="color: #ffff0b;">if-not</span> (zero? comparison)
<span class="linenr"> 7: </span>            comparison
<span class="linenr"> 8: </span>            (<span style="color: #ffff0b;">if</span> (nil? more-1)
<span class="linenr"> 9: </span>              -1
<span class="linenr">10: </span>              (<span style="color: #ffff0b;">if</span> (nil? more-2)
<span class="linenr">11: </span>                +1
<span class="linenr">12: </span>                (<span style="color: #ffff0b;">recur</span> more-1 more-2))))))))
<span class="linenr">13: </span>
<span class="linenr">14: </span>(=&gt; <span style="color: #9fcb66;">#'user</span>/sequential-compare1 )
</pre>
</div>

<p>
We can take advantage of the following facts to simplify sequential-compare1:
</p>
<ol class="org-ol">
<li>binding form [item &amp; more-items] when bound to the last item
(i.e. no more-items) makes more-item nil like next, not '() like rest</li>
<li>nil &lt; item, if item is not nil, so the shorter path that is identical
to the longer, up until its end, sorts &lt;</li>
<li>in the loop, there will never be two paths that are equal in size
and equal in each item, because they would be equal in the first if and return 0</li>
</ol>


<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">sequential-compare2</span> [path-1 path-2]
  (<span style="color: #ffff0b;">if</span> (= path-1 path-2) 0
      (<span style="color: #ffff0b;">loop</span> [[nth-1 &amp; more-1] path-1
             [nth-2 &amp; more-2] path-2]
        (<span style="color: #ffff0b;">let</span> [comparison (compare nth-1 nth-2)]
          (<span style="color: #ffff0b;">if</span> (zero? comparison)
            (<span style="color: #ffff0b;">recur</span> more-1 more-2)
            comparison)))))

(=&gt; <span style="color: #9fcb66;">#'user</span>/sequential-compare2 )
</pre>
</div>

<p>
Now we can compare the three alternatives (seq-to-deep, sequential-compare1, sequential-compare2)
for equality and execution speed in best (already sorted) and worst cases (reverse of sort)
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example
      paths (<span style="color: #ffff0b;">-&gt;</span> ops nodify-ops* <span style="color: #34c8d8; font-weight: bold;">:paths</span>)
      turns (mapv path-to-turns paths)
      else-over-then-with-seq-to-deep (sort-by seq-to-deep turns)
      then-over-else-with-seq-to-deep (sort-by seq-to-deep (comp - compare) turns)
      else-over-then-with-sequential-compare1 (vec (sort-by identity sequential-compare1 turns))
      then-over-else-with-sequential-compare1 (vec (sort-by identity (comp - sequential-compare1) turns))
      else-over-then-with-sequential-compare2 (vec (sort-by identity sequential-compare2 turns))
      then-over-else-with-sequential-compare2 (vec (sort-by identity (comp - sequential-compare2) turns))
      they-are-equal (<span style="color: #ffff0b;">and</span> (= else-over-then-with-seq-to-deep
                             else-over-then-with-sequential-compare1
                             else-over-then-with-sequential-compare2)
                          (= then-over-else-with-seq-to-deep
                             then-over-else-with-sequential-compare1
                             then-over-else-with-sequential-compare2))]
  (<span style="color: #ffff0b;">when</span> they-are-equal
    (<span style="color: #ffff0b;">let</span> [then-over-else then-over-else-with-seq-to-deep
          else-over-then else-over-then-with-seq-to-deep]
      (qb (sort-by seq-to-deep (comp - compare) then-over-else))
      (qb (sort-by seq-to-deep (comp - compare) else-over-then))
      (qb (sort-by seq-to-deep compare then-over-else))
      (qb (sort-by seq-to-deep compare else-over-then))
      (qb (sort-by identity (comp - sequential-compare1) then-over-else))
      (qb (sort-by identity (comp - sequential-compare1) else-over-then))
      (qb (sort-by identity sequential-compare1 then-over-else))
      (qb (sort-by identity sequential-compare1 else-over-then))
      (qb (sort-by identity (comp - sequential-compare2) then-over-else))
      (qb (sort-by identity (comp - sequential-compare2) else-over-then))
      (qb (sort-by identity sequential-compare2 then-over-else))
      (qb (sort-by identity sequential-compare2 else-over-then))
      they-are-equal)))

(=&gt; <span style="color: #34c8d8; font-weight: bold;">true</span> )
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 6:</span> <code>seq-to-deep</code> vs <code>sequential-compare1</code> vs <code>sequential-compare2</code></caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Evaluation</th>
<th scope="col" class="org-left">Execution time mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(sort-by seq-to-deep (comp - compare) then-over-else)</td>
<td class="org-left">29.105317 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by seq-to-deep (comp - compare) else-over-then)</td>
<td class="org-left">28.966610 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by seq-to-deep compare then-over-else)</td>
<td class="org-left">31.041590 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by seq-to-deep compare else-over-then)</td>
<td class="org-left">29.071545 µs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">29.546266 μs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare1) then-over-else)</td>
<td class="org-left">2.491231 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare1) else-over-then)</td>
<td class="org-left">2.517452 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare1 then-over-else)</td>
<td class="org-left">2.337029 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare1 else-over-then)</td>
<td class="org-left">2.383909 µs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">2.4324053 μs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare2) then-over-else)</td>
<td class="org-left">2.517697 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare2) else-over-then)</td>
<td class="org-left">2.479772 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare2 then-over-else)</td>
<td class="org-left">2.343008 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare2 else-over-then)</td>
<td class="org-left">2.313736 µs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">2.4135533 μs</td>
</tr>
</tbody>
</table>

<p>
As hoped, both sequential-compare1 and sequential-compare2 outperform seq-to-deep (by an order of magnitude)
sequential-compare2 outperforms sequential-compare1 by about 0.8%
</p>

<p>
Let's see how the two sequential-compare functions do with a bigger tree
</p>

<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-worse-example
      paths (<span style="color: #ffff0b;">-&gt;</span> ops nodify-ops* <span style="color: #34c8d8; font-weight: bold;">:paths</span>)
      number-of-paths (count paths)
      longest-path (apply max (map count paths))]
  {<span style="color: #34c8d8; font-weight: bold;">:number-of-paths</span> number-of-paths
   <span style="color: #34c8d8; font-weight: bold;">:longest-path</span> longest-path})

(=&gt; {<span style="color: #34c8d8; font-weight: bold;">:number-of-paths</span> 86, <span style="color: #34c8d8; font-weight: bold;">:longest-path</span> 68} )


(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-worse-example
      paths (<span style="color: #ffff0b;">-&gt;</span> ops nodify-ops* <span style="color: #34c8d8; font-weight: bold;">:paths</span>)
      turns (mapv path-to-turns paths)
      else-over-then-with-sequential-compare1 (sort-by identity sequential-compare1 turns)
      then-over-else-with-sequential-compare1 (sort-by identity (comp - sequential-compare1) turns)
      else-over-then-with-sequential-compare2 (sort-by identity sequential-compare2 turns)
      then-over-else-with-sequential-compare2 (sort-by identity (comp - sequential-compare2) turns)
      they-are-equal (<span style="color: #ffff0b;">and</span> (= else-over-then-with-sequential-compare1
                             else-over-then-with-sequential-compare2)
                          (= then-over-else-with-sequential-compare1
                             then-over-else-with-sequential-compare2))]
  (<span style="color: #ffff0b;">when</span> they-are-equal
    (<span style="color: #ffff0b;">let</span> [then-over-else then-over-else-with-sequential-compare1
          else-over-then else-over-then-with-sequential-compare1]
      (qb (sort-by identity (comp - sequential-compare1) then-over-else))
      (qb (sort-by identity (comp - sequential-compare1) else-over-then))
      (qb (sort-by identity sequential-compare1 then-over-else))
      (qb (sort-by identity sequential-compare1 else-over-then))
      (qb (sort-by identity (comp - sequential-compare2) then-over-else))
      (qb (sort-by identity (comp - sequential-compare2) else-over-then))
      (qb (sort-by identity sequential-compare2 then-over-else))
      (qb (sort-by identity sequential-compare2 else-over-then))
      they-are-equal)))

(=&gt; <span style="color: #34c8d8; font-weight: bold;">true</span> )
</pre>
</div>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 7:</span> <code>sequential-compare1</code> vs <code>sequential-compare2</code> final round</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Evaluation</th>
<th scope="col" class="org-left">Execution time mean</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare1) then-over-else)</td>
<td class="org-left">52.638949 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare1) else-over-then)</td>
<td class="org-left">50.717881 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare1 then-over-else)</td>
<td class="org-left">49.913771 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare1 else-over-then)</td>
<td class="org-left">49.833063 µs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">50.775916 μs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare2) then-over-else)</td>
<td class="org-left">50.668951 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity (comp - sequential-compare2) else-over-then)</td>
<td class="org-left">49.301679 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare2 then-over-else)</td>
<td class="org-left">48.979257 µs</td>
</tr>

<tr>
<td class="org-left">(sort-by identity sequential-compare2 else-over-then)</td>
<td class="org-left">49.346938 µs</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">49.574206 μs</td>
</tr>
</tbody>
</table>

<p>
<code>sequential-compare2</code> does even better against <code>sequential-compare1</code> by about 2.2%
</p>

<p>
So <code>kdh.stax.util/sequential-compare</code> is now <code>sequential-compare2</code>, and <code>seq-to-deep</code> can be retired!
</p>
</div>
</div>

<div id="outline-container-org5ccd0e3" class="outline-3">
<h3 id="org5ccd0e3">VOVOSON vs VOVON</h3>
<div class="outline-text-3" id="text-org5ccd0e3">
<p>
<code>:paths</code> in the node-data is a VOVON (a vector or vectors of nodes).
</p>

<p>
Early in the development of the functions that derive the <code>:paths</code> from the <code>:node-tree</code>, I came up with an version of <code>node-tree-to-node-paths</code> that dealt with subpaths as VOVOSON (vector of vectors of sequences of nodes) instead of a VOVON (a vector of vector of nodes, like the paths).  To explain why I chose this implementation, let's look at what function are involved and how they work:
</p>

<ul class="org-ul">
<li><code>node-tree-to-node-paths*</code> calls <code>any-son-to-vovoson</code> on the node-tree
<ul class="org-ul">
<li><code>any-son-to-vovoson</code> partitions the SON (sequence of nodes) by <code>if-node?</code>, creating alternating sequences of non-if-nodes and if-nodes
<ul class="org-ul">
<li>It <code>mapv</code> dispatches these to either <code>non-if-son-to-vovoson</code> or <code>if-son-to-vovoson</code>
<ul class="org-ul">
<li><code>non-if-son-to-vovoson</code> returns <code>[[​SON]​]</code> (a single sequence in the VOVOSON)</li>
<li><code>if-son-to-vovoson</code> calls <code>any-son-to-vovoson</code> on the then SON and again on the else SON
and uses <code>into</code> to combine the results into a single VOVOSON.</li>
</ul></li>
<li>When the <code>mapv</code> in each call to <code>any-son-to-vovoson</code> finishes, its vector of VOVOSON is reversed with <code>rseq</code> and reduced with <code>vovoson&gt;vovoson</code>, which is a combinor on <code>into</code> &#x2013; <code>(vec (for [v2' v2, v1' v1] (into v2' v1')))</code>.</li>
</ul></li>
<li>Finally the resulting VOVOSON returned by the first call to <code>any-son-to-vovoson</code> is passed by <code>node-tree-to-node-paths</code> to <code>vovoson-to-vovon</code>
<ul class="org-ul">
<li><code>vovoson-to-vovon</code> maps across each path (a VOSON) to <code>reduce</code> <code>into</code> on a <code>[start-node-template]</code>, then pushes a <code>terminal-node</code> onto the end of the path.</li>
</ul></li>
</ul></li>
</ul>

<p>
I reasoned that a VOVOSON could be converted into a VOVON at the last step with reduce into, preserving the order of the nodes, but that before that point there would be many combinations of subpaths where <code>into</code> would be more efficient with a vovoson.  Had I done the trivial benchmark below, however I would have discovered that while a combination of VOVON (1. below) is indeed faster than combination of an equivalent VOVOSON (2. below), the last step in VOVOSON (3. below) is surprisingly slow.
</p>


<div class="org-src-container">
<pre class="src src-clj">(<span style="color: #ffff0b;">let</span> [vovon (into [] (range 1000))                   <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">1. combination of VOVON   </span>
      vovoson (into [] (partition 10 (range 1000)))  <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">2. combination of VOVOSON</span>
      vovoson-to-vovon (reduce into [] vovoson)      <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">3. last step in VOVOSON</span>
      they-are-equal (= vovon vovoson-to-vovon)]     <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">3.a   is equal to VOVON</span>
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (into [] vovon))                     <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">1. combination of VOVON   </span>
      (qb (into [] vovoson))                   <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">2. combination of VOVOSON </span>
      (qb (reduce into [] vovoson))            <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">3. last step in VOVOSON</span>
      they-are-equal)))

(=&gt; <span style="color: #34c8d8; font-weight: bold;">true</span> )
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(into [] vovon)                                       ;; 1. combination of VOVON </span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 24918 in 6 samples of 4153 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 23.933749 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 709.013152 ns</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 23.143810 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 24.924998 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(into [] vovoson)                                   ;; 2. combination of VOVOSON</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 226974 in 6 samples of 37829 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 2.486070 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 42.345407 ns</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 2.444171 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 2.544964 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(reduce into [] vovoson)                              ;; 3. last step in VOVOSON</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 5382 in 6 samples of 897 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 113.284525 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.178019 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 111.991958 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 114.752925 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>
</pre>
</div>

<p>
But I didn't do that then. The VOVOSON implementation was simpler to write as a call to <code>any-son-to-vovoson</code> eventually recurses into <code>non-if-son-to-vovoson</code>, which all return <code>[[son]]</code> where.  Once I implemented the vovoson way, I went back and wrote a VOVON version (the functions of which I renamed with <code>paths</code> and <code>subpaths</code> to move away from implementation-naming and toward functional-naming).
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">VOVOSON implementation</th>
<th scope="col" class="org-left">VOVON implementation</th>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">FINAL implementation is VOVON (renamed)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">node-tree-to-node-paths*</td>
<td class="org-left">node-tree-to-node-paths</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">node-tree-to-node-paths</td>
</tr>

<tr>
<td class="org-left">any-son-to-vovoson</td>
<td class="org-left">any-son-to-vovon</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">any-son-to-paths</td>
</tr>

<tr>
<td class="org-left">non-if-son-to-vovoson</td>
<td class="org-left">non-if-son-to-vovon</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">non-if-son-to-subpaths</td>
</tr>

<tr>
<td class="org-left">if-son-to-vovoson</td>
<td class="org-left">if-son-to-vovon</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">if-son-to-subpaths</td>
</tr>

<tr>
<td class="org-left">vovoson&gt;vovoson</td>
<td class="org-left">vovon&gt;vovon</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">combine-paths</td>
</tr>

<tr>
<td class="org-left">vovoson-to-vovon</td>
<td class="org-left">add-ends-to-vovon</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">add-ends-to-paths    (its only job now)</td>
</tr>
</tbody>
</table>

<p>
The quick bench results below show that the VOVON implementation outperforms the VOVOSON in all but one run, by a small margin to significant margin with the following from examples.clj:
</p>
<ul class="org-ul">
<li>ex/ops-rpl-example</li>
<li>ex/ops-kdh-half-bad-example</li>
<li>ex/ops-kdh-bad-example</li>
<li>ex/ops-kdh-worse-example</li>
</ul>

<p>
That's why we have metrics, to challenge our assumptions.
</p>

<p>
The VOVOSON implementation is now in dev/clj/kdh/stax/<a href="#org3e7671a">dev*.clj</a>
</p>

<div class="org-src-container">
<pre class="src src-clj">(load-file <span style="color: #ff7fff;">"dev/clj/kdh/stax/dev*.clj"</span>)

(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-rpl-example
      <span style="color: #9fcb66;">#_</span><span style="color: #767283; font-style: italic;">ex/ops-kdh-bad-example</span>
      paths (node-tree-to-node-paths (nodify-ops ops))
      paths* (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops))
      they-are-equal (= paths paths*)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (node-tree-to-node-paths (nodify-ops ops)))
      (qb (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops)))
      they-are-equal)
    (take 2 (<span style="color: #9fcb66;">clojure.data</span>/diff (simplify-nodes-in-paths paths)
                               (simplify-nodes-in-paths paths*)))))

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))                  VOVOSON is FASTER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 11994 in 6 samples of 1999 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 52.939464 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 5.233579 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 48.903212 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 60.172453 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 10548 in 6 samples of 1758 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 61.492943 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 9.227459 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 53.235188 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 73.071885 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))                  VOVOSON is SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 11742 in 6 samples of 1957 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 52.076986 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.256195 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 50.644053 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 53.821090 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 1 outliers in 6 samples (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 11730 in 6 samples of 1955 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 51.399052 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.600483 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 49.822317 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 53.917362 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 1 outliers in 6 samples (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example
      <span style="color: #9fcb66;">#_</span><span style="color: #767283; font-style: italic;">ex/ops-kdh-bad-example</span>
      paths (node-tree-to-node-paths (nodify-ops ops))
      paths* (<span style="color: #9fcb66;">dev</span>/dev/node-tree-to-node-paths* (nodify-ops ops))
      they-are-equal (= paths paths*)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (node-tree-to-node-paths (nodify-ops ops)))
      (qb (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops)))
      they-are-equal)
    (take 2 (<span style="color: #9fcb66;">clojure.data</span>/diff (simplify-nodes-in-paths paths)
                               (simplify-nodes-in-paths paths*)))))

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))                   VOVOSON is SLOWER!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 4818 in 6 samples of 803 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 125.995770 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 2.878074 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 123.245002 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 129.931117 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 5088 in 6 samples of 848 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 125.705919 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 25.970576 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 112.892239 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 170.671529 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 2 outliers in 6 samples (33.3333 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-mild         1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 48.4747 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))                  VOVOSON is SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 4344 in 6 samples of 724 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 145.704265 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 7.948911 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 137.976756 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 154.857574 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 5184 in 6 samples of 864 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 116.125775 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.998712 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 113.623924 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 118.459630 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-half-bad-example
      paths (node-tree-to-node-paths (nodify-ops ops))
      paths* (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops))
      they-are-equal (= paths paths*)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (node-tree-to-node-paths (nodify-ops ops)))
      (qb (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops)))
      they-are-equal)
    (take 2 (<span style="color: #9fcb66;">clojure.data</span>/diff (simplify-nodes-in-paths paths)
                               (simplify-nodes-in-paths paths*)))))

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))              VOVOSON is far SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 4950 in 6 samples of 825 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 129.822180 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 7.353558 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 122.656039 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 139.126160 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 5766 in 6 samples of 961 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 105.035919 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 2.523399 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 101.720154 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 108.183083 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))              VOVOSON is far SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 4956 in 6 samples of 826 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 122.635661 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 5.214787 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 119.174120 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 131.382685 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 1 outliers in 6 samples (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 5988 in 6 samples of 998 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 102.786848 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.669593 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 101.239703 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 104.720766 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-worse-example
      paths (node-tree-to-node-paths (nodify-ops ops))
      paths* (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops))
      they-are-equal (= paths paths*)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (node-tree-to-node-paths (nodify-ops ops)))
      (qb (<span style="color: #9fcb66;">dev</span>/node-tree-to-node-paths* (nodify-ops ops)))
      they-are-equal)
    (take 2 (<span style="color: #9fcb66;">clojure.data</span>/diff (simplify-nodes-in-paths paths)
                               (simplify-nodes-in-paths paths*)))))
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))              VOVOSON is far SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 330 in 6 samples of 55 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 1.942342 ms</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 157.013499 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 1.853794 ms ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 2.211973 ms (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 1 outliers in 6 samples (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 15.5597 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 450 in 6 samples of 75 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 1.346803 ms</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 26.512690 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 1.305083 ms ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 1.372172 ms (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))              VOVOSON is far SLOWER!!!</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 330 in 6 samples of 55 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 1.897200 ms</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 100.531949 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 1.811493 ms ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 2.046091 ms (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(dev/node-tree-to-node-paths* (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 444 in 6 samples of 74 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 1.343870 ms</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 41.479275 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 1.299376 ms ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 1.367377 ms (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>

</pre>
</div>
</div>
</div>
<div id="outline-container-orge32e10c" class="outline-3">
<h3 id="orge32e10c"><code>nodify-ops</code> vs <code>nodify-ops*</code></h3>
<div class="outline-text-3" id="text-orge32e10c">
<ul class="org-ul">
<li>Both <code>nodify-ops</code> and <code>nodify-ops*</code> build the <code>:node-tree</code>.  But they do this in different ways:
<ul class="org-ul">
<li><code>nodify-ops</code>
<ul class="org-ul">
<li>returns a node-tree using <code>map-indexed</code> to traverse flat paths, and recurses on branches</li>
<li>does not return paths, hence the call to <code>node-tree-to-node-paths</code></li>
</ul></li>
<li><code>nodify-ops*</code>
<ul class="org-ul">
<li>traverses the tree by tail recursing flat paths, and recursing on branches
<ul class="org-ul">
<li>returns :node-tree, :raw-paths (partial paths), and :paths (which it stitches together from partial paths)</li>
</ul></li>
</ul></li>
</ul></li>
</ul>

<p>
I thought that because <code>nodify-ops*</code> builds the node-tree in the same traversal as it collects paths, that it might be faster than <code>nodify-ops</code> and <code>node-tree-to-node-paths</code> (basically two traversals), but criterion tells me it is not - at least not as currently implemented.  For that reason, it is and functions only it uses are relegated to dev/clj/kdh/stax/<a href="#org3e7671a">dev*.clj</a>.
</p>

<div class="org-src-container">
<pre class="src src-clj">(load-file <span style="color: #ff7fff;">"dev/clj/kdh/stax/dev*.clj"</span>)

(<span style="color: #ffff0b;">let</span> [ops <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example
      nodified (<span style="color: #ffff0b;">let</span> [node-tree (nodify-ops ops)
                     paths (node-tree-to-node-paths node-tree)]
                 {<span style="color: #34c8d8; font-weight: bold;">:node-tree</span> node-tree
                  <span style="color: #34c8d8; font-weight: bold;">:paths</span> paths})
      <span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">dev/nodify-ops* returns a map with extra keys [:raw-paths has :sticky sub-paths]</span>
      nodified* (select-keys (<span style="color: #9fcb66;">dev</span>/nodify-ops* ops) [<span style="color: #34c8d8; font-weight: bold;">:node-tree</span> <span style="color: #34c8d8; font-weight: bold;">:paths</span>])
      they-are-equal (=  nodified nodified*)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (node-tree-to-node-paths (nodify-ops ops)))
      (qb (<span style="color: #34c8d8; font-weight: bold;">:paths</span> (<span style="color: #9fcb66;">dev</span>/nodify-ops* ops)))
      they-are-equal)
    (take 2 (<span style="color: #9fcb66;">clojure.data</span>/diff (update nodified <span style="color: #34c8d8; font-weight: bold;">:paths</span> mapify-paths)
                               (update nodified* <span style="color: #34c8d8; font-weight: bold;">:paths</span> mapify-paths)))))

<span style="color: #767283;">;;</span><span style="color: #767283; font-style: italic;">+&gt;</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(node-tree-to-node-paths (nodify-ops ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 4968 in 6 samples of 828 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 123.579314 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 1.612044 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 121.355803 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 125.011495 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(:paths (dev/nodify-ops* ops))</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 3234 in 6 samples of 539 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 188.875895 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 2.610006 &#181;s</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 185.693119 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 192.884608 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.294590 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 2 outliers in 6 samples (33.3333 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-mild         1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>
</pre>
</div>
</div>
</div>


<div id="outline-container-org8656248" class="outline-3">
<h3 id="org8656248">KeyFnMap for Decorating SVG Nodes with Op Node Errors</h3>
<div class="outline-text-3" id="text-org8656248">
<p>
For the visualization of <code>:node-tree</code>, <code>:paths</code>, and <code>:results</code>, I use SVG in HTML.  While I toyed with directly manipulating the look of SVG (changing the <code>:fill</code> color of a <code>g.node</code>'s <code>:polygon</code>, or the <code>:stroke</code> color of a <code>g.edge</code>'s <code>:path</code> with specter), as soon as I became aware of SVG user data attributes, I focused on marking the SVG with custon attributes that I could then target from CSS.
SVG custom attributes are named :data-&lt;your-name-here&gt;. These are legal SVG, and are useful for adding data to your SVG elements. However, the user data attributes are just that, attributes.  Attributes are simple &#x2013; i.e cannot contain child values, like elements can.  To convert vectors of error maps into data attributes, I would need to write conversion functions.
</p>

<p>
I add two custom attributes for node error for the visualization of errors
</p>
<dl class="org-dl">
<dt><code>:data-stax-err-type</code></dt><dd><ul class="org-ul">
<li>To be used by css to style an svg node based on the <code>:err-type</code> values in its corresponding op node's <code>:errors</code></li>
<li>This is a string of space delimited names of keywords assigned as the values of the <code>:err-type</code> key in the error maps within the vector <code>:errors</code>.</li>
</ul></dd>
</dl>

<p>
The tranformation should look like:
</p>

<pre class="example" id="org43a3a4f">
[{:err-type &lt;keyword-1&gt;}
 {:err-type &lt;keyword-2&gt;}
 ...
 {:err-type &lt;keyword-n}]  ==&gt; "&lt;name-1&gt; &lt;name-2&gt; ... &lt;name-n&gt;"
</pre>

<dl class="org-dl">
<dt><code>:data-stax-err-text</code></dt><dd><ul class="org-ul">
<li>To be used by css to style an svg node based on the <code>:err-text</code> values in its corresponding op node's <code>:errors</code></li>
<li>Its form is a string of newline delimited values derived from <code>:err-text</code> values</li>
<li>It is displayed in the label text that pops up when hovering over the node in the visualization</li>
</ul></dd>
</dl>
<pre class="example" id="org92a3927">
[{:err-text &lt;string-1&gt;}
 {:err-text &lt;string-2&gt;}
 ...
 {:err-text &lt;string-n}]   ==&gt; "&lt;string-1&gt;\n&lt;string-2&gt;\n...\n&lt;string-n&gt;"
</pre>

<p>
To simplified this, I came up with a KeyFnMap, a map of match keys to conversion functions.
</p>
</div>

<div id="outline-container-orgd36fe42" class="outline-4">
<h4 id="orgd36fe42">First Version</h4>
<div class="outline-text-4" id="text-orgd36fe42">
<p>
In v1 of the keyfnmap
</p>
<ul class="org-ul">
<li>keys match those in the error maps (:err-type and :err-text)</li>
<li>values are functions to convert :errors into the corresponding values for the :data-stax-err-type and :data-stax-err-text values</li>
</ul>

<p>
Given a sequence of op nodes, <code>make-node-id-to-data-stax-err-map-v1</code> calls <code>index-property-of-nodes</code> to create a map of node-index string (which is the id of the svg nodes we will decorate) to errors from the node specified by the node-index. This is passed to <code>map-vals-via-keyfnmap-v1</code> along with the keyfnmap to return a map of maps from node-index string to a map of svg data keyed converted values.
</p>

<p>
Below, we sit it works, but <code>map-vals-via-keyfnmap-v1</code> has the key fixing call to <code>key-to-data-stax-key</code> locked within it.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">def</span> <span style="color: #4ac964;">err-to-data-stax-err-kfm-v1</span>
  {<span style="color: #34c8d8; font-weight: bold;">:err-type</span> (<span style="color: #ffff0b;">fn</span> [som]
               (apply str
                      (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-type</span>)
                                      (map name)
                                      (interpose <span style="color: #ff7fff;">" "</span>))
                                som)))
   <span style="color: #34c8d8; font-weight: bold;">:err-text</span> (<span style="color: #ffff0b;">fn</span> [som]
               (apply str
                      (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-text</span>)
                                      (interpose <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>))
                                som)))})


(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">map-vals-via-keyfnmap-v1</span>
  [keyfnmap target-map]
  (map-vals (<span style="color: #ffff0b;">fn</span> [errors]
              (into {} (map (<span style="color: #ffff0b;">fn</span> [[k val-fn]]
                              [(key-to-data-stax-key k) (val-fn errors)]))
                    keyfnmap))
            target-map))


(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">id-to-data-stax-err-map-v1</span>
  ([nodes]
   (<span style="color: #ffff0b;">-&gt;&gt;</span> nodes
        (index-property-of-nodes (comp str <span style="color: #34c8d8; font-weight: bold;">:node-index</span>) <span style="color: #34c8d8; font-weight: bold;">:errors</span>)
        (map-vals-via-keyfnmap-v1 err-to-data-stax-err-kfm-v1))))


(<span style="color: #ffff0b;">-&gt;&gt;</span> (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example)
     <span style="color: #34c8d8; font-weight: bold;">:nodes</span>
     id-to-data-stax-err-map-v1)

(=&gt;
 {<span style="color: #ff7fff;">"[5 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-invoke-bad-function error=parse-invoke-bad-arity"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"printl is not a known function!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">0 is not a valid arity (must be pos-int)!"</span>},
  <span style="color: #ff7fff;">"[8 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"a is not an allowed op"</span>},
  <span style="color: #ff7fff;">"[8 :else 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"b is not an allowed op"</span>}}
 )
</pre>
</div>
</div>
</div>

<div id="outline-container-org33db237" class="outline-4">
<h4 id="org33db237">Second Version</h4>
<div class="outline-text-4" id="text-org33db237">
<p>
In v2 of the keyfnmap
</p>
<ul class="org-ul">
<li>keys match those in the error maps (:err-type and :err-text)</li>
<li>values are maps of keys
<dl class="org-dl">
<dt><code>:key-fn</code></dt><dd>a function to convert the key into its <code>:data-stax-</code> form</dd>
<dt><code>:val-fn</code></dt><dd>a function to convert the values of the sequence of errors by key into a compound string of the key's values</dd>
</dl></li>
</ul>

<p>
Now we've moved the call to <code>key-to-data-stax-key</code> out of <code>map-vals-via-keyfnmap-v2</code> and into the keyfnmap.
</p>

<div class="org-src-container">
<pre class="src src-clojure">(require '[medley.core <span style="color: #34c8d8; font-weight: bold;">:refer</span> [map-vals map-kv]]
         '[)

(<span style="color: #ffff0b;">def</span> <span style="color: #4ac964;">err-to-data-stax-err-kfm-v2</span>
  {<span style="color: #34c8d8; font-weight: bold;">:err-type</span> {<span style="color: #34c8d8; font-weight: bold;">:key-fn</span> key-to-data-stax-key
              <span style="color: #34c8d8; font-weight: bold;">:val-fn</span> (<span style="color: #ffff0b;">fn</span> [som]
                        (apply str
                               (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-type</span>)
                                               (map name)
                                               (interpose <span style="color: #ff7fff;">" "</span>))
                                         som)))}
   <span style="color: #34c8d8; font-weight: bold;">:err-text</span> {<span style="color: #34c8d8; font-weight: bold;">:key-fn</span> key-to-data-stax-key
              <span style="color: #34c8d8; font-weight: bold;">:val-fn</span> (<span style="color: #ffff0b;">fn</span> [som]
                        (apply str
                               (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-text</span>)
                                               (interpose <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>))
                                         som)))}})

(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">map-vals-via-keyfnmap-v2</span>
  [keyfnmap target-map]
  (map-vals (<span style="color: #ffff0b;">fn</span> [v]
              (map-kv (<span style="color: #ffff0b;">fn</span> [k {<span style="color: #34c8d8; font-weight: bold;">:keys</span> [key-fn val-fn]}]
                        [(key-fn k) (val-fn v)])
                      keyfnmap))
            target-map))


(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">id-to-data-stax-err-map-v2</span>
  ([nodes]
   (<span style="color: #ffff0b;">-&gt;&gt;</span> (index-property-of-nodes (comp str <span style="color: #34c8d8; font-weight: bold;">:node-index</span>) <span style="color: #34c8d8; font-weight: bold;">:errors</span> nodes)
        (map-vals-via-keyfnmap-v2 err-to-data-stax-err-kfm-v2))))


(<span style="color: #ffff0b;">-&gt;&gt;</span> (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example)
     <span style="color: #34c8d8; font-weight: bold;">:nodes</span>
     id-to-data-stax-err-map-v2)

(=&gt;
 {<span style="color: #ff7fff;">"[5 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-invoke-bad-function error=parse-invoke-bad-arity"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"printl is not a known function!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">0 is not a valid arity (must be pos-int)!"</span>},
  <span style="color: #ff7fff;">"[8 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"a is not an allowed op"</span>},
  <span style="color: #ff7fff;">"[8 :else 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"b is not an allowed op"</span>}}
 )
</pre>
</div>
</div>
</div>
<div id="outline-container-org3f52c8d" class="outline-4">
<h4 id="org3f52c8d">Third and Final Version</h4>
<div class="outline-text-4" id="text-org3f52c8d">
<p>
In v3 of the keyfnmap
</p>
<ul class="org-ul">
<li>keys match those in the error maps (:err-type and :err-text)</li>
<li>values are a vector pair of functions [&lt;key-fn&gt; &lt;val-fn&gt;]
<dl class="org-dl">
<dt><code>&lt;key-fn&gt;</code></dt><dd>a function to convert the key into its <code>:data-stax-</code> form</dd>
<dt><code>&lt;val-fn&gt;</code></dt><dd>a function to convert the values of the sequence of errors by key into a compound string of the key's values</dd>
</dl></li>
</ul>

<div class="org-src-container">
<pre class="src src-clojure">(<span style="color: #ffff0b;">def</span> <span style="color: #4ac964;">err-to-data-stax-err-kfm-v3</span>
  {<span style="color: #34c8d8; font-weight: bold;">:err-type</span> [key-to-data-stax-key
              (<span style="color: #ffff0b;">fn</span> [som]
                (apply str
                       (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-type</span>)
                                       (map name)
                                       (interpose <span style="color: #ff7fff;">" "</span>))
                                 som)))]
   <span style="color: #34c8d8; font-weight: bold;">:err-text</span> [key-to-data-stax-key
              (<span style="color: #ffff0b;">fn</span> [som]
                (apply str
                       (sequence (comp (map <span style="color: #34c8d8; font-weight: bold;">:err-text</span>)
                                       (interpose <span style="color: #ff7fff;">"</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">"</span>))
                                 som)))]})

(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">map-vals-via-keyfnmap-v3</span>
     [keyfnmap target-map]
     (map-vals (<span style="color: #ffff0b;">fn</span> [v]
                 (map-kv (<span style="color: #ffff0b;">fn</span> [k [key-fn val-fn]]
                           [(key-fn k) (val-fn v)])
                         keyfnmap))
               target-map))


(<span style="color: #ffff0b;">defn</span> <span style="color: #ff996f;">id-to-data-stax-err-map-v3</span>
  ([nodes]
   (<span style="color: #ffff0b;">-&gt;&gt;</span> nodes
        (index-property-of-nodes (comp str <span style="color: #34c8d8; font-weight: bold;">:node-index</span>) <span style="color: #34c8d8; font-weight: bold;">:errors</span>)
        (map-vals-via-keyfnmap-v3 err-to-data-stax-err-kfm-v3))))


(<span style="color: #ffff0b;">-&gt;&gt;</span> (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-kdh-bad-example)
     <span style="color: #34c8d8; font-weight: bold;">:nodes</span>
     id-to-data-stax-err-map-v3)


(=&gt;
 {<span style="color: #ff7fff;">"[5 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-invoke-bad-function error=parse-invoke-bad-arity"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"printl is not a known function!</span><span style="color: #ffffff; font-weight: bold;">\n</span><span style="color: #ff7fff;">0 is not a valid arity (must be pos-int)!"</span>},
  <span style="color: #ff7fff;">"[8 :then 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"a is not an allowed op"</span>},
  <span style="color: #ff7fff;">"[8 :else 0]"</span> {<span style="color: #34c8d8; font-weight: bold;">:data-stax-err-type</span> <span style="color: #ff7fff;">"error=parse-illegal-operation"</span>,
                 <span style="color: #34c8d8; font-weight: bold;">:data-stax-err-text</span> <span style="color: #ff7fff;">"b is not an allowed op"</span>}}
 )
</pre>
</div>
</div>
</div>



<div id="outline-container-org27df47a" class="outline-4">
<h4 id="org27df47a">Comparison</h4>
<div class="outline-text-4" id="text-org27df47a">
<div class="org-src-container">
<pre class="src src-clojure">

(<span style="color: #ffff0b;">let</span> [{<span style="color: #34c8d8; font-weight: bold;">:keys</span> [nodes]} (build-node-data '[!a !b !c] <span style="color: #9fcb66;">ex</span>/ops-kdh-worse-example)
      via-keyfnmap-v1 (id-to-data-stax-err-map-v1 nodes)
      via-keyfnmap-v2 (id-to-data-stax-err-map-v2 nodes)
      via-keyfnmap-v3 (id-to-data-stax-err-map-v3 nodes)
      they-are-equal (= via-keyfnmap-v1 via-keyfnmap-v2 via-keyfnmap-v3)]
  (<span style="color: #ffff0b;">if</span> they-are-equal
    (<span style="color: #ffff0b;">do</span>
      (qb (id-to-data-stax-err-map-v1 nodes))
      (qb (id-to-data-stax-err-map-v2 nodes))
      (qb (id-to-data-stax-err-map-v3 nodes))
      they-are-equal)))

(=&gt; <span style="color: #34c8d8; font-weight: bold;">true</span> )
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(id-to-data-stax-err-map-v1 nodes)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 39714 in 6 samples of 6619 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 15.607004 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 526.794857 ns</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 15.004096 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 16.455220 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 2 outliers in 6 samples (33.3333 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-mild         1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(id-to-data-stax-err-map-v2 nodes)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 40278 in 6 samples of 6713 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 14.966991 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 303.960747 ns</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 14.690754 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 15.439743 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>

<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Found 1 outliers in 6 samples (16.6667 %)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">     low-severe       1 (16.6667 %)</span>
<span style="color: #767283;">;;  </span><span style="color: #767283; font-style: italic;">Variance from outliers : 13.8889 % Variance is moderately inflated by outliers</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>


<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">================================================================================</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">(id-to-data-stax-err-map-v3 nodes)</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">--------------------------------------------------------------------------------</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">Evaluation count : 42372 in 6 samples of 7062 calls.</span>
<span style="color: #767283;">;;              </span><span style="color: #767283; font-style: italic;">Execution time mean : 14.678099 &#181;s</span>
<span style="color: #767283;">;;     </span><span style="color: #767283; font-style: italic;">Execution time std-deviation : 293.797100 ns</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time lower quantile : 14.445066 &#181;s ( 2.5%)</span>
<span style="color: #767283;">;;    </span><span style="color: #767283; font-style: italic;">Execution time upper quantile : 15.114276 &#181;s (97.5%)</span>
<span style="color: #767283;">;;                    </span><span style="color: #767283; font-style: italic;">Overhead used : 9.380564 ns</span>
<span style="color: #767283;">;; </span><span style="color: #767283; font-style: italic;">________________________________________________________________________________</span>
</pre>
</div>

<p>
All three are about the same speed, but <code>id-to-data-stax-err-map-v3</code> is the fastest.  Both keyfnmap-v2 and keyfnmap-v2 specify the key-fn in data, and I like that the vals in keyfnmap-v3 takes a map-entry like form of [key-fn val-fn], which is analogous to [k v].  Keyfnmap-v3 is faster and easier to reason about, so that is the winner.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-orgc5518f6" class="outline-2">
<h2 id="orgc5518f6">Project Structure ¿TODO?</h2>
<div class="outline-text-2" id="text-orgc5518f6">
</div>
<div id="outline-container-org835fc33" class="outline-3">
<h3 id="org835fc33">Files</h3>
<div class="outline-text-3" id="text-org835fc33">
<blockquote id="org6eb3305">
<p>
ROOT
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<tbody>
<tr>
</tr>
</tbody>
</table>
<p>
+&#x2013;foo
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">+-&#x2014;bar</td>
</tr>
<tbody>
<tr>
</tr>
</tbody>
</table>
<p>
+&#x2013;baz
+&#x2013;bax
+&#x2013;src
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">+&#x2013;main</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">+&#x2014;java</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">+&#x2014;something</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">+&#x2014;fine</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
</tr>

<tr>
<td class="org-left">+&#x2013;yes</td>
</tr>

<tr>
<td class="org-left">+&#x2013;no</td>
</tr>
</tbody>
</table>
</blockquote>
</div>
</div>


<div id="outline-container-orgb3033f2" class="outline-3">
<h3 id="orgb3033f2">Project kdh.stax "0.1.0"</h3>
<div class="outline-text-3" id="text-orgb3033f2">
<pre class="example" id="org1069e18">
stax
├── #notes.org#
├── 2022-04-27T09:38:58.512414700.edn
├── CHANGELOG.md
├── LICENSE
├── README.md
├── dev
│   ├── clj
│   │   ├── #dev.clj#
│   │   ├── bubba.clj
│   │   ├── dev.clj
│   │   ├── kdh
│   │   │   ├── dev_utils.clj
│   │   │   └── stax
│   │   │       ├── #error-tests.clj#
│   │   │       ├── #svg-test.clj#
│   │   │       ├── error-tests.clj
│   │   │       ├── examples-20220629112159Z.clj
│   │   │       ├── nodes-tests.clj
│   │   │       └── svg-test.clj
│   │   ├── resources
│   │   ├── user.clj
│   │   └── vizit.clj
│   └── resources
├── doc
│   └── intro.md
├── html
│   ├── kdh-bad-example-dbg.html
│   ├── kdh-better-example-dbg.html
│   ├── kdh-runtime-error-example-dbg.html
│   ├── kdh-some-bad-paths-example-fix1st-no-static.html
│   ├── kdh-some-bad-paths-example-no-static.html
│   ├── kdh-some-bad-paths-example.html
│   ├── kdh-worse-example-dbg.html
│   ├── mystyle.css
│   └── rpl-example-dbg.html
├── html*
│   ├── kdh-bad-example-dbg.html
│   ├── kdh-better-example-dbg.html
│   ├── kdh-runtime-error-example-dbg.html
│   ├── kdh-worse-example-dbg.html
│   ├── mystyle.css
│   └── rpl-example-dbg.html
├── lein.1
├── lein.sh
├── log
├── nodify-ops*-kdh-better-example.html
├── org
│   ├── 4mat.org
│   ├── dot.org
│   ├── graphviz.org
│   ├── notes.org
│   ├── ops-orig.dot
│   └── switch.png
</pre>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">KEY</th>
<th scope="col" class="org-left">::op=</th>
<th scope="col" class="org-left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">:op</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">the operation as a quoted value -e.g. '&lt;pop&gt; or '(invoke&gt; + 2)</td>
</tr>

<tr>
<td class="org-left">:op-type</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">See operation table</td>
</tr>

<tr>
<td class="org-left">:needs</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">how many stack values the operation requires</td>
</tr>

<tr>
<td class="org-left">:delta</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">the change to the stack size after execution</td>
</tr>

<tr>
<td class="org-left">:op-index</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">vector of pos-int to the operation in the original sequence</td>
</tr>

<tr>
<td class="org-left">:node-index</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">vector of pos-int to the operation in the resulting node-tree</td>
</tr>

<tr>
<td class="org-left">:fun</td>
<td class="org-left">invoke</td>
<td class="org-left">function value of invoke&gt; operation</td>
</tr>

<tr>
<td class="org-left">:arity</td>
<td class="org-left">invoke</td>
<td class="org-left">number of stack items the invoke&gt; operation will consume</td>
</tr>

<tr>
<td class="org-left">:then</td>
<td class="org-left">if</td>
<td class="org-left">a node subtree to follow if the top of the stack is truthy</td>
</tr>

<tr>
<td class="org-left">:else</td>
<td class="org-left">if</td>
<td class="org-left">a node subtree to follow if the top of the stack is falsey</td>
</tr>

<tr>
<td class="org-left">:var-ref</td>
<td class="org-left">def/push-var</td>
<td class="org-left">!v form symbol for stack variable</td>
</tr>

<tr>
<td class="org-left">:var-def</td>
<td class="org-left">def-var</td>
<td class="org-left">!v+ form for stack variable (::op=def-var only)</td>
</tr>

<tr>
<td class="org-left">:errors</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">vector of error maps with keys :err-zone :err-type :err-text</td>
</tr>
</tbody>
</table>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">OPERATION</th>
<th scope="col" class="org-left">:op-type</th>
<th scope="col" class="org-right">:needs</th>
<th scope="col" class="org-right">:delta</th>
<th scope="col" class="org-left">DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">!v</td>
<td class="org-left">::op=push-var</td>
<td class="org-right">0</td>
<td class="org-right">+1</td>
<td class="org-left">to push the value of a stack variable onto the stack</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">const</td>
<td class="org-left">::op=push-sef</td>
<td class="org-right">0</td>
<td class="org-right">+1</td>
<td class="org-left">to push the value of a self evaluating form onto the stack</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">(number, string, character, keyword, boolean, nil)</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">&lt;pop&gt;</td>
<td class="org-left">::op=pop</td>
<td class="org-right">1</td>
<td class="org-right">-1</td>
<td class="org-left">to pop the top of the stack</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">!v+</td>
<td class="org-left">::op=def-var</td>
<td class="org-right">1</td>
<td class="org-right">0</td>
<td class="org-left">to define a (possibly new) stack variable and assign it</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">the stack without changing the stack</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">(invoke&gt; f n)</td>
<td class="org-left">::op=invoke</td>
<td class="org-right">n</td>
<td class="org-right">-(n-1)</td>
<td class="org-left">to invoke a function f :fun on a number of arguments :arity</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">removed from the stack and replace with its return value</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">(if&gt; t1 t2&#x2026;</td>
<td class="org-left">::op=if</td>
<td class="org-right">1</td>
<td class="org-right">-1</td>
<td class="org-left">to branch conditionally on the top of the stack (popping it)</td>
</tr>

<tr>
<td class="org-left">else&gt; e1 e2&#x2026;)</td>
<td class="org-left">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-left">into :then or :else which are vectors of nodes</td>
</tr>
</tbody>
<tbody>
<tr>
<td class="org-left">any other form</td>
<td class="org-left">::op=illegal</td>
<td class="org-right">NA</td>
<td class="org-right">NA</td>
<td class="org-left">not a legal op"</td>
</tr>
</tbody>
</table>
</div>

<div id="outline-container-org3b59ff1" class="outline-4">
<h4 id="org3b59ff1">(nodify-ops operations) =&gt; node-tree</h4>
<div class="outline-text-4" id="text-org3b59ff1">
<p>
The list of operations given to defstackfn is converted into a node-tree,
which is a vector of nodes where if&gt; nodes contain :then and :else branches,
which are themselves vectors of nodes.
Parse errors are added to the nodes at this stage and for:
</p>
<ul class="org-ul">
<li>invoke&gt;
<ul class="org-ul">
<li>:kdh.stax.errs/error=invoke-wrong-number-args</li>
<li>:kdh.stax.errs/error=invoke-bad-function</li>
<li>:kdh.stax.errs/error=invoke-bad-arity</li>
</ul></li>
<li>illegal operations
<ul class="org-ul">
<li>:kdh.stax.errs/error=illegal-operation</li>
</ul></li>
</ul>
</div>
</div>
<div id="outline-container-org00fe3f4" class="outline-4">
<h4 id="org00fe3f4">(flatten-node-tree node-tree) =&gt; nodes</h4>
<div class="outline-text-4" id="text-org00fe3f4">
<p>
nodes is a vector of nodes in the same order left to right as operations given to defstackfn with the if&gt; and else&gt; terms and parenthesis removed. nodes main use is for scanning for tree errors in node-tree (errors found by nodify-ops). The kdh.stax.svg/node-data-to-html uses it to decorate the tree visualization (the black diagram) with global errors (errors whose :err-zone value is :kdh.stax.errs/zone=tree).
</p>
</div>
</div>
<div id="outline-container-org5142bb1" class="outline-4">
<h4 id="org5142bb1">(node-tree-to-node-paths declarations node-tree) =&gt; paths a vovon where each path is a von</h4>
<div class="outline-text-4" id="text-org5142bb1">
<p>
For the static analysis checks, we want to analyze each path through the tree for consistency.
</p>
</div>

<div id="outline-container-org1e7057b" class="outline-5">
<h5 id="org1e7057b">(check-refs-path path)</h5>
<div class="outline-text-5" id="text-org1e7057b">
<p>
Variables in a path cannot be referenced before being defined (except for the declarations supplied to defstackfn).
</p>
<ul class="org-ul">
<li>:kdh.stax.errs/error=insufficient-stack</li>
</ul>
</div>
</div>
<div id="outline-container-org1cb2cba" class="outline-5">
<h5 id="org1cb2cba">(count-card-path path)</h5>
<div class="outline-text-5" id="text-org1cb2cba">
<p>
Stack cardinality, if the needs of an op node are greater than the size of the stack, the node is given an error of :err-type:
</p>
<ul class="org-ul">
<li>:kdh.stax.errs/error=undefined-var</li>
</ul>



<p>
Execution steps, we want to traverse the node-tree, maintaining state as we go, deciding on the fly whether to travel through :then or :else.  The trace of such traversal is a path (possibly incomplete due to runtime errors).
</p>
<ul class="org-ul">
<li>For stack cardinality (the size of stack must be &gt;= the needs of an op node for the op to be executable).</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgc5950d3" class="outline-4">
<h4 id="orgc5950d3"><span class="todo TODO">TODO</span> Notes to Self (fix for 0.1.0 release)</h4>
<div class="outline-text-4" id="text-orgc5950d3">
</div>
<div id="outline-container-orge243874" class="outline-5">
<h5 id="orge243874"><span class="todo TODO">TODO</span> print runtime errors</h5>
<div class="outline-text-5" id="text-orge243874">
<p>
Especially for static analysis failed &#x2013; throw them when <b>throw-on-error</b>
</p>
</div>
</div>
<div id="outline-container-org2f81482" class="outline-5">
<h5 id="org2f81482"><span class="todo TODO">TODO</span> Maybe rename and/or split <b>throw-on-error</b></h5>
</div>
<div id="outline-container-orgdb118b8" class="outline-5">
<h5 id="orgdb118b8"><span class="todo DOING">DOING</span> enforce sef args to &lt;stackfn&gt;</h5>
</div>
<div id="outline-container-orgcf69ba8" class="outline-5">
<h5 id="orgcf69ba8"><span class="todo TODO">TODO</span> handle &lt;stackfn&gt;-debug case with 0 args and 0 dcls (i.e. exec once for results of one)</h5>
</div>
<div id="outline-container-org228c077" class="outline-5">
<h5 id="org228c077"><span class="done DONE">DONE</span> test if&gt; in first position for cardi fail</h5>
<div class="outline-text-5" id="text-org228c077">
<p><span class="timestamp-wrapper"><span class="timestamp-kwd">CLOSED:</span> <span class="timestamp">[2022-06-21 Tue 02:01]</span></span></p>
<p>
this is fixed by addition of if-pop
</p>
</div>
</div>
<div id="outline-container-org7ac0784" class="outline-5">
<h5 id="org7ac0784"><span class="done DONE">DONE</span> Fix "Cannot throw exception" - throw of nil</h5>
<div class="outline-text-5" id="text-org7ac0784">
<p><span class="timestamp-wrapper"><span class="timestamp-kwd">CLOSED:</span> <span class="timestamp">[2022-06-21 Tue 13:00]</span></span></p>
</div>
</div>
<div id="outline-container-orgd136d76" class="outline-5">
<h5 id="orgd136d76"><span class="done DONE">DONE</span> enforce sef on result of invoke</h5>
<div class="outline-text-5" id="text-orgd136d76">
<p><span class="timestamp-wrapper"><span class="timestamp-kwd">CLOSED:</span> <span class="timestamp">[2022-06-21 Tue 13:01]</span></span></p>
</div>
</div>
<div id="outline-container-orgeabbb14" class="outline-5">
<h5 id="orgeabbb14"><span class="done CANCELED">CANCELED</span> handle graph vs digraph ("&#x2013;" vs "-&gt;")</h5>
<div class="outline-text-5" id="text-orgeabbb14">
<p><span class="timestamp-wrapper"><span class="timestamp-kwd">CLOSED:</span> <span class="timestamp">[2022-06-21 Tue 13:01]</span></span></p>
</div>
</div>
<div id="outline-container-org630ee3a" class="outline-5">
<h5 id="org630ee3a"><span class="todo TODO">TODO</span> discuss constant as</h5>
<div class="outline-text-5" id="text-org630ee3a">
</div>
<div id="outline-container-orga381e64" class="outline-6">
<h6 id="orga381e64">self-evaluating?</h6>
</div>
<div id="outline-container-orgf82079e" class="outline-6">
<h6 id="orgf82079e">simple vs complex</h6>
</div>
<div id="outline-container-org4cd2395" class="outline-6">
<h6 id="org4cd2395">item vs collection</h6>
</div>
<div id="outline-container-org1d127d5" class="outline-6">
<h6 id="org1d127d5">restriction on lookup</h6>
</div>
</div>
<div id="outline-container-org91d2d75" class="outline-5">
<h5 id="org91d2d75"><span class="todo TODO">TODO</span> note that invoke cannot take a literal or anonymous function</h5>
</div>
</div>
<div id="outline-container-orgfa08f9c" class="outline-4">
<h4 id="orgfa08f9c">Notes to Future Self (fix for future releases)</h4>
<div class="outline-text-4" id="text-orgfa08f9c">
</div>
<div id="outline-container-orgdc481ab" class="outline-5">
<h5 id="orgdc481ab"><span class="todo TODO">TODO</span> add tests</h5>
<div class="outline-text-5" id="text-orgdc481ab">
<p>
In version 0.1.0 many of the tests are inside (comment )
</p>
<ul class="org-ul">
<li>This aids in quick testing of the code during development</li>
<li>These will be moved into test libraries for version 0.2.x</li>
</ul>
</div>
</div>
<div id="outline-container-org089df0c" class="outline-5">
<h5 id="org089df0c"><span class="todo TODO">TODO</span> defrecord OpNode and one or more defprotocol</h5>
<div class="outline-text-5" id="text-org089df0c">
<p>
Now that the map version is understood, version 0.2.x should use a record with required keys [op op-index node-index needs delta]
and protocols to extend
</p>
</div>
</div>
<div id="outline-container-org1a36240" class="outline-5">
<h5 id="org1a36240"><span class="todo TODO">TODO</span> defrecord OpError and one or more defprotocol</h5>
<div class="outline-text-5" id="text-org1a36240">
<p>
Now that the map version is understood, version 0.2.x should use a record with required keys [err-text err-type err-zone]
and protocols to define (message) and (data) for cleaner error to throw calls
</p>
<ul class="org-ul">
<li>(message #OpError) could return (:err-text self)</li>
<li>(data #OpError) could return (dissoc self :err-text)</li>
</ul>
</div>
</div>
<div id="outline-container-orga7a0c6f" class="outline-5">
<h5 id="orga7a0c6f"><span class="todo TODO">TODO</span> client-side stack op builder</h5>
<div class="outline-text-5" id="text-orga7a0c6f">
<p>
The html dbg generation shows that svg can be quite useful for visualizing errors.
A re-frame app that allows for dynamic altering of ops and reactive path/results generation would be a good front-end dev project.
</p>
</div>
</div>
<div id="outline-container-orgefe3c18" class="outline-5">
<h5 id="orgefe3c18"><span class="todo TODO">TODO</span> harmonize :results :trace to :path</h5>
<div class="outline-text-5" id="text-orgefe3c18">
<p>
Currently, the trace (which is generated from :node-tree) does not contain ::op=start or ::op=term nodes.
This prevents :data-stax-path "good" "bad" marking of the resulting svg, which prevents css coloring of those nodes and adjacent edges.
Fixing this is tricky and not necessary for the current html generation (which is for dev use only &#x2013; i.e. not a client-side app).
But I have some thoughts now on adding this feature:
</p>
<ul class="org-ul">
<li>A completed (i.e. no :errors) :result :trace set is (keep :node-index) equivalent to a :path
minus the path's first (i.e. ::op=start) and last (i.e ::op=term)</li>
<li>An incomplete result (i.e. has :errors) might have multiple branches after the :error
I think I don't want to mark them, instead only mark from ::op=start to node of :error</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org044cc26" class="outline-2">
<h2 id="org044cc26">Appendix</h2>
<div class="outline-text-2" id="text-org044cc26">
</div>
<div id="outline-container-org89bf203" class="outline-3">
<h3 id="org89bf203">Workflow</h3>
<div class="outline-text-3" id="text-org89bf203">
<p>
While I'm on the subject, this is how I work with a clojure project.  I start with a dev and src tree, that are identical in directory structure.
</p>
<pre class="example" id="org74f3635">
src
└── clj(s)
-    └── kdh  
        └── stax

dev
└── clj(s)
    └── kdh
        └── stax
</pre>
</div>


<div id="outline-container-org804ffcd" class="outline-5">
<h5 id="org804ffcd">Starting an nrepl</h5>
<div class="outline-text-5" id="text-org804ffcd">
<p>
I start the project by opening an nrepl with lein or boot or clj tools in the project dir at a terminal.  If it completes startup without errors, I quit and restart it in gnu screen (this allows re-attach following accidental disconnect from the terminal).  Then in emacs, I <code>cider-connect-clj</code> or <code>cider-connect-cljs</code> or <code>cider-connect-clj-and-cljs</code> as needed.
</p>

<p>
My dev profile in lein leaves me in ns user, which is defined in <code>/dev/clj/user.clj</code>, where a (dev) function exists to enter ns dev defined in <code>/dev/clj/dev.clj</code>. This allows me to keep experimental things in the ns dev and still get an nrepl up and running to debug.
</p>

<p>
<code>/dev/clj/dev.clj</code> requires all of the basic: <code>clojure.string</code> :as <code>str</code>, <code>clojure.file.io</code> :as <code>io</code>, etc.
</p>

<p>
If I refactor (like when I split nodes.clj into node.clj and nodify.clj to fix a cyclic dependency), I restart the repl.
</p>

<p>
I favor mount over component because mount has a more granular restart.  I used neither in this project as it was sufficient to have an example file with operations of various complexity and errors.
</p>

<p>
Enough about me, onto the project.
</p>
</div>
</div>
</div>
</div>


<div id="outline-container-org6ca03f4" class="outline-2">
<h2 id="org6ca03f4">Environment</h2>
<div class="outline-text-2" id="text-org6ca03f4">
<p>
I wrote this as in
</p>
<ul class="org-ul">
<li>org-mode <code>release​_9.5.4</code></li>
<li>emacs <code>version 27.2</code></li>
</ul>

<p>
The code was built with
</p>
<ul class="org-ul">
<li>CIDER 1.3.0 (Ukraine)</li>
<li>Leiningen <code>2.9.8</code></li>
<li>Clojure <code>1.11.1</code></li>
<li>dot - graphviz version <code>2.43.0</code></li>
<li>Java ~17.0.3 OpenJDK 64-Bit Server VM on Ubuntu (build 17.0.3+7-Ubuntu-0ubuntu0.20.04.1)</li>
</ul>

<p>
The OS
</p>
<ul class="org-ul">
<li>Ubuntu <code>20.04.4 LTS</code></li>
<li>WSL2 on Windows-11</li>
</ul>
</div>

<div id="outline-container-org47f2738" class="outline-3">
<h3 id="org47f2738">Java Properties</h3>
<div class="outline-text-3" id="text-org47f2738">
<div class="ORG" id="org08eac92">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 8:</span> Java Properties</caption>

<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">apple.awt.UIElement</td>
<td class="org-left">true</td>
</tr>

<tr>
<td class="org-left">clojure.compile.path</td>
<td class="org-left">/mnt/e/Sync/clojure/rpl/stax/target/classes</td>
</tr>

<tr>
<td class="org-left">clojure.debug</td>
<td class="org-left">false</td>
</tr>

<tr>
<td class="org-left">file.encoding</td>
<td class="org-left">UTF-8</td>
</tr>

<tr>
<td class="org-left">file.separator</td>
<td class="org-left">/</td>
</tr>

<tr>
<td class="org-left">java.home</td>
<td class="org-left">/usr/lib/jvm/java-17-openjdk-amd64</td>
</tr>

<tr>
<td class="org-left">java.io.tmpdir</td>
<td class="org-left">/tmp</td>
</tr>

<tr>
<td class="org-left">java.library.path</td>
<td class="org-left">/usr/java/packages/lib:/usr/lib/x86​_64-linux-gnu/jni:/lib/x86​_64-linux-gnu:/usr/lib/x86​_64-linux-gnu:/usr/lib/jni:/lib:/usr/lib</td>
</tr>

<tr>
<td class="org-left">java.runtime.name</td>
<td class="org-left">OpenJDK Runtime Environment</td>
</tr>

<tr>
<td class="org-left">java.runtime.version</td>
<td class="org-left">17.0.3+7-Ubuntu-0ubuntu0.20.04.1</td>
</tr>

<tr>
<td class="org-left">java.specification.name</td>
<td class="org-left">Java Platform API Specification</td>
</tr>

<tr>
<td class="org-left">java.specification.vendor</td>
<td class="org-left">Oracle Corporation</td>
</tr>

<tr>
<td class="org-left">java.specification.version</td>
<td class="org-left">17</td>
</tr>

<tr>
<td class="org-left">java.vendor</td>
<td class="org-left">Private Build</td>
</tr>

<tr>
<td class="org-left">java.vendor.url</td>
<td class="org-left">Unknown</td>
</tr>

<tr>
<td class="org-left">java.vendor.url.bug</td>
<td class="org-left">Unknown</td>
</tr>

<tr>
<td class="org-left">java.version</td>
<td class="org-left">17.0.3</td>
</tr>

<tr>
<td class="org-left">java.version.date</td>
<td class="org-left">2022-04-19</td>
</tr>

<tr>
<td class="org-left">java.vm.compressedOopsMode</td>
<td class="org-left">32-bit</td>
</tr>

<tr>
<td class="org-left">java.vm.info</td>
<td class="org-left">mixed mode, sharing</td>
</tr>

<tr>
<td class="org-left">java.vm.name</td>
<td class="org-left">OpenJDK 64-Bit Server VM</td>
</tr>

<tr>
<td class="org-left">java.vm.specification.name</td>
<td class="org-left">Java Virtual Machine Specification</td>
</tr>

<tr>
<td class="org-left">java.vm.specification.vendor</td>
<td class="org-left">Oracle Corporation</td>
</tr>

<tr>
<td class="org-left">java.vm.specification.version</td>
<td class="org-left">17</td>
</tr>

<tr>
<td class="org-left">java.vm.vendor</td>
<td class="org-left">Private Build</td>
</tr>

<tr>
<td class="org-left">java.vm.version</td>
<td class="org-left">17.0.3+7-Ubuntu-0ubuntu0.20.04.1</td>
</tr>

<tr>
<td class="org-left">jdk.debug</td>
<td class="org-left">release</td>
</tr>

<tr>
<td class="org-left">line.separator</td>
<td class="org-left">\n</td>
</tr>

<tr>
<td class="org-left">native.encoding</td>
<td class="org-left">UTF-8</td>
</tr>

<tr>
<td class="org-left">os.arch</td>
<td class="org-left">amd64</td>
</tr>

<tr>
<td class="org-left">os.name</td>
<td class="org-left">Linux</td>
</tr>

<tr>
<td class="org-left">os.version</td>
<td class="org-left">5.10.102.1-microsoft-standard-WSL2</td>
</tr>

<tr>
<td class="org-left">path.separator</td>
<td class="org-left">:</td>
</tr>

<tr>
<td class="org-left">stax.version</td>
<td class="org-left">0.1.0-SNAPSHOT</td>
</tr>

<tr>
<td class="org-left">sun.arch.data.model</td>
<td class="org-left">64</td>
</tr>

<tr>
<td class="org-left">sun.boot.library.path</td>
<td class="org-left">/usr/lib/jvm/java-17-openjdk-amd64/lib</td>
</tr>

<tr>
<td class="org-left">sun.cpu.endian</td>
<td class="org-left">little</td>
</tr>

<tr>
<td class="org-left">sun.io.unicode.encoding</td>
<td class="org-left">UnicodeLittle</td>
</tr>

<tr>
<td class="org-left">sun.java.command</td>
<td class="org-left">clojure.main -i /tmp/form-init14542468886342858337.clj</td>
</tr>

<tr>
<td class="org-left">sun.java.launcher</td>
<td class="org-left">SUN​_STANDARD</td>
</tr>

<tr>
<td class="org-left">sun.jnu.encoding</td>
<td class="org-left">UTF-8</td>
</tr>

<tr>
<td class="org-left">sun.management.compiler</td>
<td class="org-left">HotSpot 64-Bit Tiered Compilers</td>
</tr>

<tr>
<td class="org-left">user.dir</td>
<td class="org-left">/mnt/e/Sync/clojure/rpl/stax</td>
</tr>

<tr>
<td class="org-left">user.home</td>
<td class="org-left">/home/keith</td>
</tr>

<tr>
<td class="org-left">user.language</td>
<td class="org-left">en</td>
</tr>

<tr>
<td class="org-left">user.name</td>
<td class="org-left">keith</td>
</tr>

<tr>
<td class="org-left">user.timezone</td>
<td class="org-left">America/New​_York</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>

<div id="outline-container-org8804d02" class="outline-3">
<h3 id="org8804d02">Java Class Path</h3>
<div class="outline-text-3" id="text-org8804d02">
<table><caption>Java Class Path</caption><tr><td>/mnt/e/Sync/clojure/rpl/stax/test</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/dev/clj</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/src/clj</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/dev/clj/resources</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/dev-resources</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/resources</td></tr><tr><td>/mnt/e/Sync/clojure/rpl/stax/target/classes</td></tr><tr><td>/home/keith/.m2/repository/djblue/portal/0.28.0/portal-0.28.0.jar</td></tr><tr><td>/home/keith/.m2/repository/com/fasterxml/jackson/core/jackson-core/2.8.7/jackson-core-2.8.7.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-model-builder/3.5.3/maven-model-builder-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-builder-support/3.5.3/maven-builder-support-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/nrepl/incomplete/0.1.0/incomplete-0.1.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/msgpack/msgpack/0.6.12/msgpack-0.6.12.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/httpcomponents/httpclient/4.5.3/httpclient-4.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/commons-io/commons-io/2.5/commons-io-2.5.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-model/3.5.3/maven-model-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-transport-wagon/1.0.3/maven-resolver-transport-wagon-1.0.3.jar</td></tr><tr><td>/home/keith/.m2/repository/criterium/criterium/0.4.4/criterium-0.4.4.jar</td></tr><tr><td>/home/keith/.m2/repository/com/cognitect/transit-java/1.0.362/transit-java-1.0.362.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-util/1.1.1/maven-resolver-util-1.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/com/rpl/specter/1.1.4/specter-1.1.4.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/clojure/1.11.1/clojure-1.11.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/data.xml/0.0.8/data.xml-0.0.8.jar</td></tr><tr><td>/home/keith/.m2/repository/com/google/guava/guava/20.0/guava-20.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-repository-metadata/3.5.3/maven-repository-metadata-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/javax/xml/bind/jaxb-api/2.3.0/jaxb-api-2.3.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-resolver-provider/3.5.3/maven-resolver-provider-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/codehaus/plexus/plexus-utils/3.1.0/plexus-utils-3.1.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/wagon/wagon-provider-api/3.0.0/wagon-provider-api-3.0.0.jar</td></tr><tr><td>/home/keith/.m2/repository/fipp/fipp/0.6.23/fipp-0.6.23.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/wagon/wagon-http/3.0.0/wagon-http-3.0.0.jar</td></tr><tr><td>/home/keith/.m2/repository/net/cgrand/macrovich/0.2.1/macrovich-0.2.1.jar</td></tr><tr><td>/home/keith/.m2/repository/com/cognitect/transit-js/0.8.874/transit-js-0.8.874.jar</td></tr><tr><td>/home/keith/.m2/repository/mvxcvi/arrangement/1.2.0/arrangement-1.2.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-api/1.1.1/maven-resolver-api-1.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.7.1/plexus-component-annotations-1.7.1.jar</td></tr><tr><td>/home/keith/.m2/repository/rewrite-clj/rewrite-clj/0.6.1/rewrite-clj-0.6.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-transport-http/1.0.3/maven-resolver-transport-http-1.0.3.jar</td></tr><tr><td>/home/keith/.m2/repository/zprint/zprint/1.1.1/zprint-1.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/math.numeric-tower/0.0.5/math.numeric-tower-0.0.5.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-connector-basic/1.0.3/maven-resolver-connector-basic-1.0.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/core.rrb-vector/0.1.2/core.rrb-vector-0.1.2.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-spi/1.1.1/maven-resolver-spi-1.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/mvxcvi/puget/1.3.1/puget-1.3.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/tcrawley/dynapath/1.0.0/dynapath-1.0.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/httpcomponents/httpcore/4.4.6/httpcore-4.4.6.jar</td></tr><tr><td>/home/keith/.m2/repository/macroz/tangle/0.2.2/tangle-0.2.2.jar</td></tr><tr><td>/home/keith/.m2/repository/rewrite-cljs/rewrite-cljs/0.4.5/rewrite-cljs-0.4.5.jar</td></tr><tr><td>/home/keith/.m2/repository/borkdude/sci/0.2.1-alpha.1/sci-0.2.1-alpha.1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/jsoup/jsoup/1.7.2/jsoup-1.7.2.jar</td></tr><tr><td>/home/keith/.m2/repository/com/googlecode/json-simple/json-simple/1.1.1/json-simple-1.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/hiccup/hiccup/1.0.5/hiccup-1.0.5.jar</td></tr><tr><td>/home/keith/.m2/repository/nrepl/nrepl/0.8.3/nrepl-0.8.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/flatland/ordered/1.5.7/ordered-1.5.7.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/core.specs.alpha/0.2.62/core.specs.alpha-0.2.62.jar</td></tr><tr><td>/home/keith/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar</td></tr><tr><td>/home/keith/.m2/repository/org/flatland/useful/0.11.6/useful-0.11.6.jar</td></tr><tr><td>/home/keith/.m2/repository/hashp/hashp/0.2.1/hashp-0.2.1.jar</td></tr><tr><td>/home/keith/.m2/repository/borkdude/sci.impl.reflector/0.0.1/sci.impl.reflector-0.0.1.jar</td></tr><tr><td>/home/keith/.m2/repository/com/cognitect/transit-cljs/0.8.269/transit-cljs-0.8.269.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/spec.alpha/0.3.218/spec.alpha-0.3.218.jar</td></tr><tr><td>/home/keith/.m2/repository/org/slf4j/jcl-over-slf4j/1.6.2/jcl-over-slf4j-1.6.2.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/commons/commons-lang3/3.5/commons-lang3-3.5.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/wagon/wagon-http-shared/3.0.0/wagon-http-shared-3.0.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-transport-file/1.0.3/maven-resolver-transport-file-1.0.3.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/tools.reader/1.3.6/tools.reader-1.3.6.jar</td></tr><tr><td>/home/keith/.m2/repository/failjure/failjure/2.2.0/failjure-2.2.0.jar</td></tr><tr><td>/home/keith/.m2/repository/riddley/riddley/0.1.12/riddley-0.1.12.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/data.json/2.4.0/data.json-2.4.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.24/plexus-interpolation-1.24.jar</td></tr><tr><td>/home/keith/.m2/repository/commons-logging/commons-logging/1.2/commons-logging-1.2.jar</td></tr><tr><td>/home/keith/.m2/repository/commons-codec/commons-codec/1.9/commons-codec-1.9.jar</td></tr><tr><td>/home/keith/.m2/repository/cider/cider-nrepl/0.28.3/cider-nrepl-0.28.3.jar</td></tr><tr><td>/home/keith/.m2/repository/com/cemerick/pomegranate/1.1.0/pomegranate-1.1.0.jar</td></tr><tr><td>/home/keith/.m2/repository/com/cognitect/transit-clj/1.0.329/transit-clj-1.0.329.jar</td></tr><tr><td>/home/keith/.m2/repository/org/clojure/tools.macro/0.1.1/tools.macro-0.1.1.jar</td></tr><tr><td>/home/keith/.m2/repository/borkdude/edamame/0.0.11-alpha.28/edamame-0.0.11-alpha.28.jar</td></tr><tr><td>/home/keith/.m2/repository/org/javassist/javassist/3.18.1-GA/javassist-3.18.1-GA.jar</td></tr><tr><td>/home/keith/.m2/repository/http-kit/http-kit/2.6.0/http-kit-2.6.0.jar</td></tr><tr><td>/home/keith/.m2/repository/medley/medley/1.4.0/medley-1.4.0.jar</td></tr><tr><td>/home/keith/.m2/repository/org/slf4j/slf4j-api/1.6.2/slf4j-api-1.6.2.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/maven-artifact/3.5.3/maven-artifact-3.5.3.jar</td></tr><tr><td>/home/keith/.m2/repository/clj-stacktrace/clj-stacktrace/0.2.8/clj-stacktrace-0.2.8.jar</td></tr><tr><td>/home/keith/.m2/repository/org/apache/maven/resolver/maven-resolver-impl/1.1.1/maven-resolver-impl-1.1.1.jar</td></tr></table>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Keith D Houser</p>
<p class="date">Created: 2022-07-24 Sun 14:20</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
